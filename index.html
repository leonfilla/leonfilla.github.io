<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Eine Sammlung von Kaffee-Rezepten für die xBloom Studio, optimiert für Süße, Körper und Klarheit, inklusive detaillierter Brüh-Guides und rechtlicher Hinweise.">
    <meta name="author" content="Leon Filla">
    <title>Leons xBloom-Studio-Guide</title>
    
    <!-- Tailwind CSS with Typography Plugin -->
    <script src="https://cdn.tailwindcss.com?plugins=typography"></script>
    
    <!-- React & ReactDOM Libraries (Production Version) -->
    <script src="https://unpkg.com/react@17/umd/react.production.min.js" crossorigin></script>
    <script src="https://unpkg.com/react-dom@17/umd/react-dom.production.min.js" crossorigin></script>
    
    <!-- Google Fonts: Inter (sans-serif) and Lora (serif) -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Lora:ital,wght@0,400..700;1,400..700&display=swap" rel="stylesheet">
    
    <style>
        /* Custom font family definitions to match the code's Tailwind classes */
        body {
            font-family: 'Inter', sans-serif;
            scroll-behavior: smooth; /* Enables smooth scrolling for the "Back to Top" button */
        }
        .font-sans {
             font-family: 'Inter', sans-serif;
        }
        .font-serif {
            font-family: 'Lora', serif;
        }
        /* New, robust animation for accordion using CSS Grid */
        .grid-transition {
            display: grid;
            grid-template-rows: 0fr;
            transition: grid-template-rows 0.35s ease-in-out;
        }
        .grid-transition.open {
            grid-template-rows: 1fr;
        }
        .grid-transition > div {
            overflow: hidden;
        }

        /* Initial Loading Spinner */
        #initial-loader {
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
        }
        .spinner {
            border: 4px solid rgba(0, 0, 0, 0.1);
            width: 36px;
            height: 36px;
            border-radius: 50%;
            border-left-color: #57534e; /* stone-600 */
            animation: spin 1s ease-in-out infinite;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style>
</head>
<body class="bg-stone-100">

    <!-- The root element where the React app will be mounted -->
    <div id="root">
        <!-- Initial Loader shown before React mounts -->
        <div id="initial-loader">
            <div class="spinner"></div>
        </div>
    </div>

    <!-- The React application code, pre-compiled to plain JavaScript -->
    <script type="text/javascript">
        const { useState, useEffect, useRef, useMemo } = React;

        // ### ICONS ###
        const ChevronDownIcon = ({ className = "w-5 h-5 text-stone-600" }) => (
          React.createElement("svg", { xmlns: "http://www.w3.org/2000/svg", fill: "none", viewBox: "0 0 24 24", strokeWidth: 1.5, stroke: "currentColor", className: className },
            React.createElement("path", { strokeLinecap: "round", strokeLinejoin: "round", d: "m19.5 8.25-7.5 7.5-7.5-7.5" })
          )
        );

        const ChevronUpIcon = ({ className = "w-6 h-6" }) => (
            React.createElement("svg", { xmlns: "http://www.w3.org/2000/svg", fill: "none", viewBox: "0 0 24 24", strokeWidth: 1.5, stroke: "currentColor", className: className },
                React.createElement("path", { strokeLinecap: "round", strokeLinejoin: "round", d: "m4.5 15.75 7.5-7.5 7.5 7.5" })
            )
        );
        
        const StarIcon = ({ className, filled = false }) => (
            React.createElement("svg", { xmlns: "http://www.w3.org/2000/svg", viewBox: "0 0 24 24", fill: filled ? 'currentColor' : 'none', stroke: "currentColor", strokeWidth: "1.5", className: className },
              React.createElement("path", { strokeLinecap: "round", strokeLinejoin: "round", d: "M11.48 3.499a.562.562 0 011.04 0l2.125 5.111a.563.563 0 00.475.345l5.518.442c.499.04.701.663.321.988l-4.204 3.602a.563.563 0 00-.182.557l1.285 5.385a.562.562 0 01-.84.61l-4.725-2.885a.563.563 0 00-.586 0L6.982 21.1a.562.562 0 01-.84-.61l1.285-5.386a.562.562 0 00-.182-.557l-4.204-3.602a.563.563 0 01.321-.988l5.518-.442a.563.563 0 00.475-.345L11.48 3.5z" })
            )
        );

        const ClipboardCopyIcon = ({ className = "w-5 h-5" }) => (
            React.createElement("svg", { xmlns: "http://www.w3.org/2000/svg", fill: "none", viewBox: "0 0 24 24", strokeWidth: 1.5, stroke: "currentColor", className: className },
                React.createElement("path", { strokeLinecap: "round", strokeLinejoin: "round", d: "M9 5H7a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V7a2 2 0 0 0-2-2h-2M9 5a2 2 0 0 0 2 2h2a2 2 0 0 0 2-2M9 5a2 2 0 0 1 2-2h2a2 2 0 0 1 2 2" })
            )
        );
        
        // ###################################################################################
        // ### COFFEE DATA ###
        // ###################################################################################
        const coffeeData = [
          {
            id: "heilandt_kerinci",
            name: "Kerinci",
            isDecaf: false,
            processing: "Anaerobic & Fermented",
            shortDescription: "Intensive Pflaume, Nougat und eine komplexe Grapefruit-Note.",
            mainImage: "https://www.heilandt.de/cdn/shop/files/Micro_FL_Kerinci_m.webp",
            colorAccent: "bg-orange-800",
            textColorAccent: "text-orange-900",
            borderColorAccent: "border-orange-700",
            bgColorAccentLight: "bg-orange-50",
            details: {
              roesterei: "Heilandt",
              sorte: "Anaerobic Natural",
              region: "Indonesien, Sumatra",
              produzent: "Rukun Saudara Coop.",
              wertung: 0, 
              menge: 15,
              verhaeltnis: "1:16.5", 
              wasserGesamt: 248,      
              mahlgrad: 42, 
              rpm: 70,
              aromaProfil: "Ein exotischer Anaerobic Natural, der mit Noten von Pflaume, Nougat und Grapefruit besticht. Ziel ist es, die expressive Säure und Komplexität zu bewahren und eine Überextraktion des schnell extrahierenden Kaffees zu vermeiden.",
              aufgussStrategieText: "Aufgrund der schnellen Löslichkeit wird eine sanfte Extraktionsstrategie verfolgt. Eine niedrigere Temperatur (91°C) und ein gröberer Mahlgrad sind entscheidend. Fünf kleine, gleichmäßige Aufgüsse sorgen für eine kontrollierte Extraktion, die die feinen Aromen schützt.",
              aufgussStrategiePunkte: ["Niedrige Temperatur (91°C): Schützt vor Überextraktion.","Fünf Aufgüsse: Sorgt für eine konstante und kontrollierte Extraktion.","Sanfte Gießmuster: Minimieren die Agitation des Kaffeebetts.","Vibration nach Bloom: Einmalige Vibration zur Nivellierung des Kaffeebetts."],
              brewSteps: [
                { phase: "Blooming", menge: 48, temp: 91, durchfluss: 3.1, pause: 35, muster: "Kreisförmig", vibVor: "Nein", vibNach: "Ja", dauer: 51, },
                { phase: "Aufguss 2", menge: 50, temp: 91, durchfluss: 3.1, pause: 25, muster: "Spiralförmig", vibVor: "Nein", vibNach: "Nein", dauer: 41, },
                { phase: "Aufguss 3", menge: 50, temp: 91, durchfluss: 3.1, pause: 25, muster: "Spiralförmig", vibVor: "Nein", vibNach: "Nein", dauer: 41, },
                { phase: "Aufguss 4", menge: 50, temp: 91, durchfluss: 3.1, pause: 25, muster: "Spiralförmig", vibVor: "Nein", vibNach: "Nein", dauer: 41, },
                { phase: "Aufguss 5", menge: 50, temp: 91, durchfluss: 3.1, pause: 0, muster: "Spiralförmig", vibVor: "Nein", vibNach: "Nein", dauer: 16, },
              ],
              gesamtBruehzeit: "3:10",
              anmerkungenTabelle: "Fokus: Kontrolle der schnellen Extraktion, Bewahrung der komplexen Fruchtigkeit. Startpunkt, empfohlen von Heilandt: 28 Klicks auf der Comandante.",
            },
          },
          {
            id: "heilandt_joven_macario",
            name: "Joven Macario",
            isDecaf: false,
            processing: "Anaerobic & Fermented",
            shortDescription: "Süße Traube, Orange und elegante Oolong-Tee-Noten.",
            mainImage: "https://www.heilandt.de/cdn/shop/files/Micro_FL_JovenMacario_m.webp",
            colorAccent: "bg-orange-800",
            textColorAccent: "text-orange-900",
            borderColorAccent: "border-orange-700",
            bgColorAccentLight: "bg-orange-50",
            details: {
              roesterei: "Heilandt",
              sorte: "Red Honey",
              region: "Mexiko, Oaxaca",
              produzent: "Joven Macario",
              wertung: 0,
              menge: 15,
              verhaeltnis: "1:16.5",
              wasserGesamt: 248,
              mahlgrad: 38,
              rpm: 80,
              aromaProfil: "Ein sehr ausgewogener und 'pflegeleichter' Red Honey mit Noten von Traube, Orange und Oolong. Der Kaffee zeichnet sich durch seine Süße und eine teeähnliche Textur aus. Ziel ist eine unkomplizierte, geschmackvolle Extraktion.",
              aufgussStrategieText: "Da dieser Kaffee als sehr verzeihend gilt, wird ein Standardrezept verwendet, das auf Konsistenz und Balance ausgelegt ist. Eine moderate Temperatur, ein mittlerer Mahlgrad und fünf gleichmäßige Aufgüsse sorgen für eine stetige Extraktion.",
              aufgussStrategiePunkte: ["Moderate Temperatur (92°C): Idealer Kompromiss für Süße und Frucht.","Fünf Aufgüsse: Eine klassische Methode für eine ausgewogene Tasse.","Spiralförmige Gießmuster: Sorgen für eine gleichmäßige Benetzung.","Lange Pausen: Geben dem Wasser Zeit zu drainieren."],
              brewSteps: [
                { phase: "Blooming", menge: 50, temp: 92, durchfluss: 3.2, pause: 40, muster: "Kreisförmig", vibVor: "Nein", vibNach: "Nein", dauer: 56, },
                { phase: "Aufguss 2", menge: 50, temp: 92, durchfluss: 3.2, pause: 30, muster: "Spiralförmig", vibVor: "Nein", vibNach: "Nein", dauer: 46, },
                { phase: "Aufguss 3", menge: 50, temp: 92, durchfluss: 3.2, pause: 30, muster: "Spiralförmig", vibVor: "Nein", vibNach: "Nein", dauer: 46, },
                { phase: "Aufguss 4", menge: 50, temp: 92, durchfluss: 3.2, pause: 30, muster: "Spiralförmig", vibVor: "Nein", vibNach: "Nein", dauer: 46, },
                { phase: "Aufguss 5", menge: 48, temp: 92, durchfluss: 3.2, pause: 0, muster: "Spiralförmig", vibVor: "Nein", vibNach: "Nein", dauer: 15, },
              ],
              gesamtBruehzeit: "3:29",
              anmerkungenTabelle: "Fokus: Ausgewogene Süße und Fruchtigkeit. Ein 'Alltagsrezept'. Startpunkt, empfohlen von Heilandt: 25 Klicks auf der Comandante.",
            },
          },
          {
            id: "gran_galope",
            name: "Gran Galope Filter",
            isDecaf: false,
            processing: "Washed",
            shortDescription: "Saftige Schwarzbeere, Melasse-Süße, Hauch Pampelmuse, voller Körper.",
            mainImage: "https://kaffeekirsche.berlin/cdn/shop/products/KK_GranGalope_250g_Filter_Square_768x768.jpg",
            colorAccent: "bg-orange-800",
            textColorAccent: "text-orange-900",
            borderColorAccent: "border-orange-700",
            bgColorAccentLight: "bg-orange-50",
            details: { 
              roesterei: "Kaffeekirsche",
              sorte: "Washed Filter",
              region: "Kolumbien, Huila",
              produzent: "Diverse Kleinbauern",
              wertung: 0,
              menge: 16,
              verhaeltnis: "1:15.5",
              wasserGesamt: 248,
              mahlgrad: 56,
              rpm: 80,
              aromaProfil: "Kolumbianischer Washed Filter mit Noten von Schwarzbeere und Pampelmuse, ergänzt durch eine tiefe Melasse-Süße. Ziel ist es, eine saftige Fruchtigkeit und lebendige Säure zu erzielen und die Melasse-Süße voll zu entwickeln.",
              aufgussStrategieText: "Eine 5-Phasen-Strategie mit fallendem Temperaturprofil. Der heiße Start extrahiert Säure und Frucht. Die folgenden vier Aufgüsse balancieren die Extraktion aus, um eine tiefe Melasse-Süße und einen vollen Körper zu entwickeln. Vibration nach dem Blooming ebnet das Kaffeebett.",
              aufgussStrategiePunkte: ["5-Phasen-Aufguss: Gleichmäßigere Extraktion.","Blooming (95°C) & Vibration: Für eine optimale Vorbereitung des Kaffeebetts.","Vier Hauptaufgüsse (95-93°C): Betonen zunächst die Säure und entwickeln dann schrittweise Süße und Körper."],
              brewSteps: [
                { phase: "Blooming", menge: 48, temp: 95, durchfluss: 3.2, pause: 30, muster: "Spiralförmig", vibVor: "Nein", vibNach: "Ja", dauer: 45, },
                { phase: "Aufguss 2", menge: 50, temp: 95, durchfluss: 3.4, pause: 25, muster: "Spiralförmig", vibVor: "Nein", vibNach: "Nein", dauer: 40, },
                { phase: "Aufguss 3", menge: 50, temp: 94, durchfluss: 3.4, pause: 25, muster: "Spiralförmig", vibVor: "Nein", vibNach: "Nein", dauer: 40, },
                { phase: "Aufguss 4", menge: 50, temp: 93, durchfluss: 3.2, pause: 25, muster: "Spiralförmig", vibVor: "Nein", vibNach: "Nein", dauer: 41, },
                { phase: "Aufguss 5", menge: 50, temp: 93, durchfluss: 3.2, pause: 0, muster: "Zentral", vibVor: "Nein", vibNach: "Nein", dauer: 16, },
              ],
              gesamtBruehzeit: "3:02",
              anmerkungenTabelle: "Fokus: Saftige Säure & Frucht, Melasse-Süße, voller Körper. 5 Aufgüsse für eine kontrollierte, ausbalancierte Extraktion.",
            },
          },
          {
            id: "kenya_aa",
            name: "Kenya AA Top Githima",
            isDecaf: false,
            processing: "Washed",
            shortDescription: "Komplexer Schwarztee, Pflaume, Physalis, elegante Süße.",
            mainImage: "https://kaffeekirsche.berlin/cdn/shop/files/7_ae101fb5-bc47-49fa-aa70-ad0e5fce901b_768x768.png",
            colorAccent: "bg-orange-800",
            textColorAccent: "text-orange-900",
            borderColorAccent: "border-orange-700",
            bgColorAccentLight: "bg-orange-50",
            details: { 
              roesterei: "Kaffeekirsche",
              sorte: "Washed Doppel-Fermentiert",
              region: "Kenia, Nyeri",
              produzent: "Githima Factory",
              wertung: 0,
              menge: 16,
              verhaeltnis: "1:16.0",
              wasserGesamt: 256,
              mahlgrad: 61,
              rpm: 65,
              aromaProfil: "Ein Kenia Washed mit Noten von Schwarztee, Pflaume und Physalis. Er hat einen lang anhaltenden Körper, eine subtile Süße und eine lebendige Säure. Ziel ist es, die Komplexität zu entwickeln und eine teenähnliche Klarheit zu erreichen.",
              aufgussStrategieText: "Aufgrund der hohen Löslichkeit wird eine sanfte 5-Phasen-Strategie gewählt. Niedrigere Temperaturen, geringere Flussraten und vier kontrollierte Hauptaufgüsse mit langen Pausen sorgen für eine schonende, gleichmäßige Extraktion, die die Klarheit bewahrt und die Komplexität voll entfaltet.",
              aufgussStrategiePunkte: ["5-Phasen-Aufguss: Ideal für hochlösliche, delikate Kaffees.","Sanfte Parameter: Niedrige Temperatur, RPM und Flussrate.","Lange Pausen: Geben dem Kaffee Zeit, seine Aromen zu entfalten, ohne ihn zu überfordern."],
              brewSteps: [
                { phase: "Blooming", menge: 48, temp: 92, durchfluss: 3.0, pause: 40, muster: "Kreisförmig", vibVor: "Nein", vibNach: "Nein", dauer: 56, },
                { phase: "Aufguss 2", menge: 52, temp: 93, durchfluss: 3.1, pause: 35, muster: "Spiralförmig", vibVor: "Nein", vibNach: "Nein", dauer: 52, },
                { phase: "Aufguss 3", menge: 52, temp: 92, durchfluss: 3.1, pause: 35, muster: "Spiralförmig", vibVor: "Nein", vibNach: "Nein", dauer: 52, },
                { phase: "Aufguss 4", menge: 52, temp: 91, durchfluss: 3.0, pause: 35, muster: "Spiralförmig", vibVor: "Nein", vibNach: "Nein", dauer: 52, },
                { phase: "Aufguss 5", menge: 52, temp: 91, durchfluss: 3.0, pause: 0, muster: "Zentral", vibVor: "Nein", vibNach: "Nein", dauer: 17, },
              ],
              gesamtBruehzeit: "3:49",
              anmerkungenTabelle: "Fokus: Spritzige Säure, subtile Süße, komplexer Schwarztee-Körper. 5 Aufgüsse zur schonenden Extraktion und Wahrung der Klarheit.",
            },
          },
          {
            id: "uraga",
            name: "Uraga Raro Boda",
            isDecaf: false,
            processing: "Natural",
            shortDescription: "Intensive rote Beeren, floraler Jasmin, voller Körper & ausgeprägte Süße.",
            mainImage: "https://kaffeekirsche.berlin/cdn/shop/files/EthiopiaUraga_768x768.png",
            colorAccent: "bg-orange-800",
            textColorAccent: "text-orange-900",
            borderColorAccent: "border-orange-700",
            bgColorAccentLight: "bg-orange-50",
            details: { 
              roesterei: "Kaffeekirsche",
              sorte: "Natural Omniroast",
              region: "Äthiopien, Guji",
              produzent: "Uraga Raro Boda",
              wertung: 0,
              menge: 16,
              verhaeltnis: "1:16.0",
              wasserGesamt: 256,
              mahlgrad: 59, 
              rpm: 70, 
              aromaProfil: "Ein klassischer äthiopischer Natural, der durch seine Süße, Noten von roten Beeren und Jasmin sowie einen vollen, klaren Körper besticht. Ziel ist es, die delikaten floralen Jasminnoten zu schützen und die intensive Fruchtigkeit hervorzuheben.",
              aufgussStrategieText: "Eine 5-Phasen-Strategie mit fallendem Temperaturprofil. Die vier Hauptaufgüsse sorgen für eine gleichmäßige Extraktion, die die delikaten floralen und fruchtigen Noten schützt und gleichzeitig eine ausgeprägte Süße und einen vollen Körper entwickelt. Keine Vibration für maximale Klarheit.",
              aufgussStrategiePunkte: ["5-Phasen-Aufguss: Bessere Kontrolle über die Extraktion.","Blooming (92°C): Sanftes Öffnen der Aromen.","Zwei Aufgüsse bei 93°C: Betonen Fruchtigkeit und florale Noten.","Zwei finale Aufgüsse (92°C, 90°C): Entwickeln Süße und runden den Körper ab."],
              brewSteps: [
                { phase: "Blooming", menge: 48, temp: 92, durchfluss: 3.0, pause: 40, muster: "Spiralförmig", vibVor: "Nein", vibNach: "Nein", dauer: 56, },
                { phase: "Aufguss 2", menge: 52, temp: 93, durchfluss: 3.2, pause: 30, muster: "Spiralförmig", vibVor: "Nein", vibNach: "Nein", dauer: 46, },
                { phase: "Aufguss 3", menge: 52, temp: 93, durchfluss: 3.2, pause: 30, muster: "Spiralförmig", vibVor: "Nein", vibNach: "Nein", dauer: 46, },
                { phase: "Aufguss 4", menge: 52, temp: 92, durchfluss: 3.0, pause: 30, muster: "Kreisförmig", vibVor: "Nein", vibNach: "Nein", dauer: 47, },
                { phase: "Aufguss 5", menge: 52, temp: 90, durchfluss: 3.0, pause: 0, muster: "Zentral", vibVor: "Nein", vibNach: "Nein", dauer: 17, },
              ],
              gesamtBruehzeit: "3:32",
              anmerkungenTabelle: "Fokus: Schutz der Jasminnote, Betonung von intensiver Frucht (rote Beeren) & ausgeprägter Süße. 5 Aufgüsse für mehr Klarheit und Kontrolle.",
            },
          },
          { 
            id: "ruronzi_anaerobic_elbgold",
            name: "Ruronzi Anaerobic",
            isDecaf: false,
            processing: "Anaerobic & Fermented",
            shortDescription: "Intensive Kirsche, Ananas, komplexe Rum-Noten, saftiger Körper.",
            mainImage: "https://img.versacommerce.io/resize=grande/canvas=0/++/assets.versacommerce.de/images/7466d2805db4649f6f9fccd2dc422ddd6d34ab0c.jpg",
            colorAccent: "bg-orange-800",
            textColorAccent: "text-orange-900",
            borderColorAccent: "border-orange-700",
            bgColorAccentLight: "bg-orange-50",
            details: { 
              roesterei: "elbgold",
              sorte: "120h Anaerobic Natural", 
              region: "Ruanda, Karongi", 
              produzent: "Uzziel Habimana", 
              wertung: 0,
              menge: 16,
              verhaeltnis: "1:16.5",
              wasserGesamt: 264,
              mahlgrad: 60, 
              rpm: 60, 
              aromaProfil: "Ein 120h Anaerobic Natural, der mit Noten von reifer Kirsche, saftiger Ananas und Rum-Anklängen explodiert. Erwarte einen saftigen, vollen Körper und eine komplexe Süße. Ziel ist es, die vielschichtige Fruchtigkeit und die Fermentationsnoten präzise herauszuarbeiten.",
              aufgussStrategieText: "Eine besonders behutsame 5-Phasen-Strategie, um die intensiven und flüchtigen Aromen zu schützen. Vier kleine Hauptaufgüsse mit fallender Temperatur, sehr niedrige RPM (60) und keine Vibration sind essenziell, um die Klarheit zu maximieren und die komplexen Fermentationsnoten nicht zu überdecken.",
              aufgussStrategiePunkte: ["5-Phasen-Aufguss: Maximale Kontrolle für delikate Anaerobics.","Fallendes Temperaturprofil (93°C auf 88°C): Extrahiert schrittweise verschiedene Aromen.","Sehr sanfte Parameter: Niedrige RPM und keine Vibration zum Schutz der Aromen."],
              brewSteps: [
                { phase: "Blooming", menge: 48, temp: 93, durchfluss: 3.0, pause: 45, muster: "Spiralförmig", vibVor: "Nein", vibNach: "Nein", dauer: 61, },
                { phase: "Aufguss 2", menge: 54, temp: 92, durchfluss: 3.1, pause: 35, muster: "Spiralförmig", vibVor: "Nein", vibNach: "Nein", dauer: 52, },
                { phase: "Aufguss 3", menge: 54, temp: 90, durchfluss: 3.0, pause: 35, muster: "Kreisförmig", vibVor: "Nein", vibNach: "Nein", dauer: 53, },
                { phase: "Aufguss 4", menge: 54, temp: 88, durchfluss: 3.0, pause: 35, muster: "Kreisförmig", vibVor: "Nein", vibNach: "Nein", dauer: 53, },
                { phase: "Aufguss 5", menge: 54, temp: 88, durchfluss: 3.0, pause: 0, muster: "Zentral", vibVor: "Nein", vibNach: "Nein", dauer: 18, },
              ],
              gesamtBruehzeit: "3:57", 
              anmerkungenTabelle: "Fokus: Maximale Entfaltung der Fruchtigkeit (Kirsche, Ananas) & Rum-Note. 5 Aufgüsse für höchste Klarheit und Aromen-Schutz.",
            },
          },
          {
            id: "huye_mountain_elbgold",
            name: "Huye Mountain",
            isDecaf: false,
            processing: "Natural",
            shortDescription: "Weisse Nektarine, Kakaonibs, Preiselbeere, ausgeprägte Fruchtsüße.",
            mainImage: "https://img.versacommerce.io/resize=grande/canvas=0/++/assets.versacommerce.de/images/ea51682f86a5e8bb2da4a15b8c64bd472f078c19.jpg",
            colorAccent: "bg-orange-800",
            textColorAccent: "text-orange-900",
            borderColorAccent: "border-orange-700",
            bgColorAccentLight: "bg-orange-50",
            details: {
              roesterei: "elbgold",
              sorte: "Red Bourbon (Natural)",
              region: "Ruanda, Huye District", 
              produzent: "David Rubanzangabo", 
              wertung: 0,
              menge: 16,
              verhaeltnis: "1:16.0",
              wasserGesamt: 256,
              mahlgrad: 57,
              rpm: 60,
              aromaProfil: "Ein Natural Red Bourbon aus Ruanda mit Aromen von weißer Nektarine, Kakaonibs und Preiselbeere. Ziel ist es, die ausgeprägte Fruchtsüße und die komplexen Aromen des Natural-Prozesses hervorzuheben und einen runden Körper zu entwickeln.",
              aufgussStrategieText: "Die 5-Phasen-Strategie fokussiert auf eine sanfte Extraktion, um die delikaten Fruchtnoten zu bewahren. Niedrigere Temperaturen und Mahlwerk-RPMs (60) helfen, Überextraktion zu vermeiden und die Klarheit zu fördern. Keine Vibration, um die Geschmacksnuancen nicht zu überdecken.",
              aufgussStrategiePunkte: ["5-Phasen-Aufguss: Sanfte Extraktion für delikate Naturals.","Fallendes Temperaturprofil (91°C auf 88°C): Schützt feine Aromen.","Niedrige RPM & keine Vibration: Fördert Klarheit und vermeidet Bitterkeit."],
              brewSteps: [ 
                { phase: "Blooming", menge: 48, temp: 91, durchfluss: 3.0, pause: 45, muster: "Kreisförmig", vibVor: "Nein", vibNach: "Nein", dauer: 61 }, 
                { phase: "Aufguss 2", menge: 52, temp: 92, durchfluss: 3.0, pause: 30, muster: "Spiralförmig", vibVor: "Nein", vibNach: "Nein", dauer: 47 }, 
                { phase: "Aufguss 3", menge: 52, temp: 90, durchfluss: 3.0, pause: 30, muster: "Kreisförmig", vibVor: "Nein", vibNach: "Nein", dauer: 47 }, 
                { phase: "Aufguss 4", menge: 52, temp: 88, durchfluss: 3.0, pause: 30, muster: "Kreisförmig", vibVor: "Nein", vibNach: "Nein", dauer: 47 }, 
                { phase: "Aufguss 5", menge: 52, temp: 88, durchfluss: 3.0, pause: 0, muster: "Zentral", vibVor: "Nein", vibNach: "Nein", dauer: 17 },      
              ],
              gesamtBruehzeit: "3:39", 
              anmerkungenTabelle: "Fokus: Fruchtige Süße (Weisse Nektarine, Preiselbeere) und Kakaonibs-Noten. 5 Aufgüsse für mehr Klarheit und Kontrolle.",
            },
          },
           {
            id: "heilandt_24_sieben_decaf",
            name: "24/sieben Decaf",
            isDecaf: true,
            processing: "Decaf",
            shortDescription: "Noten von Kirsche und Brownie in einer klaren Filterröstung.",
            mainImage: "https://www.heilandt.de/cdn/shop/files/FL_24_sieben_m.webp",
            colorAccent: "bg-orange-800",
            textColorAccent: "text-orange-900",
            borderColorAccent: "border-orange-700",
            bgColorAccentLight: "bg-orange-50",
            details: {
              roesterei: "Heilandt",
              sorte: "Mountain Water Decaf",
              region: "Mexiko, Oaxaca",
              produzent: "Diverse Kleinbauern",
              wertung: 0,
              menge: 16,
              verhaeltnis: "1:15.5",
              wasserGesamt: 248,
              mahlgrad: 32,
              rpm: 60,
              aromaProfil: "Ein hochwertiger Decaf, entkoffeiniert durch den schonenden Mountain Water Process. Erwartet werden Noten von Kirsche und Brownie. Ziel ist, eine volle, süße Tasse zu kreieren, die einem koffeinhaltigen Kaffee in nichts nachsteht.",
              aufgussStrategieText: "Eine 5-Phasen-Strategie für maximale Kontrolle. Die leicht höhere Temperatur extrahiert die Aromen aus den dichteren Decaf-Bohnen, während vier kleine Hauptaufgüsse eine gleichmäßige Extraktion für vollen Körper und klare Süße sichern.",
              aufgussStrategiePunkte: ["Angepasste 5-Phasen-Extraktion für mehr Kontrolle.","Etwas höhere Temperatur (93°C): Löst die Aromen aus den Bohnen.","Vier Hauptaufgüsse: Sorgen für eine gleichmäßigere und tiefere Extraktion.","Niedrige RPM (60): Minimiert Feinstpartikel, wichtig bei Decafs."],
              brewSteps: [
                { phase: "Blooming", menge: 48, temp: 93, durchfluss: 3.0, pause: 40, muster: "Kreisförmig", vibVor: "Nein", vibNach: "Nein", dauer: 56, },
                { phase: "Aufguss 2", menge: 50, temp: 93, durchfluss: 3.1, pause: 25, muster: "Spiralförmig", vibVor: "Nein", vibNach: "Nein", dauer: 41, },
                { phase: "Aufguss 3", menge: 50, temp: 93, durchfluss: 3.1, pause: 25, muster: "Spiralförmig", vibVor: "Nein", vibNach: "Nein", dauer: 41, },
                { phase: "Aufguss 4", menge: 50, temp: 92, durchfluss: 3.1, pause: 25, muster: "Spiralförmig", vibVor: "Nein", vibNach: "Nein", dauer: 41, },
                { phase: "Aufguss 5", menge: 50, temp: 92, durchfluss: 3.0, pause: 0, muster: "Zentral", vibVor: "Nein", vibNach: "Nein", dauer: 17, },
              ],
              gesamtBruehzeit: "3:16",
              anmerkungenTabelle: "Fokus: Maximale Süße & Körper, Noten von Kirsche & Brownie. 5 Aufgüsse für gleichmäßigere Extraktion & besseres Temperaturmanagement.",
            },
          },
          {
            id: "popayan_decaf",
            name: "Popayan Reserve Decaf",
            isDecaf: true,
            processing: "Decaf",
            shortDescription: "Süßes Zuckerrohr, Kakaonibs, Bergpfirsich, präsente Süße.",
            mainImage: "https://kaffeekirsche.berlin/cdn/shop/files/KK_Popayan-Decaf_Square_768x768.jpg",
            colorAccent: "bg-orange-800",
            textColorAccent: "text-orange-900",
            borderColorAccent: "border-orange-700",
            bgColorAccentLight: "bg-orange-50",
            details: { 
              roesterei: "Kaffeekirsche",
              sorte: "E.A. Decaf",
              region: "Kolumbien, Popayan",
              produzent: "Diverse Kleinbauern",
              wertung: 0,
              menge: 16,
              verhaeltnis: "1:15.0",
              wasserGesamt: 240,
              mahlgrad: 60,
              rpm: 60,
              aromaProfil: "Ein E.A. Decaf, der mit Noten von süßem Zuckerrohr, Kakaonibs und saftigem Bergpfirsich überzeugt. Er bietet einen fruchtbetonten Körper und eine präsente Süße. Ziel ist es, maximale Süße und klare Fruchtnoten zu extrahieren.",
              aufgussStrategieText: "Eine sanfte 4-Phasen-Puls-Strategie. Statt eines großen Aufgusses sorgen drei kleinere Hauptaufgüsse für eine bessere Temperaturstabilität und gleichmäßigere Extraktion. Dies maximiert die Süße, ohne durch Agitation Bitterkeit zu provozieren.",
              aufgussStrategiePunkte: ["4-Phasen-Strategie: Bessere Kontrolle als die 2-Phasen-Methode.","Drei sanfte Hauptaufgüsse: Maximieren die Süße und Klarheit.","Niedrige RPM und keine Vibration: Essentiell zur Vermeidung von Bitterkeit."],
              brewSteps: [
                { phase: "Blooming", menge: 48, temp: 93, durchfluss: 3.0, pause: 35, muster: "Kreisförmig", vibVor: "Nein", vibNach: "Nein", dauer: 51, },
                { phase: "Aufguss 2", menge: 64, temp: 93, durchfluss: 3.0, pause: 25, muster: "Spiralförmig", vibVor: "Nein", vibNach: "Nein", dauer: 46, },
                { phase: "Aufguss 3", menge: 64, temp: 93, durchfluss: 3.0, pause: 25, muster: "Spiralförmig", vibVor: "Nein", vibNach: "Nein", dauer: 46, },
                { phase: "Aufguss 4", menge: 64, temp: 92, durchfluss: 3.0, pause: 0, muster: "Zentral", vibVor: "Nein", vibNach: "Nein", dauer: 21, },
              ],
              gesamtBruehzeit: "2:44",
              anmerkungenTabelle: "Fokus: Maximale Süße & fruchtiger Körper. Überarbeitetes 4-Phasen-Rezept für mehr Gleichmäßigkeit und Temperaturstabilität.",
            },
          },
          {
            id: "kijani_kiboko_decaf",
            name: "Kijani Kiboko Decaf",
            isDecaf: true,
            processing: "Decaf",
            shortDescription: "Johannisbeere, Grapefruit, dunkle Trauben, seidiges Mundgefühl.",
            mainImage: "https://19grams.coffee/cdn/shop/files/Kijani_Filter.webp",
            colorAccent: "bg-orange-800",
            textColorAccent: "text-orange-900",
            borderColorAccent: "border-orange-700",
            bgColorAccentLight: "bg-orange-50",
            details: { 
              roesterei: "19grams",
              sorte: "CO₂ Decaf Filter",
              region: "Kenia",
              produzent: "Diverse Kooperativen",
              wertung: 0,
              menge: 16,
              verhaeltnis: "1:15.5",
              wasserGesamt: 248,
              mahlgrad: 58,
              rpm: 60,
              aromaProfil: "Ein Kenia CO₂ Decaf mit Noten von schwarzer Johannisbeere, Grapefruit und dunklen Trauben. Er besitzt ein besonders seidiges Mundgefühl. Ziel ist es, die delikaten Fruchtnoten präzise herauszuarbeiten und ein geschmeidiges Mundgefühl zu entwickeln.",
              aufgussStrategieText: "Eine sanfte 5-Phasen-Extraktion wird angestrebt. Spezifische Muster, ein fallendes Temperaturprofil und niedrigste RPM (60) sorgen für eine schonende Behandlung. Auf Vibration wird verzichtet, um die feinen Aromen und die Klarheit zu bewahren.",
              aufgussStrategiePunkte: ["5-Phasen-Aufguss für maximale Kontrolle.","Fallendes Temperaturprofil (92°C auf 91°C) zur Balance von Frucht und Süße.","Keine Vibration zur Wahrung des seidigen Mundgefühls."],
              brewSteps: [
                { phase: "Blooming", menge: 48, temp: 92, durchfluss: 3.0, pause: 35, muster: "Kreisförmig", vibVor: "Nein", vibNach: "Nein", dauer: 51, },
                { phase: "Aufguss 2", menge: 50, temp: 93, durchfluss: 3.1, pause: 30, muster: "Spiralförmig", vibVor: "Nein", vibNach: "Nein", dauer: 46, },
                { phase: "Aufguss 3", menge: 50, temp: 92, durchfluss: 3.1, pause: 30, muster: "Spiralförmig", vibVor: "Nein", vibNach: "Nein", dauer: 46, },
                { phase: "Aufguss 4", menge: 50, temp: 92, durchfluss: 3.1, pause: 30, muster: "Spiralförmig", vibVor: "Nein", vibNach: "Nein", dauer: 46, },
                { phase: "Aufguss 5", menge: 50, temp: 91, durchfluss: 3.0, pause: 0, muster: "Zentral", vibVor: "Nein", vibNach: "Nein", dauer: 17, },
              ],
              gesamtBruehzeit: "3:26",
              anmerkungenTabelle: "Fokus: Klare Kenia-Frucht, Süße & seidiges Mundgefühl. 5 Aufgüsse für maximale Kontrolle und Aromaschutz.",
            },
          },
        ];

        // ###################################################################################
        // ### LEGAL CONTENT ###
        // ###################################################################################
        const legalContent = {
            impressum: {
                title: 'Impressum',
                content: React.createElement(
                    'div',
                    { className: 'prose prose-stone max-w-none prose-headings:font-serif prose-headings:text-stone-800' },
                    React.createElement('h2', null, 'Angaben gemäß § 5 TMG'),
                    React.createElement('p', null, 'Leon Filla', React.createElement('br'), 'Jütländer Allee 49', React.createElement('br'), '22527 Hamburg'),
                    React.createElement('h2', null, 'Kontakt'),
                    React.createElement('p', null, '+4915122998676', React.createElement('br'), 'leonfilla@gmail.com'),
                    React.createElement('h2', null, 'Verantwortlich für den Inhalt nach § 18 Abs. 2 MStV'),
                    React.createElement('p', null, 'Leon Filla', React.createElement('br'), 'Anschrift wie oben'),
                    React.createElement('h3', { className: 'mt-6' }, 'Haftungsausschluss'),
                    React.createElement('p', null, 'Als Diensteanbieter sind wir gemäß § 7 Abs.1 TMG für eigene Inhalte auf diesen Seiten nach den allgemeinen Gesetzen verantwortlich. Nach §§ 8 bis 10 TMG sind wir als Diensteanbieter jedoch nicht verpflichtet, übermittelte oder gespeicherte fremde Informationen zu überwachen oder nach Umständen zu forschen, die auf eine rechtswidrige Tätigkeit hinweisen. Verpflichtungen zur Entfernung oder Sperrung der Nutzung von Informationen nach den allgemeinen Gesetzen bleiben hiervon unberührt. Eine diesbezügliche Haftung ist jedoch erst ab dem Zeitpunkt der Kenntnis einer konkreten Rechtsverletzung möglich. Bei Bekanntwerden von entsprechenden Rechtsverletzungen werden wir diese Inhalte umgehend entfernen.')
                ),
            },
            datenschutz: {
                title: 'Datenschutzerklärung',
                content: React.createElement(
                    'div',
                    { className: 'prose prose-stone max-w-none prose-headings:font-serif prose-headings:text-stone-800 prose-a:text-orange-800 hover:prose-a:text-orange-900' },
                    React.createElement('p', null, 'Verantwortlicher im Sinne der Datenschutzgesetze, insbesondere der EU-Datenschutzgrundverordnung (DSGVO), ist:'),
                    React.createElement('p', null, 'Leon Filla', React.createElement('br'), 'Jütländer Allee 49', React.createElement('br'), '22527 Hamburg'),
                    React.createElement('h3', null, 'Deine Betroffenenrechte'),
                    React.createElement('p', null, 'Unter den angegebenen Kontaktdaten kannst du jederzeit folgende Rechte ausüben:'),
                    React.createElement('ul', null, 
                        React.createElement('li', null, 'Auskunft über deine bei uns gespeicherten Daten und deren Verarbeitung (Art. 15 DSGVO),'),
                        React.createElement('li', null, 'Berichtigung unrichtiger personenbezogener Daten (Art. 16 DSGVO),'),
                        React.createElement('li', null, 'Löschung deiner bei uns gespeicherten Daten (Art. 17 DSGVO),'),
                        React.createElement('li', null, 'Einschränkung der Datenverarbeitung, sofern wir deine Daten aufgrund gesetzlicher Pflichten noch nicht löschen dürfen (Art. 18 DSGVO),'),
                        React.createElement('li', null, 'Widerspruch gegen die Verarbeitung deiner Daten bei uns (Art. 21 DSGVO) und'),
                        React.createElement('li', null, 'Datenübertragbarkeit, sofern du in die Datenverarbeitung eingewilligt hast oder einen Vertrag mit uns abgeschlossen hast (Art. 20 DSGVO).')
                    ),
                    React.createElement('p', null, 'Sofern du uns eine Einwilligung erteilt hast, kannst du diese jederzeit mit Wirkung für die Zukunft widerrufen.'),
                    React.createElement('h3', null, 'Erfassung allgemeiner Informationen beim Besuch unserer Website'),
                    React.createElement('h4', null, 'Art und Zweck der Verarbeitung:'),
                    React.createElement('p', null, 'Wenn du auf unsere Website zugreifst, werden automatisch mittels eines Cookies Informationen allgemeiner Natur erfasst. Diese Informationen (Server-Logfiles) beinhalten etwa die Art des Webbrowsers, das verwendete Betriebssystem, den Domainnamen deines Internet-Service-Providers, deine IP-Adresse und ähnliches.'),
                    React.createElement('h3', null, 'Eingebundene Dienste von Drittanbietern'),
                     React.createElement('p', null, 'Um unsere Inhalte korrekt auszuliefern und darzustellen, verwenden wir auf dieser Website externe Dienste:'),
                     React.createElement('ul', null, 
                        React.createElement('li', null, React.createElement('strong', null, 'Google Fonts:'), ' Zur einheitlichen Darstellung von Schriftarten. Anbieter ist die Google Ireland Limited. Durch die Einbindung wird deine IP-Adresse an Google übertragen. Weitere Informationen findest du in der ', React.createElement('a', {href: 'https://policies.google.com/privacy', target: '_blank', rel: 'noopener noreferrer'}, 'Datenschutzerklärung von Google'), '.'),
                        React.createElement('li', null, React.createElement('strong', null, 'Tailwind CSS (CDN):'), ' Zur visuellen Gestaltung der Website. Der Dienst wird über ein Content Delivery Network (CDN) bereitgestellt, was zur Übertragung deiner IP-Adresse an den CDN-Anbieter führen kann.'),
                        React.createElement('li', null, React.createElement('strong', null, 'React & ReactDOM (via unpkg):'), ' Die JavaScript-Bibliotheken zur Funktionalität der Seite werden über das CDN unpkg.com geladen. Auch hierbei wird deine IP-Adresse an den Anbieter übertragen.')
                     ),
                    React.createElement('h3', null, 'Änderung unserer Datenschutzbestimmungen'),
                    React.createElement('p', null, 'Wir behalten uns vor, diese Datenschutzerklärung anzupassen, damit sie stets den aktuellen rechtlichen Anforderungen entspricht oder um Änderungen unserer Leistungen in der Datenschutzerklärung umzusetzen, z. B. bei der Einführung neuer Services. Für deinen erneuten Besuch gilt dann die neue Datenschutzerklärung.')
                ),
            },
        };

        // ### COMPONENTS ###
        
        const StarRating = ({ rating, total = 10, colorClass = 'text-amber-700' }) => {
          if (rating === 0) {
            return null;
          }
          const stars = [];
          for (let i = 1; i <= total; i++) {
            stars.push(React.createElement(StarIcon, { key: i, className: `w-5 h-5 ${colorClass}`, filled: i <= rating }));
          }
          return React.createElement("div", { className: "flex items-center space-x-0.5" }, ...stars);
        };

        const AccordionItem = ({ title, children, titleClassName, initiallyOpen = false }) => {
            const [isOpen, setIsOpen] = useState(initiallyOpen);

            return (
                React.createElement("div", { className: "border-b border-stone-200" },
                    React.createElement("button", {
                        onClick: () => setIsOpen(!isOpen),
                        className: `flex items-center justify-between w-full text-left py-4 focus:outline-none ${titleClassName}`
                    },
                        React.createElement("span", { className: "font-medium" }, title),
                        React.createElement("span", { className: `transform transition-transform duration-300 ${isOpen ? "rotate-180" : ""}` },
                            React.createElement(ChevronDownIcon, null)
                        )
                    ),
                    React.createElement("div", { className: `grid-transition ${isOpen ? 'open' : ''}` },
                        React.createElement("div", null,
                          React.createElement("div", { className: "pb-6 pt-2 prose prose-stone max-w-none prose-strong:text-stone-800 prose-a:text-orange-800 hover:prose-a:text-orange-900 prose-ul:pl-5 prose-li:my-1" },
                              children
                          )
                        )
                    )
                )
            );
        };
        
        const CollapsibleSection = ({ title, isOpen, onToggle, children }) => (
          React.createElement("div", { className: "mb-10 bg-white rounded-lg shadow-sm p-4 sm:p-6" },
            React.createElement("button", {
              onClick: onToggle,
              className: "flex items-center justify-between w-full text-left text-2xl font-serif text-stone-700 pb-4"
            },
              title,
              React.createElement("span", { className: `transform transition-transform duration-300 ${isOpen ? "rotate-180" : ""}` },
                React.createElement(ChevronDownIcon, { className: "w-6 h-6 text-stone-500" })
              )
            ),
            React.createElement("div", { className: `grid-transition ${isOpen ? 'open' : ''}` },
                React.createElement("div", null,
                  React.createElement("div", { className: "pt-4 border-t border-stone-200" },
                    children
                  )
                )
            )
          )
        );
        
        // Main App Component
        const App = () => {
          const [isLoading, setIsLoading] = useState(true);
          const [selectedCoffee, setSelectedCoffee] = useState(null);
          const [legalModalContentKey, setLegalModalContentKey] = useState(null);
          const [isInfoOpen, setIsInfoOpen] = useState(true); 
          const [isCaffeinatedOpen, setIsCaffeinatedOpen] = useState(true);
          const [isDecafOpen, setIsDecafOpen] = useState(true);
          const [searchTerm, setSearchTerm] = useState('');
          const [showBackToTop, setShowBackToTop] = useState(false);

          // Simulate loading
          useEffect(() => {
            const timer = setTimeout(() => {
                const loader = document.getElementById('initial-loader');
                if (loader) {
                    loader.style.display = 'none';
                }
                setIsLoading(false);
            }, 500);
            return () => clearTimeout(timer);
          }, []);

          // Back to Top button logic
          useEffect(() => {
            const checkScrollTop = () => {
              if (!showBackToTop && window.pageYOffset > 400) {
                setShowBackToTop(true);
              } else if (showBackToTop && window.pageYOffset <= 400) {
                setShowBackToTop(false);
              }
            };
            window.addEventListener('scroll', checkScrollTop);
            return () => window.removeEventListener('scroll', checkScrollTop);
          }, [showBackToTop]);

          // Filtering Logic
          const filteredCoffees = useMemo(() => {
              return coffeeData
                  .filter(coffee => {
                      const term = searchTerm.toLowerCase();
                      return (
                          coffee.name.toLowerCase().includes(term) ||
                          coffee.details.roesterei.toLowerCase().includes(term) ||
                          coffee.details.region.toLowerCase().includes(term) ||
                          coffee.processing.toLowerCase().includes(term)
                      );
                  })
                  .sort((a, b) => a.name.localeCompare(b.name)); // Default sort by name A-Z
          }, [searchTerm]);
          
          const decafCoffees = filteredCoffees.filter((coffee) => coffee.isDecaf);
          const caffeinatedCoffees = filteredCoffees.filter((coffee) => !coffee.isDecaf);

          const groupedCaffeinatedCoffees = caffeinatedCoffees.reduce((acc, coffee) => {
            const group = coffee.processing || 'Unbekannt';
            if (!acc[group]) {
              acc[group] = [];
            }
            acc[group].push(coffee);
            return acc;
          }, {});

          const groupOrder = ['Washed', 'Natural', 'Anaerobic & Fermented'];

          const openModal = (setter, value) => {
            setter(value);
            document.body.style.overflow = 'hidden';
          };

          const closeModal = (setter) => {
            setter(null);
            document.body.style.overflow = 'auto';
          };

          const scrollToTop = () => {
              window.scrollTo({ top: 0, behavior: 'smooth' });
          };

          if (isLoading) {
              return null; // Don't render the app until the loader is hidden
          }

          return (
            React.createElement("div", { className: "min-h-screen bg-stone-100 text-stone-800 p-4 sm:p-8 lg:p-12 font-sans selection:bg-orange-200 selection:text-orange-900" },
              React.createElement("header", { className: "text-center mb-16" },
                React.createElement("h1", { className: "text-5xl lg:text-6xl font-serif font-medium text-stone-700" }, "Der Grund, morgens aufzustehen"),
                React.createElement("p", { className: "text-lg text-stone-500 mt-3" }, "by Leon Filla")
              ),

              React.createElement("div", { className: "max-w-7xl mx-auto" },
                React.createElement(CollapsibleSection, {
                  title: "Eine gute Tasse Kaffee",
                  isOpen: isInfoOpen,
                  onToggle: () => setIsInfoOpen(!isInfoOpen)
                },
                  React.createElement(AccordionItem, { title: "1. Worauf kommts an?", titleClassName: "text-xl text-stone-700 font-serif", initiallyOpen: true },
                      React.createElement("p", null, "Diese Rezepte zielen darauf ab, das Geschmackspotenzial von Kaffeesorten durch die Steuerung bestimmter Parameter zu maximieren. Wir fokussieren uns auf die drei zentralen Geschmacksdimensionen:"),
                      React.createElement("ul", null,
                          React.createElement("li", null, React.createElement("strong", null, "Süße:"), " Entsteht durch den Abbau von komplexen Kohlenhydraten. Sie wird typischerweise im mittleren bis späten Teil der Extraktion gelöst."),
                          React.createElement("li", null, React.createElement("strong", null, "Fruchtigkeit:"), " Stammt von organischen Säuren in der Bohne. Diese lösen sich sehr früh und schnell im Brühprozess."),
                          React.createElement("li", null, React.createElement("strong", null, "Körper/Mundgefühl:"), " Wird durch Öle und Kolloide erzeugt. Diese benötigen mehr Zeit und Energie zur Extraktion.")
                      ),
                      React.createElement("p", null, "Eine gute Extraktion balanciert diese drei Dimensionen aus, um eine komplexe, aber harmonische Tasse zu erzeugen. Die folgenden Parameter sind unsere Werkzeuge, um dieses Gleichgewicht zu steuern.")
                  ),
                  React.createElement(AccordionItem, { title: "2. xBloom-Parameter", titleClassName: "text-xl text-stone-700 font-serif" },
                      React.createElement("div", { className: "pl-4 border-l-2 border-stone-200 space-y-2" },
                          React.createElement(AccordionItem, { title: "Mahlgrad", titleClassName: "text-lg text-stone-600" },
                              React.createElement("p", null, "Der Mahlgrad ist der ", React.createElement("strong", null, "wichtigste Hebel"), " zur Steuerung der Extraktion. Er bestimmt die Oberfläche des Kaffeemehls und damit, wie schnell Aromen extrahiert werden."),
                              React.createElement("ul", null,
                                  React.createElement("li", null, React.createElement("strong", null, "Feinerer Mahlgrad:"), " Mehr Oberfläche, höherer Widerstand für das Wasser. Führt zu einer langsameren, intensiveren Extraktion. Zu fein: Überextraktion (bitter, trocken, adstringierend)."),
                                  React.createElement("li", null, React.createElement("strong", null, "Gröberer Mahlgrad:"), " Weniger Oberfläche, geringerer Widerstand. Führt zu einer schnelleren, weniger intensiven Extraktion. Zu grob: Unterextraktion (sauer, wässrig, leer).")
                              ),
                              React.createElement("p", null, React.createElement("strong", null, "Die xBloom-Skala:"), " Die xBloom verwendet eine numerische Skala von ", React.createElement("strong", null, "1 (sehr fein)"), " bis ", React.createElement("strong", null, "80 (sehr grob)"), ". Für Filterkaffee bewegen sich die meisten Rezepte in einem Bereich von ca. ", React.createElement("strong", null, "400 bis 900 Mikron"), ", was auf der xBloom-Skala typischerweise Einstellungen zwischen ", React.createElement("strong", null, "30 und 65"), " entspricht."),
                              React.createElement("p", null, React.createElement("strong", null, "Hinweis:"), " Passe immer zuerst den Mahlgrad an. Eine Änderung von 1-2 Klicks in der xBloom-App kann bereits einen deutlichen Unterschied machen.")
                          ),
                          React.createElement(AccordionItem, { title: "Brühverhältnis & Wassermenge", titleClassName: "text-lg text-stone-600" },
                               React.createElement("p", null, "Das Brühverhältnis (Ratio) beschreibt das Verhältnis von Kaffeemehl zu Wasser (z.B. 1:16 bedeutet 1g Kaffee auf 16ml Wasser)."),
                              React.createElement("ul", null,
                                  React.createElement("li", null, React.createElement("strong", null, "Engeres Verhältnis (z.B. 1:14):"), " Konzentrierter, kräftigerer Kaffee mit mehr Körper. Risiko der Unterextraktion, da weniger Wasser zur Verfügung steht, um alle Aromen zu lösen."),
                                  React.createElement("li", null, React.createElement("strong", null, "Weiteres Verhältnis (z.B. 1:17):"), " Leichterer, oft klarerer Kaffee mit mehr betonten floralen oder fruchtigen Noten. Risiko der Überextraktion, da mehr Wasser mehr Aromen (auch unerwünschte) lösen kann.")
                              ),
                              React.createElement("p", null, React.createElement("strong", null, "Hinweis:"), " Die xBloom-App erlaubt die Einstellung des Verhältnisses nur in ", React.createElement("strong", null, "0.5er-Schritten"), ". Die Rezepte hier sind auf diese Limitierung abgestimmt.")
                          ),
                           React.createElement(AccordionItem, { title: "Temperatur", titleClassName: "text-lg text-stone-600" },
                              React.createElement("p", null, "Die Wassertemperatur beeinflusst, welche Verbindungen wie schnell aus dem Kaffee gelöst werden. Die xBloom App erlaubt eine gradgenaue Temperatursteuerung (bis 95°C)."),
                              React.createElement("ul", null,
                                React.createElement("li", null, React.createElement("strong", null, "Höhere Temperaturen (92-95°C):"), " Lösen Aromen schneller und effizienter, betonen Säuren und Fruchtigkeit. Ideal für hell geröstete oder dichte Bohnen. Zu heiß kann zu Bitterkeit führen."),
                                React.createElement("li", null, React.createElement("strong", null, "Niedrigere Temperaturen (88-91°C):"), " Extrahieren sanfter und langsamer, betonen Süße und Körper und reduzieren Bitterkeit. Ideal für dunklere Röstungen oder um empfindliche Aromen zu schützen.")
                              ),
                              React.createElement("p", null, React.createElement("strong", null, "Hinweis:"), " Hier meist ein fallendes Temperaturprofil. Der erste Aufguss beginnt heiß für die Extraktion der Fruchtigkeit, gefolgt von kühleren Aufgüssen, um Süße zu entwickeln und bittere Noten am Ende zu vermeiden.")
                          ),
                           React.createElement(AccordionItem, { title: "Aufgussstrategie", titleClassName: "text-lg text-stone-600" },
                              React.createElement("ul", null,
                                React.createElement("li", null, React.createElement("strong", null, "Anzahl der Aufgüsse:"), " Mehrere kleine Aufgüsse (z.B. 4-5) halten das Temperaturniveau stabiler und erlauben eine kontrolliertere Extraktion als ein einziger großer Aufguss."),
                                React.createElement("li", null, React.createElement("strong", null, "Flussgeschwindigkeit:"), " In der App einstellbar von ", React.createElement("strong", null, "3.0 bis 3.5 ml/s"), " in 0.1er-Schritten. Eine höhere Flussrate erhöht die Agitation des Kaffeebetts, was die Extraktion beschleunigt, aber auch das Risiko von Channeling erhöht. Eine niedrigere Rate ist sanfter und fördert eine gleichmäßigere Extraktion."),
                                 React.createElement("li", null, React.createElement("strong", null, "Aufgussmuster:"),
                                    React.createElement("ul", null,
                                        React.createElement("li", null, React.createElement("strong", null, "Spiralförmig:"), " Das Wasser wird in einer kontinuierlichen Spirale von innen nach außen (oder umgekehrt) verteilt. Dies sorgt für eine sehr gleichmäßige Benetzung der gesamten Oberfläche und eine moderate Agitation. Ideal für die meisten Aufgüsse."),
                                        React.createElement("li", null, React.createElement("strong", null, "Kreisförmig:"), " Das Wasser wird in konzentrischen Kreisen auf das Kaffeebett gegeben. Dies führt zu einer etwas geringeren Agitation im Vergleich zur Spirale und ist sehr gut geeignet, um das Kaffeebett sanft zu sättigen, z.B. während des Bloomings."),
                                        React.createElement("li", null, React.createElement("strong", null, "Zentral:"), " Fokussiert den Wasserstrahl in der Mitte. Minimale Agitation, ideal für den letzten Aufguss, um die Extraktion sanft ausklingen zu lassen und den Körper zu finalisieren, ohne Bitterstoffe zu extrahieren.")
                                    )
                                ),
                                React.createElement("li", null, React.createElement("strong", null, "Pausen:"), " Längere Pausen zwischen den Aufgüssen lassen das Wasser komplett durchlaufen (\"Drain Time\"), was zu mehr Klarheit führen kann. Kürzere Pausen halten das Bett gesättigter und fördern eine höhere Extraktion.")
                              )
                          ),
                          React.createElement(AccordionItem, { title: "Mahlwerk-Drehzahl & Vibration", titleClassName: "text-lg text-stone-600" },
                               React.createElement("ul", null,
                                   React.createElement("li", null, React.createElement("strong", null, "RPM (Umdrehungen pro Minute):"), " Steuert die Geschwindigkeit des Mahlwerks (60-120 RPM).",
                                      React.createElement("ul", null,
                                        React.createElement("li", null, React.createElement("strong", null, "Niedrigere RPM (60-70):"), " Produziert weniger Feinstpartikel (\"Fines\"). Das Ergebnis ist oft eine klarere, süßere Tasse mit weniger Bitterkeit, da Fines schnell überextrahieren. Empfohlen für die meisten Filterkaffees."),
                                        React.createElement("li", null, React.createElement("strong", null, "Höhere RPM (>80):"), " Kann bei sehr harten, hellen Bohnen helfen, diese effizient zu mahlen, erhöht aber das Risiko von Fines.")
                                      )
                                   ),
                                   React.createElement("li", null, React.createElement("strong", null, "Vibration:"), " Ein An/Aus-Schalter, der das Filterbett durchrüttelt.",
                                       React.createElement("ul", null,
                                           React.createElement("li", null, React.createElement("strong", null, "Vorteil:"), " Kann ein unebenes Kaffeebett nach dem Blooming einebnen."),
                                           React.createElement("li", null, React.createElement("strong", null, "Risiko:"), " Kann Feinstpartikel zum Filterboden spülen, was zu Verstopfung und ungleichmäßiger Extraktion führt."),
                                           React.createElement("li", null, React.createElement("strong", null, "Empfehlung:"), " Sehr zurückhaltend einsetzen. In den meisten Rezepten wird darauf verzichtet, um die Klarheit zu maximieren.")
                                       )
                                   )
                               )
                          )
                      )
                  ),
                  React.createElement(AccordionItem, { title: "3. Geschmackliche Feinabstimung", titleClassName: "text-xl text-stone-700 font-serif" },
                      React.createElement("p", null, "Ein Rezept ist ein optimierter Startpunkt, aber jeder Kaffee ist einzigartig. Bohnenalter, Wasserhärte und persönlicher Geschmack machen eine Feinabstimmung unerlässlich. Hier ist eine systematische Anleitung, um das Beste aus jeder Bohne herauszuholen."),
    
                      React.createElement("h4", { className: "font-serif text-lg font-semibold mt-4 mb-2 text-stone-700" }, "Schritt 1: Der Referenz-Brühvorgang"),
                      React.createElement("p", null, "Brühe den Kaffee zunächst exakt nach Rezept, um einen Geschmacks-Referenzpunkt zu erhalten. Schmecke bewusst und versuche, das Ergebnis einzuordnen."),
                      
                      React.createElement("h4", { className: "font-serif text-lg font-semibold mt-4 mb-2 text-stone-700" }, "Schritt 2: Geschmack analysieren & Problem identifizieren"),
                      React.createElement("div", { className: "grid grid-cols-1 md:grid-cols-2 gap-4 my-4" },
                          React.createElement("div", { className: "bg-stone-50 p-3 rounded-md border-l-4 border-red-400" },
                              React.createElement("strong", { className: "text-red-700" }, "Problem: Sauer / Unangenehm spitz"), React.createElement("br", null),
                              React.createElement("span", { className: "text-sm" }, "Schmeckt wie unreife Zitrone, grasig. Fühlt sich im Mund wässrig an."), React.createElement("br", null),
                              React.createElement("span", { className: "text-sm" }, React.createElement("strong", null, "Diagnose:"), " Unterextraktion.")
                          ),
                          React.createElement("div", { className: "bg-stone-50 p-3 rounded-md border-l-4 border-blue-400" },
                              React.createElement("strong", { className: "text-blue-700" }, "Problem: Bitter / Trocken / Adstringierend"), React.createElement("br", null),
                              React.createElement("span", { className: "text-sm" }, "Hinterlässt ein trockenes, pelziges Gefühl auf der Zunge (wie bei starkem Schwarztee)."), React.createElement("br", null),
                              React.createElement("span", { className: "text-sm" }, React.createElement("strong", null, "Diagnose:"), " Überextraktion.")
                          )
                      ),

                      React.createElement("h4", { className: "font-serif text-lg font-semibold mt-4 mb-2 text-stone-700" }, "Schritt 3: Anpassung der primären Variable"),
                      React.createElement("p", null, "Der Mahlgrad ist dein mächtigstes Werkzeug. Er hat den größten Einfluss auf die Extraktionszeit und damit auf das Geschmacksergebnis."),
                      React.createElement("ul", null,
                          React.createElement("li", null, React.createElement("strong", null, "Bei saurem Geschmack → feiner mahlen."), " Mache kleine Schritte (z.B. 1-2 Klicks auf der xBloom-Skala). Dadurch erhöht sich die Kontaktzeit des Wassers mit dem Kaffee und es werden mehr süße Verbindungen gelöst."),
                          React.createElement("li", null, React.createElement("strong", null, "Bei bitterem Geschmack → gröber mahlen."), " Dies verkürzt die Kontaktzeit und verhindert, dass zu viele bitter schmeckende Stoffe extrahiert werden.")
                      ),
                      React.createElement("p", null, "Wiederhole diesen Schritt, bis weder eine dominante Säure noch Bitterkeit vorhanden ist. Erst dann bist du im richtigen \"Fenster\" für die Feinabstimmung."),

                      React.createElement("h4", { className: "font-serif text-lg font-semibold mt-4 mb-2 text-stone-700" }, "Schritt 4: Feinabstimmung mit sekundären Variablen"),
                      React.createElement("p", null, "Sobald der Mahlgrad passt, kannst du den Charakter des Kaffees mit diesen Hebeln verfeinern:"),
                      React.createElement("ul", null,
                          React.createElement("li", null, React.createElement("strong", null, "Für mehr Süße und Körper:"),
                              React.createElement("ul", null,
                                  React.createElement("li", null, "Senke die Temperatur der letzten 1-2 Aufgüsse um 1-2°C."),
                                  React.createElement("li", null, "Verwende ein leicht engeres Brühverhältnis (z.B. von 1:16 auf 1:15.5).")
                              )
                          ),
                          React.createElement("li", null, React.createElement("strong", null, "Für mehr Klarheit und betonte Fruchtnoten:"),
                              React.createElement("ul", null,
                                  React.createElement("li", null, "Erhöhe die Temperatur des zweiten Aufgusses (nach dem Blooming) um 1-2°C."),
                                  React.createElement("li", null, "Verlängere die Pausenzeiten zwischen den Aufgüssen um 5-10 Sekunden, um eine bessere Trennung der Extraktionsphasen zu erreichen.")
                              )
                          )
                      ),

                      React.createElement("h4", { className: "font-serif text-lg font-semibold mt-4 mb-2 text-stone-700" }, "Spezialfall: \"Sauer und bitter zugleich\""),
                      React.createElement("p", null, "Dieser widersprüchliche Geschmack deutet fast immer auf eine ", React.createElement("strong", null, "ungleichmäßige Extraktion (Channeling)"), " hin. Das Wasser fließt durch Kanäle im Kaffeebett zu schnell (extrahiert sauer), während es an anderen Stellen fast stillsteht (extrahiert bitter). Auch wenn die xBloom dies minimiert, kannst du Folgendes versuchen:"),
                      React.createElement("ul", null,
                          React.createElement("li", null, "Mahle deutlich ", React.createElement("strong", null, "gröber"), ", um den Wasserfluss zu erleichtern."),
                          React.createElement("li", null, "Kompensiere den gröberen Mahlgrad, indem du die ", React.createElement("strong", null, "Temperatur leicht erhöhst"), " oder die Gesamt-Wassermenge etwas steigerst (z.B. von 1:16 auf 1:16.5).")
                      ),
                      
                      React.createElement("p", { className: "mt-6 border-t border-stone-200 pt-4" }, React.createElement("strong", null, "Goldene Regel:"), " Ändere immer nur ", React.createElement("strong", null, "einen Parameter"), " auf einmal und brühe erneut. Nur so kannst du die Auswirkung deiner Anpassung klar beurteilen und dich schrittweise dem perfekten Geschmack nähern.")
                  )
                ),
                
                // Controls for Search
                React.createElement("div", { className: "bg-white rounded-lg shadow-sm p-4 mb-10" },
                    React.createElement("input", {
                        type: "text",
                        placeholder: "Kaffee, Rösterei, Region oder Verarbeitung suchen...",
                        value: searchTerm,
                        onChange: (e) => setSearchTerm(e.target.value),
                        className: "w-full px-4 py-2 border border-stone-300 rounded-md focus:ring-2 focus:ring-orange-500 focus:border-orange-500 transition"
                    })
                ),

                React.createElement(CollapsibleSection, {
                  title: "Signature Coffees",
                  isOpen: isCaffeinatedOpen,
                  onToggle: () => setIsCaffeinatedOpen(!isCaffeinatedOpen)
                },
                  groupOrder.map(group => (
                    groupedCaffeinatedCoffees[group] && groupedCaffeinatedCoffees[group].length > 0 && (
                      React.createElement("div", { key: group },
                        React.createElement("h4", { className: "text-2xl font-serif text-stone-600 border-b border-stone-300 pb-2 mb-6" }, group),
                        React.createElement("div", { className: "grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-x-6 gap-y-10 mb-12" },
                          groupedCaffeinatedCoffees[group].map(coffee => (
                            React.createElement(CoffeeCard, {
                              key: coffee.id,
                              coffee: coffee,
                              onSelect: (coffee) => openModal(setSelectedCoffee, coffee)
                            })
                          ))
                        )
                      )
                    )
                  ))
                ),

                React.createElement(CollapsibleSection, {
                  title: "Decaf Selections",
                  isOpen: isDecafOpen,
                  onToggle: () => setIsDecafOpen(!isDecafOpen)
                },
                   decafCoffees.length > 0 ? 
                   React.createElement("div", { className: "grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-x-6 gap-y-10" },
                    decafCoffees.map((coffee) => (
                      React.createElement(CoffeeCard, {
                        key: coffee.id,
                        coffee: coffee,
                        onSelect: (coffee) => openModal(setSelectedCoffee, coffee)
                      })
                    ))
                  )
                  : React.createElement("p", {className: "text-stone-500 italic"}, "Keine Decaf-Kaffees gefunden, die den Kriterien entsprechen.")
                )
              ),

              selectedCoffee && (
                React.createElement(RecipeModal, {
                  coffee: selectedCoffee,
                  onClose: () => closeModal(setSelectedCoffee)
                })
              ),
              
              legalModalContentKey && (
                React.createElement(LegalModal, {
                   title: legalContent[legalModalContentKey].title,
                   content: legalContent[legalModalContentKey].content,
                   onClose: () => closeModal(setLegalModalContentKey)
                })
              ),

              showBackToTop && (
                React.createElement("button", {
                    onClick: scrollToTop,
                    className: "fixed bottom-8 right-8 bg-stone-700 text-white p-3 rounded-full shadow-lg hover:bg-stone-800 transition-all duration-300 z-30",
                    "aria-label": "Nach oben scrollen"
                }, React.createElement(ChevronUpIcon, null))
              ),
             
              React.createElement("footer", { className: "text-center mt-20 py-10 border-t border-stone-300" },
                  React.createElement("div", { className: "flex justify-center items-center space-x-4 mb-4" },
                      React.createElement("button", { onClick: () => openModal(setLegalModalContentKey, 'impressum'), className: "text-stone-500 hover:text-orange-800 text-sm transition-colors" }, "Impressum"),
                      React.createElement("span", { className: "text-stone-400" }, "|"),
                      React.createElement("button", { onClick: () => openModal(setLegalModalContentKey, 'datenschutz'), className: "text-stone-500 hover:text-orange-800 text-sm transition-colors" }, "Datenschutz")
                  ),
                React.createElement("p", { className: "text-stone-500 text-sm" },
                  `© ${new Date().getFullYear()} Leon Filla. `,
                  React.createElement("span", { className: "block sm:inline" }, " All rights reserved.")
                ),
                React.createElement("p", { className: "text-stone-400 text-xs mt-1" },
                  "Coffee recipes optimized for the xBloom Studio."
                )
              )
            )
          );
        };
        
        // Coffee Card Component
        const CoffeeCard = ({
          coffee,
          onSelect,
        }) => {
          const colorAccent = coffee.colorAccent || 'bg-orange-800';
          const textColorAccent = coffee.textColorAccent || 'text-orange-900';
          
          return (
            React.createElement("div", {
              className: "bg-white rounded-lg shadow-lg hover:shadow-xl transition-shadow duration-300 ease-in-out flex flex-col overflow-hidden border border-stone-200 group"
            },
              React.createElement("div", { className: "relative overflow-hidden" },
                React.createElement("img", {
                  src: coffee.mainImage,
                  alt: `[Bild von ${coffee.name}]`,
                  className: "w-full h-56 object-cover group-hover:scale-105 transition-transform duration-300",
                  onError: (e) => {
                    e.target.onerror = null;
                    e.target.src = "https://placehold.co/600x400/E0E0E0/9E9E9E?text=Bild+Ladefehler"; 
                  }
                })
              ),
              
              React.createElement("div", { className: "p-5 flex flex-col flex-grow" },
                React.createElement("h3", { className: `text-xl font-serif font-medium ${textColorAccent} mb-2` },
                  coffee.name
                ),
                React.createElement("p", { className: "text-stone-600 text-sm mb-4 flex-grow leading-relaxed" },
                  coffee.shortDescription
                ),
                
                 coffee.details.wertung > 0 && React.createElement("div", { className: "flex justify-center mb-4" },
                    React.createElement(StarRating, { rating: coffee.details.wertung, total: 10, colorClass: textColorAccent })
                ),
                
                React.createElement("div", { className: "space-y-2 text-xs text-stone-500 border-t border-stone-200 pt-4 mt-auto" },
                    React.createElement("p", null, React.createElement("strong", null, "Rösterei:"), " ", coffee.details.roesterei),
                    React.createElement("p", null, React.createElement("strong", null, "Produzent:"), " ", coffee.details.produzent || 'N/A'),
                    React.createElement("p", null, React.createElement("strong", null, "Region:"), " ", coffee.details.region || 'N/A'),
                    React.createElement("p", null, React.createElement("strong", null, "Sorte:"), " ", coffee.details.sorte)
                ),

                React.createElement("div", { className: "mt-5" },
                  React.createElement("button", {
                    onClick: () => onSelect(coffee),
                    className: `${colorAccent} text-white w-full py-2.5 px-4 rounded-md text-sm font-semibold hover:opacity-85 transition-opacity shadow-sm hover:shadow-md focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-orange-500 flex items-center justify-center`
                  },
                    "Rezept ansehen"
                  )
                )
              )
            )
          );
        };
        
        // Legal Modal Component
        const LegalModal = ({ title, content, onClose }) => {
            return React.createElement("div", { className: "fixed inset-0 bg-black/60 backdrop-blur-sm flex justify-center items-start py-6 sm:py-10 px-4 z-40 transition-opacity duration-300 ease-in-out overflow-y-auto", onClick: onClose },
                React.createElement("div", { className: "bg-white p-6 sm:p-8 rounded-lg shadow-2xl w-full max-w-3xl max-h-[90vh] sm:max-h-[85vh] overflow-y-auto relative font-sans text-stone-800", onClick: e => e.stopPropagation() },
                    React.createElement("button", {
                        onClick: onClose,
                        className: "absolute top-4 right-4 text-stone-400 hover:text-stone-700 text-3xl font-light transition-colors z-10 focus:outline-none focus:ring-2 focus:ring-stone-400 rounded-full",
                        "aria-label": "Schließen"
                    }, "×"),
                    React.createElement("h2", { className: "text-3xl sm:text-4xl font-serif font-medium text-orange-900 mb-6" }, title),
                    content,
                     React.createElement("div", { className: "mt-8 pt-5 border-t border-stone-200 flex justify-end" },
                        React.createElement("button", {
                            onClick: onClose,
                            className: "w-full sm:w-auto bg-stone-200 text-stone-700 py-2.5 px-8 rounded-md hover:bg-stone-300 transition-colors text-sm font-medium shadow-sm hover:shadow-md focus:outline-none focus:ring-2 focus:ring-stone-400 focus:ring-offset-2"
                        }, "Schließen")
                     )
                )
            );
        };

        // Recipe Modal Component
        const RecipeModal = ({
          coffee,
          onClose,
        }) => {
          const [copySuccess, setCopySuccess] = useState('');

          const copyToClipboard = () => {
              const recipeText = `
Rezept für: ${coffee.name} von ${coffee.details.roesterei}
--------------------------------------------------
PARAMETER:
Kaffeemenge: ${coffee.details.menge}g
Wassermenge: ${coffee.details.wasserGesamt}ml
Verhältnis: ${coffee.details.verhaeltnis}
Mahlgrad (xBloom): ${coffee.details.mahlgrad}
RPM: ${coffee.details.rpm}
Gesamtbrühzeit: ${coffee.details.gesamtBruehzeit}
--------------------------------------------------
BRÜHSCHRITTE:
${coffee.details.brewSteps.map(step => 
`  - ${step.phase}: ${step.menge}ml @ ${step.temp}°C | Fluss: ${step.durchfluss.toFixed(1)}ml/s | Pause: ${step.pause}s | Muster: ${step.muster}`
).join('\n')}
--------------------------------------------------
Anmerkungen: ${coffee.details.anmerkungenTabelle}
              `.trim();

              const textArea = document.createElement("textarea");
              textArea.value = recipeText;
              textArea.style.position = "fixed";
              textArea.style.left = "-9999px";
              document.body.appendChild(textArea);
              textArea.focus();
              textArea.select();
              try {
                  document.execCommand('copy');
                  setCopySuccess('Rezept in die Zwischenablage kopiert!');
              } catch (err) {
                  setCopySuccess('Fehler beim Kopieren.');
              }
              document.body.removeChild(textArea);

              setTimeout(() => setCopySuccess(''), 2000);
          };

          if (!coffee) return null;

          const getVibrationText = (step) => {
            if (String(step.vibVor).toLowerCase() === "ja") return 'Davor';
            if (String(step.vibNach).toLowerCase() === "ja") return 'Danach';
            return 'Nein';
          };

          const textColorAccent = coffee.textColorAccent || 'text-orange-900';
          const bgColorAccentLight = coffee.bgColorAccentLight || 'bg-orange-50';
          const borderColorAccent = coffee.borderColorAccent || 'border-orange-700';
          
          const recipeSchema = {
            "@context": "https://schema.org/",
            "@type": "Recipe",
            "name": `${coffee.name} (xBloom Rezept)`,
            "author": {
              "@type": "Person",
              "name": "Leon Filla"
            },
            "description": coffee.details.aromaProfil,
            "recipeYield": "1 Tasse",
            "totalTime": `PT${coffee.details.gesamtBruehzeit.replace(':', 'M')}S`,
            "recipeIngredient": [
              `${coffee.details.menge}g ${coffee.name} Kaffee`,
              `${coffee.details.wasserGesamt}ml Wasser`
            ],
            "recipeInstructions": coffee.details.brewSteps.map((step, index) => ({
                "@type": "HowToStep",
                "name": step.phase,
                "text": `Phase ${index + 1} (${step.phase}): Gieße ${step.menge}ml Wasser bei ${step.temp}°C mit einer Flussrate von ${step.durchfluss.toFixed(1)}ml/s. Pausiere für ${step.pause} Sekunden. Gießmuster: ${step.muster}.`
            }))
          };

          return (
            React.createElement("div", { className: "fixed inset-0 bg-black/60 backdrop-blur-sm flex justify-center items-start py-6 sm:py-10 px-4 z-40 transition-opacity duration-300 ease-in-out overflow-y-auto", onClick: onClose },
              React.createElement("div", { className: "bg-white p-0 rounded-lg shadow-2xl w-full max-w-4xl max-h-[90vh] sm:max-h-[85vh] overflow-y-auto relative font-sans text-stone-800", onClick: e => e.stopPropagation() },
                // Add structured data for SEO
                React.createElement("script", { type: "application/ld+json", dangerouslySetInnerHTML: { __html: JSON.stringify(recipeSchema) } }),

                React.createElement("button", {
                  onClick: onClose,
                  className: "absolute top-4 right-4 text-stone-400 hover:text-stone-700 text-3xl font-light transition-colors z-10 focus:outline-none focus:ring-2 focus:ring-stone-400 rounded-full",
                  "aria-label": "Schließen"
                }, "×"),
                
                React.createElement("div", { className: `p-5 sm:p-6 rounded-t-lg ${bgColorAccentLight} border-b-4 ${borderColorAccent}` },
                    React.createElement("h3", { className: "text-xl sm:text-2xl font-serif font-semibold text-stone-800" }, coffee.details.region),
                    React.createElement("p", { className: `text-sm sm:text-base font-medium ${textColorAccent}` }, coffee.details.sorte)
                ),

                React.createElement("div", { className: "p-6 sm:p-8" },
                    React.createElement("div", { className: "mb-6" },
                        React.createElement("h2", { className: `text-3xl sm:text-4xl font-serif font-medium ${textColorAccent}` },
                          coffee.name
                        ),
                        React.createElement("p", { className: "text-stone-500 text-lg" }, "von ", React.createElement("strong", null, coffee.details.roesterei)),
                         coffee.details.wertung > 0 && React.createElement("div", { className: "mt-4" },
                            React.createElement(StarRating, { rating: coffee.details.wertung, total: 10, colorClass: textColorAccent })
                        )
                    ),

                    React.createElement("div", { className: "grid grid-cols-1 md:grid-cols-2 gap-x-8 gap-y-6" },
                        React.createElement("div", null,
                            React.createElement("div", { className: `p-4 sm:p-5 rounded-md mb-6 ${bgColorAccentLight} border-l-4 ${borderColorAccent}` },
                              React.createElement("h4", { className: `text-lg font-serif font-medium ${textColorAccent} mb-1.5` }, "Aromaprofil & Zielsetzung"),
                              React.createElement("p", { className: "text-stone-700 text-sm leading-relaxed" }, coffee.details.aromaProfil)
                            ),
                            
                            React.createElement("div", { className: `p-4 sm:p-5 rounded-md ${bgColorAccentLight} border-l-4 ${borderColorAccent}` },
                              React.createElement("h4", { className: `text-lg font-serif font-medium ${textColorAccent} mb-1.5` }, "Erläuterung der Strategie"),
                              React.createElement("p", { className: "text-stone-700 text-sm leading-relaxed mb-2" }, coffee.details.aufgussStrategieText),
                              coffee.details.aufgussStrategiePunkte?.length > 0 && (
                                React.createElement("ul", { className: "list-disc list-inside text-sm text-stone-700 space-y-0.5 pl-1 leading-relaxed" },
                                  coffee.details.aufgussStrategiePunkte.map((punkt, i) => React.createElement("li", { key: i }, punkt))
                                )
                              )
                            )
                        ),

                        React.createElement("div", null,
                            React.createElement("h4", { className: `text-lg font-serif font-medium ${textColorAccent} mb-3` }, "Brühparameter (xBloom App)"),
                            React.createElement("div", { className: "mb-6 bg-stone-50 p-4 rounded-md border border-stone-200" },
                              React.createElement("div", { className: "grid grid-cols-2 sm:grid-cols-3 gap-x-4 gap-y-2 text-sm text-stone-700" },
                                React.createElement("p", null, React.createElement("strong", null, "Kaffeemenge:"), " ", coffee.details.menge, "g"),
                                React.createElement("p", null, React.createElement("strong", null, "Volumen:"), " ", coffee.details.wasserGesamt, "ml"),
                                React.createElement("p", null, React.createElement("strong", null, "Verhältnis:"), " ", coffee.details.verhaeltnis),
                                React.createElement("p", null, React.createElement("strong", null, "Mahlgrad:"), " ", coffee.details.mahlgrad),
                                React.createElement("p", null, React.createElement("strong", null, "RPM:"), " ", coffee.details.rpm),
                                React.createElement("p", null, React.createElement("strong", null, "Brühzeit:"), " ", coffee.details.gesamtBruehzeit)
                              )
                            ),
                            
                            // ### START: Responsive Brew Steps Table ###
                            React.createElement("div", { className: "w-full" },
                                // Desktop Header (hidden on mobile)
                                React.createElement("div", { className: "hidden md:grid grid-cols-9 gap-x-4 items-center p-2 text-xs text-stone-400 border-b border-stone-200" },
                                    React.createElement("p", { className: "col-span-2 font-medium" }, "Phase"),
                                    React.createElement("p", { className: "col-span-1 text-center font-medium" }, "Menge"),
                                    React.createElement("p", { className: "col-span-1 text-center font-medium" }, "Temp"),
                                    React.createElement("p", { className: "col-span-1 text-center font-medium" }, "Fluss"),
                                    React.createElement("p", { className: "col-span-1 text-center font-medium" }, "Pause"),
                                    React.createElement("p", { className: "col-span-2 text-center font-medium" }, "Muster"),
                                    React.createElement("p", { className: "col-span-1 text-center font-medium" }, "Vibration")
                                ),
                                // Brew step rows
                                React.createElement("div", { className: "space-y-2 md:space-y-0" },
                                  coffee.details.brewSteps.map((step, index) => {
                                    return (
                                      React.createElement("div", { key: index, className: "md:grid md:grid-cols-9 md:gap-x-4 md:items-center text-sm p-3 md:p-2 rounded-lg bg-stone-50 md:bg-transparent md:border-b md:border-stone-200" },
                                        // -- Desktop & Mobile: Phase --
                                        React.createElement("p", { className: `col-span-2 font-semibold ${textColorAccent} text-base md:text-sm mb-2 md:mb-0` }, step.phase),
                                        
                                        // -- Grouping for remaining items for flex layout on mobile --
                                        React.createElement("div", {className: "col-span-7 grid grid-cols-2 gap-x-6 md:grid-cols-7 md:gap-x-4 gap-y-1" },
                                            // -- Menge --
                                            React.createElement("div", { className: "md:col-span-1 flex justify-between md:block md:text-center" }, React.createElement("span", {className: "text-stone-500 md:hidden"}, "Menge"), React.createElement("span", null, `${step.menge}ml`)),
                                            // -- Temp --
                                            React.createElement("div", { className: "md:col-span-1 flex justify-between md:block md:text-center" }, React.createElement("span", {className: "text-stone-500 md:hidden"}, "Temperatur"), React.createElement("span", null, `${step.temp}°C`)),
                                            // -- Durchfluss --
                                            React.createElement("div", { className: "md:col-span-1 flex justify-between md:block md:text-center" }, React.createElement("span", {className: "text-stone-500 md:hidden"}, "Flussrate"), React.createElement("span", null, `${step.durchfluss.toFixed(1)}ml/s`)),
                                            // -- Pause --
                                            React.createElement("div", { className: "md:col-span-1 flex justify-between md:block md:text-center" }, React.createElement("span", {className: "text-stone-500 md:hidden"}, "Pause"), React.createElement("span", null, `${step.pause}s`)),
                                            // -- Muster --
                                            React.createElement("div", { className: "md:col-span-2 flex justify-between md:block md:text-center" }, React.createElement("span", {className: "text-stone-500 md:hidden"}, "Muster"), React.createElement("span", null, step.muster)),
                                            // -- Vibration --
                                            React.createElement("div", { className: "md:col-span-1 flex justify-between md:block md:text-center" }, React.createElement("span", {className: "text-stone-500 md:hidden"}, "Vibration"), React.createElement("span", { className: `font-medium ${getVibrationText(step) !== 'Nein' ? textColorAccent : 'text-stone-500'}` }, getVibrationText(step)))
                                        )
                                      )
                                    );
                                  })
                                )
                            )
                            // ### END: Responsive Brew Steps Table ###
                        )
                    ),

                    React.createElement("p", { className: "text-xs text-stone-500 mt-8 mb-6 italic text-center border-t border-stone-200 pt-4" }, "Hinweis: ", coffee.details.anmerkungenTabelle),

                    React.createElement("div", { className: "mt-8 pt-5 border-t border-stone-200 flex flex-col sm:flex-row justify-end items-center gap-4" },
                      copySuccess && React.createElement("p", { className: "text-sm text-emerald-600" }, copySuccess),
                      React.createElement("button", {
                        onClick: copyToClipboard,
                        className: `w-full sm:w-auto flex items-center justify-center gap-2 ${bgColorAccentLight} ${textColorAccent} py-2.5 px-6 rounded-md hover:opacity-80 transition-opacity text-sm font-medium shadow-sm hover:shadow-md focus:outline-none focus:ring-2 ${borderColorAccent} focus:ring-offset-2`
                      },
                        React.createElement(ClipboardCopyIcon, null),
                        "Rezept kopieren"
                      ),
                      React.createElement("button", {
                        onClick: onClose,
                        className: "w-full sm:w-auto bg-stone-200 text-stone-700 py-2.5 px-8 rounded-md hover:bg-stone-300 transition-colors text-sm font-medium shadow-sm hover:shadow-md focus:outline-none focus:ring-2 focus:ring-stone-400 focus:ring-offset-2"
                      },
                        "Schließen"
                      )
                    )
                )
              )
            )
          );
        };
        
        // Render the React app into the 'root' div.
        ReactDOM.render(React.createElement(App), document.getElementById('root'));

    </script>
</body>
</html>