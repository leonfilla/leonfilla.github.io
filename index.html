<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Eine Sammlung von Kaffee-Rezepten für die xBloom, optimiert für Süße, Körper und Klarheit, inklusive detaillierter Brüh-Guides und Alternativrezepte.">
    <meta name="author" content="Leon Filla">
    <title>Leons xBloom-Studio-Guide</title>
    
    <!-- Tailwind CSS with Typography Plugin -->
    <script src="https://cdn.tailwindcss.com?plugins=typography"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    
    <!-- React & ReactDOM Libraries (Production Version) -->
    <script src="https://unpkg.com/react@17/umd/react.production.min.js" crossorigin></script>
    <script src="https://unpkg.com/react-dom@17/umd/react-dom.production.min.js" crossorigin></script>
    
    <!-- Google Fonts: Inter (sans-serif) and Lora (serif) -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;900&family=Lora:ital,wght@0,400..700;1,400..700&display=swap" rel="stylesheet">
    
    <style>
        /* Custom font family definitions */
        body {
            font-family: 'Inter', sans-serif;
            scroll-behavior: smooth; 
        }
        .font-sans {
             font-family: 'Inter', sans-serif;
        }
        .font-serif {
            font-family: 'Lora', serif;
        }
        .grid-transition {
            display: grid;
            grid-template-rows: 0fr;
            transition: grid-template-rows 0.35s ease-in-out;
        }
        .grid-transition.open {
            grid-template-rows: 1fr;
        }
        .grid-transition > div {
            overflow: hidden;
        }
        #initial-loader {
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
        }
        .spinner {
            border: 4px solid rgba(0, 0, 0, 0.1);
            width: 36px;
            height: 36px;
            border-radius: 50%;
            border-left-color: #57534e;
            animation: spin 1s ease-in-out infinite;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        /* Styles for the Infographic Modal */
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 500px;
            margin-left: auto;
            margin-right: auto;
            height: 300px;
            max-height: 400px;
        }
        @media (min-width: 640px) {
            .chart-container {
                height: 350px;
            }
        }
        .flow-arrow::after {
            content: '→';
            font-size: 2rem;
            line-height: 1;
            color: #94d2bd;
            margin: 0 1rem;
        }
        .flow-arrow:last-child::after {
            content: '';
        }
    </style>
</head>
<body class="bg-stone-100">

    <div id="root">
        <div id="initial-loader">
            <div class="spinner"></div>
        </div>
    </div>

    <script type="text/javascript">
        const { useState, useEffect, useRef, useMemo } = React;

        // ### ICONS ###
        const ChevronDownIcon = ({ className = "w-5 h-5 text-stone-600" }) => (
          React.createElement("svg", { xmlns: "http://www.w3.org/2000/svg", fill: "none", viewBox: "0 0 24 24", strokeWidth: 1.5, stroke: "currentColor", className: className },
            React.createElement("path", { strokeLinecap: "round", strokeLinejoin: "round", d: "m19.5 8.25-7.5 7.5-7.5-7.5" })
          )
        );

        const ChevronUpIcon = ({ className = "w-6 h-6" }) => (
            React.createElement("svg", { xmlns: "http://www.w3.org/2000/svg", fill: "none", viewBox: "0 0 24 24", strokeWidth: 1.5, stroke: "currentColor", className: className },
                React.createElement("path", { strokeLinecap: "round", strokeLinejoin: "round", d: "m4.5 15.75 7.5-7.5 7.5 7.5" })
            )
        );
        
        const StarIcon = ({ className, filled = false }) => (
            React.createElement("svg", { xmlns: "http://www.w3.org/2000/svg", viewBox: "0 0 24 24", fill: filled ? 'currentColor' : 'none', stroke: "currentColor", strokeWidth: "1.5", className: className },
              React.createElement("path", { strokeLinecap: "round", strokeLinejoin: "round", d: "M11.48 3.499a.562.562 0 011.04 0l2.125 5.111a.563.563 0 00.475.345l5.518.442c.499.04.701.663.321.988l-4.204 3.602a.563.563 0 00-.182.557l1.285 5.385a.562.562 0 01-.84.61l-4.725-2.885a.563.563 0 00-.586 0L6.982 21.1a.562.562 0 01-.84-.61l1.285-5.386a.562.562 0 00-.182-.557l-4.204-3.602a.563.563 0 01.321-.988l5.518-.442a.563.563 0 00.475-.345L11.48 3.5z" })
            )
        );

        const ClipboardCopyIcon = ({ className = "w-5 h-5" }) => (
            React.createElement("svg", { xmlns: "http://www.w3.org/2000/svg", fill: "none", viewBox: "0 0 24 24", strokeWidth: 1.5, stroke: "currentColor", className: className },
                React.createElement("path", { strokeLinecap: "round", strokeLinejoin: "round", d: "M9 5H7a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V7a2 2 0 0 0-2-2h-2M9 5a2 2 0 0 0 2 2h2a2 2 0 0 0 2-2M9 5a2 2 0 0 1 2-2h2a2 2 0 0 1 2 2" })
            )
        );

        const ExternalLinkIcon = ({ className = "w-5 h-5" }) => (
            React.createElement("svg", { xmlns: "http://www.w3.org/2000/svg", fill: "none", viewBox: "0 0 24 24", strokeWidth: "1.5", stroke: "currentColor", className: className },
                React.createElement("path", { strokeLinecap: "round", strokeLinejoin: "round", d: "M13.5 6H5.25A2.25 2.25 0 003 8.25v10.5A2.25 2.25 0 005.25 21h10.5A2.25 2.25 0 0018 18.75V10.5m-4.5 0V6.375c0-.621.504-1.125 1.125-1.125h4.5c.621 0 1.125.504 1.125 1.125v4.5c0 .621-.504 1.125-1.125 1.125h-4.5A1.125 1.125 0 0110.5 10.5z" })
            )
        );

        const SparklesIcon = ({ className = "w-5 h-5" }) => (
            React.createElement("svg", { xmlns: "http://www.w3.org/2000/svg", fill: "none", viewBox: "0 0 24 24", strokeWidth: 1.5, stroke: "currentColor", className: className },
              React.createElement("path", { strokeLinecap: "round", strokeLinejoin: "round", d: "M9.813 15.904L9 18.75l-.813-2.846a4.5 4.5 0 00-3.09-3.09L2.25 12l2.846-.813a4.5 4.5 0 003.09-3.09L9 5.25l.813 2.846a4.5 4.5 0 003.09 3.09L15.75 12l-2.846.813a4.5 4.5 0 00-3.09 3.09zM18.25 12l.813-2.846a4.5 4.5 0 00-3.09-3.09L13.125 5.25l.813 2.846a4.5 4.5 0 003.09 3.09L21.75 12l-2.846.813a4.5 4.5 0 00-3.09 3.09L15.187 18.75l.813-2.846a4.5 4.5 0 003.09-3.09L21.75 12z" })
            )
        );
        
        // ### INITIAL COFFEE DATA ###
        const initialCoffeeData = [
          {id: "heilandt_kerinci",name: "Kerinci",isDecaf: false,processing: "Anaerobic & Fermented",shortDescription: "Intensive Pflaume, Nougat und eine komplexe Grapefruit-Note.",mainImage: "https://www.heilandt.de/cdn/shop/files/Micro_FL_Kerinci_m.webp",colorAccent: "bg-rose-800",textColorAccent: "text-rose-900",borderColorAccent: "border-rose-700",bgColorAccentLight: "bg-rose-50",details: {roesterei: "Heilandt",sorte: "Anaerobic Natural",region: "Indonesien, Sumatra",produzent: "Rukun Saudara Coop.",wertung: 0, buyLink: "https://www.heilandt.de/products/kerinci",
            recipes: {
                original: {title: "Originalrezept", menge: 15, verhaeltnis: "1:16.5", wasserGesamt: 248, mahlgrad: 44, rpm: 70, gesamtBruehzeit: "3:10", anmerkungenTabelle: "Fokus: Kontrolle der schnellen Extraktion, Bewahrung der komplexen Fruchtigkeit.", aufgussStrategieText: "Aufgrund der schnellen Löslichkeit wird eine sanfte Extraktionsstrategie verfolgt. Eine niedrigere Temperatur (91°C) und ein mittelgrober Mahlgrad sind entscheidend. Fünf kleine, gleichmäßige Aufgüsse sorgen für eine kontrollierte Extraktion, die die feinen Aromen schützt.", brewSteps: [{ phase: "Blooming", menge: 48, temp: 91, durchfluss: 3.1, pause: 35, muster: "Kreisförmig", vibVor: "Nein", vibNach: "Ja" },{ phase: "Aufguss 2", menge: 50, temp: 91, durchfluss: 3.1, pause: 25, muster: "Spiralförmig", vibVor: "Nein", vibNach: "Nein" },{ phase: "Aufguss 3", menge: 50, temp: 91, durchfluss: 3.1, pause: 25, muster: "Spiralförmig", vibVor: "Nein", vibNach: "Nein" },{ phase: "Aufguss 4", menge: 50, temp: 91, durchfluss: 3.1, pause: 25, muster: "Spiralförmig", vibVor: "Nein", vibNach: "Nein" },{ phase: "Aufguss 5", menge: 50, temp: 91, durchfluss: 3.1, pause: 0, muster: "Spiralförmig", vibVor: "Nein", vibNach: "Nein" },]},
                balanced: {title: "Optimiert & Ausgewogen", menge: 15.5, verhaeltnis: "1:16.0", wasserGesamt: 248, mahlgrad: 46, rpm: 60, gesamtBruehzeit: "3:15", anmerkungenTabelle: "Fokus auf Balance: Die lebhafte Grapefruit-Säure wird durch eine betonte Süße ausbalanciert, was einen saftigen, vollen Körper schafft.", aufgussStrategieText: "Dieses Rezept zielt auf eine ausgewogene Tasse ab. Ein gröberer Mahlgrad (im Vergleich zum 'Funky'-Rezept) und niedrigere RPM reduzieren Fines und fördern Klarheit. Eine leicht höhere Temperatur zu Beginn hebt die Fruchtnoten, während eine Reduzierung am Ende die Süße entwickelt und Bitterkeit vermeidet.", brewSteps: [{ phase: "Blooming", menge: 45, temp: 92, durchfluss: 3.0, pause: 45, muster: "Kreisförmig", vibVor: "Nein", vibNach: "Nein" },{ phase: "Aufguss 2", menge: 60, temp: 92, durchfluss: 3.2, pause: 30, muster: "Spiralförmig", vibVor: "Nein", vibNach: "Nein" },{ phase: "Aufguss 3", menge: 60, temp: 90, durchfluss: 3.2, pause: 30, muster: "Spiralförmig", vibVor: "Nein", vibNach: "Nein" },{ phase: "Aufguss 4", menge: 83, temp: 89, durchfluss: 3.0, pause: 0, muster: "Zentral", vibVor: "Nein", vibNach: "Nein" }]},
                alternative: {title: "Charakter-Fokus: Funky & Wild", menge: 16, verhaeltnis: "1:15.5", wasserGesamt: 248, mahlgrad: 41, rpm: 70, gesamtBruehzeit: "2:50", anmerkungenTabelle: "Dieses Rezept maximiert die 'funky' Fermentationsnoten und die intensive Pflaumensüße. Erwarte eine wilde, komplexe und weniger balancierte Tasse.", aufgussStrategieText: "Hier geht es darum, den anaeroben Charakter voll zur Geltung zu bringen. Ein feinerer Mahlgrad und höhere Temperaturen extrahieren die intensiven, funky Noten. Die kürzeren Pausen und schnellen Aufgüsse erzeugen eine hohe Konzentration und einen sirupartigen Körper, der die explosive Fruchtigkeit trägt.", brewSteps: [{ phase: "Blooming", menge: 50, temp: 94, durchfluss: 3.3, pause: 30, muster: "Spiralförmig", vibVor: "Nein", vibNach: "Ja" },{ phase: "Aufguss 2", menge: 100, temp: 93, durchfluss: 3.5, pause: 25, muster: "Kreisförmig", vibVor: "Nein", vibNach: "Nein" },{ phase: "Aufguss 3", menge: 98, temp: 91, durchfluss: 3.3, pause: 0, muster: "Zentral", vibVor: "Nein", vibNach: "Nein" }]}
            }
          }},
          {id: "heilandt_joven_macario",name: "Joven Macario",isDecaf: false,processing: "Anaerobic & Fermented",shortDescription: "Süße Traube, Orange und elegante Oolong-Tee-Noten.",mainImage: "https://www.heilandt.de/cdn/shop/files/Micro_FL_JovenMacario_m.webp",colorAccent: "bg-rose-800",textColorAccent: "text-rose-900",borderColorAccent: "border-rose-700",bgColorAccentLight: "bg-rose-50",details: {roesterei: "Heilandt",sorte: "Red Honey",region: "Mexiko, Oaxaca",produzent: "Joven Macario",wertung: 0, buyLink: "https://www.heilandt.de/products/joven-macario-filter",
            recipes: {
                original: {title: "Originalrezept", menge: 15, verhaeltnis: "1:16.5", wasserGesamt: 248, mahlgrad: 42, rpm: 80, gesamtBruehzeit: "3:29", anmerkungenTabelle: "Fokus: Ausgewogene Süße und Fruchtigkeit. Ein gutes 'Alltagsrezept'.", aufgussStrategieText: "Da dieser Kaffee als sehr verzeihend gilt, wird ein Standardrezept verwendet, das auf Konsistenz und Balance ausgelegt ist. Eine moderate Temperatur und ein mittlerer Mahlgrad sorgen für eine stetige Extraktion.", brewSteps: [{ phase: "Blooming", menge: 50, temp: 92, durchfluss: 3.2, pause: 40, muster: "Kreisförmig", vibVor: "Nein", vibNach: "Nein" },{ phase: "Aufguss 2", menge: 50, temp: 92, durchfluss: 3.2, pause: 30, muster: "Spiralförmig", vibVor: "Nein", vibNach: "Nein" },{ phase: "Aufguss 3", menge: 50, temp: 92, durchfluss: 3.2, pause: 30, muster: "Spiralförmig", vibVor: "Nein", vibNach: "Nein" },{ phase: "Aufguss 4", menge: 50, temp: 92, durchfluss: 3.2, pause: 30, muster: "Spiralförmig", vibVor: "Nein", vibNach: "Nein" },{ phase: "Aufguss 5", menge: 48, temp: 92, durchfluss: 3.2, pause: 0, muster: "Spiralförmig", vibVor: "Nein", vibNach: "Nein" }]},
                balanced: {title: "Optimiert & Ausgewogen", menge: 15.5, verhaeltnis: "1:16.0", wasserGesamt: 248, mahlgrad: 46, rpm: 70, gesamtBruehzeit: "3:20", anmerkungenTabelle: "Fokus auf Balance: Eine runde Tasse mit klarer Traubensüße, präsenter Orangen-Note und einem weichen, teeartigen Körper.", aufgussStrategieText: "Ein etwas gröberer Mahlgrad und niedrigere RPM sorgen für eine saubere Tasse. Eine stabile Temperatur von 92°C ist ideal, um die Süße der Traube und die Frucht der Orange auszubalancieren, ohne die delikaten Teearomen zu überdecken.", brewSteps: [{ phase: "Blooming", menge: 45, temp: 92, durchfluss: 3.0, pause: 40, muster: "Kreisförmig", vibVor: "Nein", vibNach: "Nein" },{ phase: "Aufguss 2", menge: 70, temp: 92, durchfluss: 3.2, pause: 30, muster: "Spiralförmig", vibVor: "Nein", vibNach: "Nein" },{ phase: "Aufguss 3", menge: 70, temp: 91, durchfluss: 3.2, pause: 30, muster: "Spiralförmig", vibVor: "Nein", vibNach: "Nein" },{ phase: "Aufguss 4", menge: 63, temp: 91, durchfluss: 3.0, pause: 0, muster: "Zentral", vibVor: "Nein", vibNach: "Nein" }]},
                alternative: {title: "Charakter-Fokus: Tee-Klarheit", menge: 15, verhaeltnis: "1:17.0", wasserGesamt: 255, mahlgrad: 55, rpm: 60, gesamtBruehzeit: "3:00", anmerkungenTabelle: "Maximiert die eleganten Oolong-Tee-Noten. Das Ergebnis ist eine sehr leichte, klare und duftende Tasse, die weniger süß und fruchtig ist.", aufgussStrategieText: "Alles ist auf Klarheit und die Betonung der delikaten Aromen ausgerichtet. Ein sehr grober Mahlgrad, niedrige RPM und eine niedrigere Temperatur von 90°C extrahieren sehr sanft. Das weite Verhältnis und die kurzen, schnellen Aufgüsse reduzieren den Körper und lassen die feinen Oolong-Noten durchscheinen.", brewSteps: [{ phase: "Blooming", menge: 50, temp: 90, durchfluss: 3.3, pause: 30, muster: "Kreisförmig", vibVor: "Nein", vibNach: "Nein" },{ phase: "Aufguss 2", menge: 105, temp: 90, durchfluss: 3.5, pause: 30, muster: "Spiralförmig", vibVor: "Nein", vibNach: "Nein" },{ phase: "Aufguss 3", menge: 100, temp: 89, durchfluss: 3.5, pause: 0, muster: "Zentral", vibVor: "Nein", vibNach: "Nein" }]}
            }
          }},
          {id: "gran_galope",name: "Gran Galope Filter",isDecaf: false,processing: "Washed",shortDescription: "Saftige Schwarzbeere, Melasse-Süße, Hauch Pampelmuse, voller Körper.",mainImage: "https://kaffeekirsche.berlin/cdn/shop/products/KK_GranGalope_250g_Filter_Square_768x768.jpg",colorAccent: "bg-amber-700",textColorAccent: "text-amber-800",borderColorAccent: "border-amber-600",bgColorAccentLight: "bg-amber-100",details: { roesterei: "Kaffeekirsche",sorte: "Washed Filter",region: "Kolumbien, Huila",produzent: "Diverse Kleinbauern",wertung: 0, buyLink: "https://kaffeekirsche.berlin/products/gran-galope-filter",
            recipes: {
              original: {title: "Originalrezept", menge: 16, verhaeltnis: "1:15.5", wasserGesamt: 248, mahlgrad: 56, rpm: 80, gesamtBruehzeit: "3:02", anmerkungenTabelle: "Fokus: Saftige Säure & Frucht, Melasse-Süße, voller Körper. Ein guter Allround-Ansatz.", aufgussStrategieText: "Eine 5-Phasen-Strategie mit fallendem Temperaturprofil. Der heiße Start extrahiert Säure und Frucht. Die folgenden vier Aufgüsse balancieren die Extraktion aus, um eine tiefe Melasse-Süße und einen vollen Körper zu entwickeln.", brewSteps: [{ phase: "Blooming", menge: 48, temp: 95, durchfluss: 3.2, pause: 30, muster: "Spiralförmig", vibVor: "Nein", vibNach: "Ja" },{ phase: "Aufguss 2", menge: 50, temp: 95, durchfluss: 3.4, pause: 25, muster: "Spiralförmig", vibVor: "Nein", vibNach: "Nein" },{ phase: "Aufguss 3", menge: 50, temp: 94, durchfluss: 3.4, pause: 25, muster: "Spiralförmig", vibVor: "Nein", vibNach: "Nein" },{ phase: "Aufguss 4", menge: 50, temp: 93, durchfluss: 3.2, pause: 25, muster: "Spiralförmig", vibVor: "Nein", vibNach: "Nein" },{ phase: "Aufguss 5", menge: 50, temp: 93, durchfluss: 3.2, pause: 0, muster: "Zentral", vibVor: "Nein", vibNach: "Nein" }]},
              balanced: {title: "Optimiert & Ausgewogen", menge: 16, verhaeltnis: "1:16.0", wasserGesamt: 256, mahlgrad: 58, rpm: 70, gesamtBruehzeit: "3:20", anmerkungenTabelle: "Fokus auf Balance: Die Schwarzbeer-Note wird klar herausgearbeitet, die Pampelmusen-Säure ist präsent, aber nicht dominant, und die Melasse-Süße bildet ein langes, befriedigendes Finish.", aufgussStrategieText: "Dieses Rezept zielt auf eine sehr runde Tasse ab. Ein etwas gröberer Mahlgrad und niedrigere RPM sorgen für mehr Klarheit und weniger Bitterkeit. Eine stabilere, aber hohe Temperatur extrahiert die Fruchtnoten, während die viergeteilte Aufgussstruktur eine gleichmäßige Entwicklung von Süße und Körper sicherstellt.", brewSteps: [{ phase: "Blooming", menge: 50, temp: 94, durchfluss: 3.1, pause: 40, muster: "Kreisförmig", vibVor: "Nein", vibNach: "Nein" },{ phase: "Aufguss 2", menge: 70, temp: 94, durchfluss: 3.3, pause: 35, muster: "Spiralförmig", vibVor: "Nein", vibNach: "Nein" },{ phase: "Aufguss 3", menge: 70, temp: 93, durchfluss: 3.3, pause: 35, muster: "Spiralförmig", vibVor: "Nein", vibNach: "Nein" },{ phase: "Aufguss 4", menge: 66, temp: 93, durchfluss: 3.1, pause: 0, muster: "Zentral", vibVor: "Nein", vibNach: "Nein" }]},
              alternative: {title: "Charakter-Fokus: Sirupartige Süße", menge: 17, verhaeltnis: "1:14.5", wasserGesamt: 247, mahlgrad: 54, rpm: 80, gesamtBruehzeit: "3:00", anmerkungenTabelle: "Dieses Rezept opfert etwas Klarheit und Fruchtigkeit, um eine unglaublich dichte, sirupartige Tasse mit maximaler Melasse-Süße zu erzeugen.", aufgussStrategieText: "Ein klassischer 'Immersion-Style'-Ansatz. Das enge Verhältnis und der feinere Mahlgrad bauen einen dichten, fast schon öligen Körper auf. Der 'Bloom' ist riesig und wird gefolgt von nur einem langen, langsamen Hauptaufguss, der alle löslichen Stoffe herauspresst. Das Ergebnis ist konzentriert, süß und hat einen massiven Körper.", brewSteps: [{ phase: "Blooming", menge: 60, temp: 92, durchfluss: 3.0, pause: 45, muster: "Kreisförmig", vibVor: "Nein", vibNach: "Ja" },{ phase: "Aufguss 2", menge: 187, temp: 92, durchfluss: 3.0, pause: 0, muster: "Spiralförmig", vibVor: "Nein", vibNach: "Nein" }]}
            }
          }},
          {id: "kenya_aa",name: "Kenya AA Top Githima",isDecaf: false,processing: "Washed",shortDescription: "Komplexer Schwarztee, Pflaume, Physalis, elegante Süße.",mainImage: "https://kaffeekirsche.berlin/cdn/shop/files/7_ae101fb5-bc47-49fa-aa70-ad0e5fce901b_768x768.png",colorAccent: "bg-amber-700",textColorAccent: "text-amber-800",borderColorAccent: "border-amber-600",bgColorAccentLight: "bg-amber-100",details: { roesterei: "Kaffeekirsche",sorte: "Washed Doppel-Fermentiert",region: "Kenia, Nyeri",produzent: "Githima Factory",wertung: 0, buyLink: "https://kaffeekirsche.berlin/collections/filter/products/kenya-aa-top-githima-1",
            recipes: {
              original: {title: "Originalrezept", menge: 16,verhaeltnis: "1:16.0",wasserGesamt: 256,mahlgrad: 61,rpm: 65,gesamtBruehzeit: "3:49", anmerkungenTabelle: "Fokus: Spritzige Säure, subtile Süße, komplexer Schwarztee-Körper. Ein sanfter Ansatz für einen hochlöslichen Kaffee.", aufgussStrategieText: "Aufgrund der hohen Löslichkeit wird eine sanfte 5-Phasen-Strategie mit einem groben Mahlgrad gewählt. Niedrigere Temperaturen und geringere Flussraten sorgen für eine schonende, gleichmäßige Extraktion, die die Klarheit bewahrt und die Komplexität voll entfaltet.", brewSteps: [{ phase: "Blooming", menge: 48, temp: 92, durchfluss: 3.0, pause: 40, muster: "Kreisförmig", vibVor: "Nein", vibNach: "Nein" },{ phase: "Aufguss 2", menge: 52, temp: 93, durchfluss: 3.1, pause: 35, muster: "Spiralförmig", vibVor: "Nein", vibNach: "Nein" },{ phase: "Aufguss 3", menge: 52, temp: 92, durchfluss: 3.1, pause: 35, muster: "Spiralförmig", vibVor: "Nein", vibNach: "Nein" },{ phase: "Aufguss 4", menge: 52, temp: 91, durchfluss: 3.0, pause: 35, muster: "Spiralförmig", vibVor: "Nein", vibNach: "Nein" },{ phase: "Aufguss 5", menge: 52, temp: 91, durchfluss: 3.0, pause: 0, muster: "Zentral", vibVor: "Nein", vibNach: "Nein" }]},
              balanced: {title: "Optimiert & Ausgewogen", menge: 16, verhaeltnis: "1:16.0", wasserGesamt: 256, mahlgrad: 62, rpm: 70, gesamtBruehzeit: "3:30", anmerkungenTabelle: "Fokus auf Balance: Eine saftige Tasse, bei der die Süße der Pflaume die helle Physalis-Säure ausbalanciert und der Schwarztee-Körper elegant, nicht adstringierend ist.", aufgussStrategieText: "Dieses Rezept zielt darauf ab, die klassische kenianische Säure zu zähmen und in Süße zu verwandeln. Ein grober Mahlgrad, eine hohe Starttemperatur von 94°C extrahiert die Fruchtnoten, gefolgt von einem deutlichen Temperatursprung nach unten, um die Süße zu entwickeln und die Extraktion der Tannine (Schwarztee-Note) zu kontrollieren.", brewSteps: [{ phase: "Blooming", menge: 50, temp: 94, durchfluss: 3.1, pause: 40, muster: "Kreisförmig", vibVor: "Nein", vibNach: "Nein" },{ phase: "Aufguss 2", menge: 70, temp: 94, durchfluss: 3.3, pause: 30, muster: "Spiralförmig", vibVor: "Nein", vibNach: "Nein" },{ phase: "Aufguss 3", menge: 70, temp: 90, durchfluss: 3.3, pause: 30, muster: "Spiralförmig", vibVor: "Nein", vibNach: "Nein" },{ phase: "Aufguss 4", menge: 66, temp: 89, durchfluss: 3.1, pause: 0, muster: "Zentral", vibVor: "Nein", vibNach: "Nein" }]},
              alternative: {title: "Charakter-Fokus: Helle Säure", menge: 15.5, verhaeltnis: "1:16.5", wasserGesamt: 256, mahlgrad: 63, rpm: 80, gesamtBruehzeit: "3:10", anmerkungenTabelle: "Dieses Rezept maximiert die helle, spritzige Säure von Physalis und die Komplexität des Schwarztees. Erwarte eine weniger süße, aber extrem lebendige und klare Tasse.", aufgussStrategieText: "Voller Fokus auf die 'larger-than-life' Säure. Ein sehr grober Mahlgrad und eine durchgehend hohe Temperatur (95°C) mit aggressiveren, schnellen Güssen extrahieren die Fruchtsäuren maximal und schnell, bevor sich viel Süße entwickeln kann. Das Ergebnis ist eine vibrierende, fast schon prickelnde Tasse.", brewSteps: [{ phase: "Blooming", menge: 50, temp: 95, durchfluss: 3.4, pause: 30, muster: "Spiralförmig", vibVor: "Nein", vibNach: "Nein" },{ phase: "Aufguss 2", menge: 105, temp: 95, durchfluss: 3.5, pause: 30, muster: "Spiralförmig", vibVor: "Nein", vibNach: "Nein" },{ phase: "Aufguss 3", menge: 101, temp: 95, durchfluss: 3.3, pause: 0, muster: "Zentral", vibVor: "Nein", vibNach: "Nein" }]}
            }
          }},
          {id: "uraga",name: "Uraga Raro Boda",isDecaf: false,processing: "Natural",shortDescription: "Intensive rote Beeren, floraler Jasmin, voller Körper & ausgeprägte Süße.",mainImage: "https://kaffeekirsche.berlin/cdn/shop/files/EthiopiaUraga_768x768.png",colorAccent: "bg-orange-800",textColorAccent: "text-orange-900",borderColorAccent: "border-orange-700",bgColorAccentLight: "bg-orange-50",details: { roesterei: "Kaffeekirsche",sorte: "Natural Omniroast",region: "Äthiopien, Guji",produzent: "Uraga Raro Boda",wertung: 0, buyLink: "https://kaffeekirsche.berlin/products/uraga-raro-boda",
            recipes: {
              original: {title: "Originalrezept", menge: 16,verhaeltnis: "1:16.0",wasserGesamt: 256,mahlgrad: 59, rpm: 70, gesamtBruehzeit: "3:32",anmerkungenTabelle: "Fokus: Schutz der Jasminnote, Betonung von intensiver Frucht & ausgeprägter Süße.", aufgussStrategieText: "Eine 5-Phasen-Strategie mit fallendem Temperaturprofil und einem mittelgroben Mahlgrad. Dies sorgt für eine gleichmäßige Extraktion, die die delikaten floralen und fruchtigen Noten schützt und gleichzeitig eine ausgeprägte Süße und einen vollen Körper entwickelt.", brewSteps: [{ phase: "Blooming", menge: 48, temp: 92, durchfluss: 3.0, pause: 40, muster: "Spiralförmig", vibVor: "Nein", vibNach: "Nein" },{ phase: "Aufguss 2", menge: 52, temp: 93, durchfluss: 3.2, pause: 30, muster: "Spiralförmig", vibVor: "Nein", vibNach: "Nein" },{ phase: "Aufguss 3", menge: 52, temp: 93, durchfluss: 3.2, pause: 30, muster: "Spiralförmig", vibVor: "Nein", vibNach: "Nein" },{ phase: "Aufguss 4", menge: 52, temp: 92, durchfluss: 3.0, pause: 30, muster: "Kreisförmig", vibVor: "Nein", vibNach: "Nein" },{ phase: "Aufguss 5", menge: 52, temp: 90, durchfluss: 3.0, pause: 0, muster: "Zentral", vibVor: "Nein", vibNach: "Nein" }]},
              balanced: {title: "Optimiert & Ausgewogen", menge: 15.5, verhaeltnis: "1:16.5", wasserGesamt: 256, mahlgrad: 62, rpm: 60, gesamtBruehzeit: "3:45", anmerkungenTabelle: "Fokus auf Balance: Die floralen Jasmin-Noten stehen im Vordergrund, unterstützt von einer klaren Erdbeer-Fruchtigkeit und einem seidigen, aber nicht schweren Körper.", aufgussStrategieText: "Für die ultimative Balance wird hier alles auf Klarheit gesetzt. Sehr niedrige RPM und ein grober Mahlgrad minimieren Fines. Eine sehr niedrige und konstante Temperatur (90°C) schützt die flüchtigen floralen Aromen. Die langen Pausen und die 5-Puls-Struktur extrahieren sehr sanft, was zu einer eleganten, tee-ähnlichen Tasse führt.", brewSteps: [{ phase: "Blooming", menge: 45, temp: 90, durchfluss: 3.0, pause: 45, muster: "Kreisförmig", vibVor: "Nein", vibNach: "Nein" },{ phase: "Aufguss 2", menge: 55, temp: 90, durchfluss: 3.0, pause: 40, muster: "Kreisförmig", vibVor: "Nein", vibNach: "Nein" },{ phase: "Aufguss 3", menge: 55, temp: 90, durchfluss: 3.0, pause: 40, muster: "Spiralförmig", vibVor: "Nein", vibNach: "Nein" },{ phase: "Aufguss 4", menge: 55, temp: 90, durchfluss: 3.0, pause: 40, muster: "Spiralförmig", vibVor: "Nein", vibNach: "Nein" },{ phase: "Aufguss 5", menge: 46, temp: 90, durchfluss: 3.0, pause: 0, muster: "Zentral", vibVor: "Nein", vibNach: "Nein" }]},
              alternative: {title: "Charakter-Fokus: Fruchtbombe", menge: 16, verhaeltnis: "1:15.0", wasserGesamt: 240, mahlgrad: 55, rpm: 80, gesamtBruehzeit: "2:40", anmerkungenTabelle: "Dieses Rezept ignoriert die floralen Noten und zielt auf eine explosive, marmeladige Fruchtigkeit von roten Beeren mit einem schweren, süßen Körper ab.", aufgussStrategieText: "Maximale Fruchtextraktion. Ein feinerer Mahlgrad und höhere RPM erzeugen mehr Oberfläche. Eine hohe Temperatur von 95°C löst die Fruchtsäuren schnell und effizient. Die aggressive Gießstrategie mit nur zwei großen Güssen sorgt für viel Agitation und eine schnelle, intensive Extraktion. Das Ergebnis ist eine kraftvolle, süße 'Fruchtbombe'.", brewSteps: [{ phase: "Blooming", menge: 50, temp: 95, durchfluss: 3.5, pause: 30, muster: "Spiralförmig", vibVor: "Nein", vibNach: "Ja" },{ phase: "Aufguss 2", menge: 100, temp: 95, durchfluss: 3.5, pause: 30, muster: "Spiralförmig", vibVor: "Nein", vibNach: "Nein" },{ phase: "Aufguss 3", menge: 90, temp: 94, durchfluss: 3.3, pause: 0, muster: "Zentral", vibVor: "Nein", vibNach: "Nein" }]}
            }
          }},
          { id: "ruronzi_anaerobic_elbgold",name: "Ruronzi Anaerobic",isDecaf: false,processing: "Anaerobic & Fermented",shortDescription: "Intensive Kirsche, Ananas, komplexe Rum-Noten, saftiger Körper.",mainImage: "https://img.versacommerce.io/resize=grande/canvas=0/++/assets.versacommerce.de/images/7466d2805db4649f6f9fccd2dc422ddd6d34ab0c.jpg",colorAccent: "bg-rose-800",textColorAccent: "text-rose-900",borderColorAccent: "border-rose-700",bgColorAccentLight: "bg-rose-50",details: { roesterei: "elbgold",sorte: "120h Anaerobic Natural", region: "Ruanda, Karongi", produzent: "Uzziel Habimana", wertung: 0, buyLink: "https://www.elbgoldshop.com/products/ruronzi-anaerobic-250g-natural-120h-anaerobic-fermentation",
            recipes: {
              original: {title: "Originalrezept", menge: 16,verhaeltnis: "1:16.5",wasserGesamt: 264,mahlgrad: 60, rpm: 60, gesamtBruehzeit: "3:57", anmerkungenTabelle: "Fokus: Entfaltung der Fruchtigkeit & Rum-Note mit höchster Klarheit.", aufgussStrategieText: "Eine besonders behutsame 5-Phasen-Strategie mit einem groben Mahlgrad, um die intensiven und flüchtigen Aromen zu schützen. Vier kleine Hauptaufgüsse mit fallender Temperatur und sehr niedrige RPM sind essenziell, um die Klarheit zu maximieren und die komplexen Fermentationsnoten nicht zu überdecken.", brewSteps: [{ phase: "Blooming", menge: 48, temp: 93, durchfluss: 3.0, pause: 45, muster: "Spiralförmig", vibVor: "Nein", vibNach: "Nein" },{ phase: "Aufguss 2", menge: 54, temp: 92, durchfluss: 3.1, pause: 35, muster: "Spiralförmig", vibVor: "Nein", vibNach: "Nein" },{ phase: "Aufguss 3", menge: 54, temp: 90, durchfluss: 3.0, pause: 35, muster: "Kreisförmig", vibVor: "Nein", vibNach: "Nein" },{ phase: "Aufguss 4", menge: 54, temp: 88, durchfluss: 3.0, pause: 35, muster: "Kreisförmig", vibVor: "Nein", vibNach: "Nein" },{ phase: "Aufguss 5", menge: 54, temp: 88, durchfluss: 3.0, pause: 0, muster: "Zentral", vibVor: "Nein", vibNach: "Nein" }]},
              balanced: {title: "Optimiert & Ausgewogen", menge: 16, verhaeltnis: "1:16.5", wasserGesamt: 264, mahlgrad: 62, rpm: 60, gesamtBruehzeit: "4:00", anmerkungenTabelle: "Fokus auf Balance: Eine saftige Tasse, die die tropische Ananas-Süße mit der tiefen Rum-Note balanciert, ohne dass die Fermentation übermächtig wird.", aufgussStrategieText: "Dieses Rezept zähmt die wilde Fermentation ein wenig, um eine ausgewogenere Tasse zu erhalten. Ein noch gröberer Mahlgrad und die Beibehaltung der niedrigen RPM fördern die Klarheit. Ein sanftes, fallendes Temperaturprofil (92°C auf 88°C) sorgt für eine schonende Extraktion, die die Süße betont.", brewSteps: [{ phase: "Blooming", menge: 50, temp: 92, durchfluss: 3.0, pause: 45, muster: "Kreisförmig", vibVor: "Nein", vibNach: "Nein" },{ phase: "Aufguss 2", menge: 70, temp: 91, durchfluss: 3.1, pause: 40, muster: "Spiralförmig", vibVor: "Nein", vibNach: "Nein" },{ phase: "Aufguss 3", menge: 70, temp: 89, durchfluss: 3.1, pause: 40, muster: "Spiralförmig", vibVor: "Nein", vibNach: "Nein" },{ phase: "Aufguss 4", menge: 74, temp: 88, durchfluss: 3.0, pause: 0, muster: "Zentral", vibVor: "Nein", vibNach: "Nein" }]},
              alternative: {title: "Charakter-Fokus: Ananas-Rum-Bombe", menge: 16.5, verhaeltnis: "1:15.5", wasserGesamt: 256, mahlgrad: 58, rpm: 70, gesamtBruehzeit: "3:15", anmerkungenTabelle: "Maximale Intensität. Dieses Rezept holt die volle Wucht der anaeroben Fermentation heraus. Erwarte eine explosive, an Rum und überreifer Ananas erinnernde Tasse.", aufgussStrategieText: "Volle Kraft voraus. Ein feinerer Mahlgrad und eine höhere Temperatur (94°C) extrahieren aggressiv die intensiven Fermentationsaromen. Kürzere Pausen und nur drei Aufgüsse schaffen eine hohe Konzentration und einen schweren, sirupartigen Körper, der die 'boozy' Noten trägt.", brewSteps: [{ phase: "Blooming", menge: 55, temp: 94, durchfluss: 3.3, pause: 35, muster: "Spiralförmig", vibVor: "Nein", vibNach: "Ja" },{ phase: "Aufguss 2", menge: 100, temp: 93, durchfluss: 3.4, pause: 30, muster: "Kreisförmig", vibVor: "Nein", vibNach: "Nein" },{ phase: "Aufguss 3", menge: 101, temp: 92, durchfluss: 3.2, pause: 0, muster: "Zentral", vibVor: "Nein", vibNach: "Nein" }]}
            }
          }},
          {id: "huye_mountain_elbgold",name: "Huye Mountain",isDecaf: false,processing: "Natural",shortDescription: "Weisse Nektarine, Kakaonibs, Preiselbeere, ausgeprägte Fruchtsüße.",mainImage: "https://img.versacommerce.io/resize=grande/canvas=0/++/assets.versacommerce.de/images/ea51682f86a5e8bb2da4a15b8c64bd472f078c19.jpg",colorAccent: "bg-orange-800",textColorAccent: "text-orange-900",borderColorAccent: "border-orange-700",bgColorAccentLight: "bg-orange-50",details: {roesterei: "elbgold",sorte: "Red Bourbon (Natural)",region: "Ruanda, Huye District", produzent: "David Rubanzangabo", wertung: 0, buyLink: "https://www.elbgoldshop.com/products/huye-mountain-250g-filterkaffee",
            recipes: {
              original: {title: "Originalrezept", menge: 16,verhaeltnis: "1:16.0",wasserGesamt: 256,mahlgrad: 57,rpm: 60,gesamtBruehzeit: "3:39", anmerkungenTabelle: "Fokus: Fruchtige Süße und Kakaonibs-Noten. Ein sehr sanfter Ansatz.", aufgussStrategieText: "Die 5-Phasen-Strategie mit einem mittelgroben Mahlgrad fokussiert auf eine sanfte Extraktion, um die delikaten Fruchtnoten zu bewahren. Niedrigere Temperaturen und Mahlwerk-RPMs (60) helfen, Überextraktion zu vermeiden und die Klarheit zu fördern.", brewSteps: [ { phase: "Blooming", menge: 48, temp: 91, durchfluss: 3.0, pause: 45, muster: "Kreisförmig", vibVor: "Nein", vibNach: "Nein" }, { phase: "Aufguss 2", menge: 52, temp: 92, durchfluss: 3.0, pause: 30, muster: "Spiralförmig", vibVor: "Nein", vibNach: "Nein" }, { phase: "Aufguss 3", menge: 52, temp: 90, durchfluss: 3.0, pause: 30, muster: "Kreisförmig", vibVor: "Nein", vibNach: "Nein" }, { phase: "Aufguss 4", menge: 52, temp: 88, durchfluss: 3.0, pause: 30, muster: "Kreisförmig", vibVor: "Nein", vibNach: "Nein" }, { phase: "Aufguss 5", menge: 52, temp: 88, durchfluss: 3.0, pause: 0, muster: "Zentral", vibVor: "Nein", vibNach: "Nein" }]},
              balanced: {title: "Optimiert & Ausgewogen", menge: 16, verhaeltnis: "1:16.0", wasserGesamt: 256, mahlgrad: 59, rpm: 70, gesamtBruehzeit: "3:30", anmerkungenTabelle: "Fokus auf Balance: Eine schokoladige Tasse mit klarer Nektarinen-Süße und einem Hauch Preiselbeer-Säure im Abgang. Sehr rund und zugänglich.", aufgussStrategieText: "Dieses Rezept zielt darauf ab, die Kakaonibs-Note als Basis zu nutzen und die Fruchtigkeit darauf aufzubauen. Ein etwas gröberer Mahlgrad, eine moderate, stabile Temperatur von 92°C und eine 4-Puls-Struktur bieten eine gute Balance zwischen Klarheit und Körper.", brewSteps: [{ phase: "Blooming", menge: 50, temp: 92, durchfluss: 3.0, pause: 40, muster: "Kreisförmig", vibVor: "Nein", vibNach: "Nein" },{ phase: "Aufguss 2", menge: 70, temp: 92, durchfluss: 3.2, pause: 30, muster: "Spiralförmig", vibVor: "Nein", vibNach: "Nein" },{ phase: "Aufguss 3", menge: 70, temp: 91, durchfluss: 3.2, pause: 30, muster: "Spiralförmig", vibVor: "Nein", vibNach: "Nein" },{ phase: "Aufguss 4", menge: 66, temp: 90, durchfluss: 3.0, pause: 0, muster: "Zentral", vibVor: "Nein", vibNach: "Nein" }]},
              alternative: {title: "Charakter-Fokus: Saftige Nektarine", menge: 15.5, verhaeltnis: "1:16.5", wasserGesamt: 256, mahlgrad: 62, rpm: 60, gesamtBruehzeit: "3:15", anmerkungenTabelle: "Maximiert die saftige Fruchtigkeit der weißen Nektarine und die Säure der Preiselbeere. Die Kakaonibs-Note tritt in den Hintergrund.", aufgussStrategieText: "Um die Frucht zu betonen, wird ein grober Mahlgrad und eine höhere Starttemperatur verwendet, um die Säuren schnell zu extrahieren. Lange Pausen zwischen den Güssen lassen das Wasser komplett durchlaufen, was den Körper reduziert und die Klarheit der Fruchtnoten erhöht.", brewSteps: [{ phase: "Blooming", menge: 50, temp: 93, durchfluss: 3.2, pause: 45, muster: "Kreisförmig", vibVor: "Nein", vibNach: "Nein" },{ phase: "Aufguss 2", menge: 70, temp: 93, durchfluss: 3.3, pause: 40, muster: "Spiralförmig", vibVor: "Nein", vibNach: "Nein" },{ phase: "Aufguss 3", menge: 70, temp: 92, durchfluss: 3.3, pause: 40, muster: "Spiralförmig", vibVor: "Nein", vibNach: "Nein" },{ phase: "Aufguss 4", menge: 66, temp: 90, durchfluss: 3.1, pause: 0, muster: "Zentral", vibVor: "Nein", vibNach: "Nein" }]}
            }
          }},
           {id: "heilandt_24_sieben_decaf",name: "24/sieben Decaf",isDecaf: true,processing: "Decaf",shortDescription: "Noten von Kirsche und Brownie in einer klaren Filterröstung.",mainImage: "https://www.heilandt.de/cdn/shop/files/FL_24_sieben_m.webp",colorAccent: "bg-stone-700",textColorAccent: "text-stone-800",borderColorAccent: "border-stone-600",bgColorAccentLight: "bg-stone-200",details: {roesterei: "Heilandt",sorte: "Mountain Water Decaf",region: "Mexiko, Oaxaca",produzent: "Diverse Kleinbauern",wertung: 0, buyLink: "https://www.heilandt.de/products/24-sieben-decaf-filter",
            recipes: {
              original: {title: "Originalrezept", menge: 16,verhaeltnis: "1:15.5",wasserGesamt: 248,mahlgrad: 34,rpm: 60,gesamtBruehzeit: "3:16",anmerkungenTabelle: "Fokus: Maximale Süße & Körper. Ein guter Startpunkt für einen Decaf.", aufgussStrategieText: "Eine 5-Phasen-Strategie für maximale Kontrolle. Die leicht höhere Temperatur extrahiert die Aromen aus den dichteren Decaf-Bohnen, während ein relativ feiner Mahlgrad eine gleichmäßige Extraktion für vollen Körper und klare Süße sichert.", brewSteps: [{ phase: "Blooming", menge: 48, temp: 93, durchfluss: 3.0, pause: 40, muster: "Kreisförmig", vibVor: "Nein", vibNach: "Nein" },{ phase: "Aufguss 2", menge: 50, temp: 93, durchfluss: 3.1, pause: 25, muster: "Spiralförmig", vibVor: "Nein", vibNach: "Nein" },{ phase: "Aufguss 3", menge: 50, temp: 93, durchfluss: 3.1, pause: 25, muster: "Spiralförmig", vibVor: "Nein", vibNach: "Nein" },{ phase: "Aufguss 4", menge: 50, temp: 92, durchfluss: 3.1, pause: 25, muster: "Spiralförmig", vibVor: "Nein", vibNach: "Nein" },{ phase: "Aufguss 5", menge: 50, temp: 92, durchfluss: 3.0, pause: 0, muster: "Zentral", vibVor: "Nein", vibNach: "Nein" }]},
              balanced: {title: "Optimiert & Ausgewogen", menge: 16, verhaeltnis: "1:15.5", wasserGesamt: 248, mahlgrad: 36, rpm: 60, gesamtBruehzeit: "3:10", anmerkungenTabelle: "Fokus auf Balance: Eine Tasse, die an einen saftigen Kirsch-Brownie erinnert. Klare Frucht und tiefe Schokoladensüße.", aufgussStrategieText: "Decaf-Bohnen sind oft brüchiger. Dieses Rezept nutzt einen etwas gröberen Mahlgrad als das Original, um 'Fines' und eine mögliche Bitterkeit zu reduzieren. Eine stabile, hohe Temperatur von 93°C hilft, die Dichte der Bohne zu durchdringen und die Süße zu maximieren.", brewSteps: [{ phase: "Blooming", menge: 50, temp: 93, durchfluss: 3.0, pause: 40, muster: "Kreisförmig", vibVor: "Nein", vibNach: "Nein" },{ phase: "Aufguss 2", menge: 65, temp: 93, durchfluss: 3.2, pause: 30, muster: "Spiralförmig", vibVor: "Nein", vibNach: "Nein" },{ phase: "Aufguss 3", menge: 65, temp: 93, durchfluss: 3.2, pause: 30, muster: "Spiralförmig", vibVor: "Nein", vibNach: "Nein" },{ phase: "Aufguss 4", menge: 68, temp: 92, durchfluss: 3.0, pause: 0, muster: "Zentral", vibVor: "Nein", vibNach: "Nein" }]},
              alternative: {title: "Charakter-Fokus: Maximaler Brownie", menge: 16.5, verhaeltnis: "1:15.0", wasserGesamt: 248, mahlgrad: 32, rpm: 70, gesamtBruehzeit: "2:55", anmerkungenTabelle: "Dieses Rezept opfert die Kirsch-Note für einen unglaublich dichten, schokoladigen und süßen Brownie-Geschmack.", aufgussStrategieText: "Fokus auf Körper und Schokolade. Ein feinerer Mahlgrad und ein engeres Verhältnis bauen einen schweren Körper auf. Eine etwas niedrigere Temperatur (91°C) reduziert die Säure (Kirsche) und betont die tiefen Schokoladennoten. Nur zwei große Aufgüsse sorgen für eine intensive Extraktion und ein sirupartiges Mundgefühl.", brewSteps: [{ phase: "Blooming", menge: 60, temp: 91, durchfluss: 3.0, pause: 45, muster: "Kreisförmig", vibVor: "Nein", vibNach: "Ja" },{ phase: "Aufguss 2", menge: 188, temp: 91, durchfluss: 3.2, pause: 0, muster: "Spiralförmig", vibVor: "Nein", vibNach: "Nein" }]}
            }
          }},
          {id: "popayan_decaf",name: "Popayan Reserve Decaf",isDecaf: true,processing: "Decaf",shortDescription: "Süßes Zuckerrohr, Kakaonibs, Bergpfirsich, präsente Süße.",mainImage: "https://kaffeekirsche.berlin/cdn/shop/files/KK_Popayan-Decaf_Square_768x768.jpg",colorAccent: "bg-stone-700",textColorAccent: "text-stone-800",borderColorAccent: "border-stone-600",bgColorAccentLight: "bg-stone-200",details: { roesterei: "Kaffeekirsche",sorte: "E.A. Decaf",region: "Kolumbien, Popayan",produzent: "Diverse Kleinbauern",wertung: 0, buyLink: "https://kaffeekirsche.berlin/products/popayan-reserve-decaf",
            recipes: {
              original: {title: "Originalrezept", menge: 16,verhaeltnis: "1:15.0",wasserGesamt: 240,mahlgrad: 40,rpm: 60,gesamtBruehzeit: "2:44",anmerkungenTabelle: "Fokus: Maximale Süße & fruchtiger Körper. Ein Rezept für mehr Gleichmäßigkeit und Temperaturstabilität.", aufgussStrategieText: "Eine sanfte 4-Phasen-Puls-Strategie mit einem feinen Mahlgrad. Statt eines großen Aufgusses sorgen drei kleinere Hauptaufgüsse für eine bessere Temperaturstabilität und gleichmäßigere Extraktion. Dies maximiert die Süße, ohne durch Agitation Bitterkeit zu provozieren.", brewSteps: [{ phase: "Blooming", menge: 48, temp: 93, durchfluss: 3.0, pause: 35, muster: "Kreisförmig", vibVor: "Nein", vibNach: "Nein" },{ phase: "Aufguss 2", menge: 64, temp: 93, durchfluss: 3.0, pause: 25, muster: "Spiralförmig", vibVor: "Nein", vibNach: "Nein" },{ phase: "Aufguss 3", menge: 64, temp: 93, durchfluss: 3.0, pause: 25, muster: "Spiralförmig", vibVor: "Nein", vibNach: "Nein" },{ phase: "Aufguss 4", menge: 64, temp: 92, durchfluss: 3.0, pause: 0, muster: "Zentral", vibVor: "Nein", vibNach: "Nein" }]},
              balanced: {title: "Optimiert & Ausgewogen", menge: 16, verhaeltnis: "1:15.5", wasserGesamt: 248, mahlgrad: 42, rpm: 60, gesamtBruehzeit: "3:05", anmerkungenTabelle: "Fokus auf Balance: Eine süße Tasse mit klaren Noten von Zuckerrohr und Bergpfirsich und einem angenehmen Kakaonibs-Finish.", aufgussStrategieText: "Der E.A. Prozess bewahrt viel von der ursprünglichen Fruchtigkeit. Dieses Rezept zielt darauf ab, diese zu schützen. Ein etwas gröberer Mahlgrad als im Original und ein leicht weiteres Verhältnis reduzieren die Intensität und fördern die Klarheit.", brewSteps: [{ phase: "Blooming", menge: 50, temp: 93, durchfluss: 3.0, pause: 40, muster: "Kreisförmig", vibVor: "Nein", vibNach: "Nein" },{ phase: "Aufguss 2", menge: 66, temp: 93, durchfluss: 3.1, pause: 30, muster: "Spiralförmig", vibVor: "Nein", vibNach: "Nein" },{ phase: "Aufguss 3", menge: 66, temp: 93, durchfluss: 3.1, pause: 30, muster: "Spiralförmig", vibVor: "Nein", vibNach: "Nein" },{ phase: "Aufguss 4", menge: 66, temp: 92, durchfluss: 3.0, pause: 0, muster: "Zentral", vibVor: "Nein", vibNach: "Nein" }]},
              alternative: {title: "Charakter-Fokus: Pfirsich Eistee", menge: 15.5, verhaeltnis: "1:16.5", wasserGesamt: 256, mahlgrad: 45, rpm: 70, gesamtBruehzeit: "2:50", anmerkungenTabelle: "Dieses Rezept maximiert die erfrischende Bergpfirsich-Note und erzeugt eine leichte, tee-ähnliche Tasse.", aufgussStrategieText: "Um die delikate Pfirsich-Note zu betonen, wird alles auf Leichtigkeit und Klarheit gesetzt. Ein grober Mahlgrad, ein weites Verhältnis und eine niedrigere Temperatur von 91°C extrahieren sehr sanft. Schnelle Güssen reduzieren den Körper und lassen die Frucht durchscheinen.", brewSteps: [{ phase: "Blooming", menge: 50, temp: 91, durchfluss: 3.3, pause: 30, muster: "Kreisförmig", vibVor: "Nein", vibNach: "Nein" },{ phase: "Aufguss 2", menge: 105, temp: 91, durchfluss: 3.4, pause: 25, muster: "Spiralförmig", vibVor: "Nein", vibNach: "Nein" },{ phase: "Aufguss 3", menge: 101, temp: 90, durchfluss: 3.2, pause: 0, muster: "Zentral", vibVor: "Nein", vibNach: "Nein" }]}
            }
          }},
          {id: "kijani_kiboko_decaf",name: "Kijani Kiboko Decaf",isDecaf: true,processing: "Decaf",shortDescription: "Johannisbeere, Grapefruit, dunkle Trauben, seidiges Mundgefühl.",mainImage: "https://19grams.coffee/cdn/shop/files/Kijani_Filter.webp",colorAccent: "bg-stone-700",textColorAccent: "text-stone-800",borderColorAccent: "border-stone-600",bgColorAccentLight: "bg-stone-200",details: { roesterei: "19grams",sorte: "CO₂ Decaf Filter",region: "Kenia",produzent: "Diverse Kooperativen",wertung: 0, buyLink: "https://19grams.coffee/products/kijani-kiboko-entkoffeinierter-kolumbien-filter",
            recipes: {
              original: {title: "Originalrezept", menge: 16,verhaeltnis: "1:15.5",wasserGesamt: 248,mahlgrad: 38,rpm: 60,gesamtBruehzeit: "3:26",anmerkungenTabelle: "Fokus: Klare Kenia-Frucht, Süße & seidiges Mundgefühl. Ein guter Startpunkt.", aufgussStrategieText: "Eine sanfte 5-Phasen-Extraktion wird angestrebt. Ein relativ feiner Mahlgrad und niedrigste RPM (60) sorgen für eine schonende Behandlung. Auf Vibration wird verzichtet, um die feinen Aromen und die Klarheit zu bewahren.", brewSteps: [{ phase: "Blooming", menge: 48, temp: 92, durchfluss: 3.0, pause: 35, muster: "Kreisförmig", vibVor: "Nein", vibNach: "Nein" },{ phase: "Aufguss 2", menge: 50, temp: 93, durchfluss: 3.1, pause: 30, muster: "Spiralförmig", vibVor: "Nein", vibNach: "Nein" },{ phase: "Aufguss 3", menge: 50, temp: 92, durchfluss: 3.1, pause: 30, muster: "Spiralförmig", vibVor: "Nein", vibNach: "Nein" },{ phase: "Aufguss 4", menge: 50, temp: 92, durchfluss: 3.1, pause: 30, muster: "Spiralförmig", vibVor: "Nein", vibNach: "Nein" },{ phase: "Aufguss 5", menge: 50, temp: 91, durchfluss: 3.0, pause: 0, muster: "Zentral", vibVor: "Nein", vibNach: "Nein" }]},
              balanced: {title: "Optimiert & Ausgewogen", menge: 16, verhaeltnis: "1:15.5", wasserGesamt: 248, mahlgrad: 40, rpm: 60, gesamtBruehzeit: "3:20", anmerkungenTabelle: "Fokus auf Balance: Eine Tasse, die die helle Grapefruit-Säure mit der tiefen Süße von dunklen Trauben und Johannisbeeren verbindet. Seidig und komplex.", aufgussStrategieText: "Ein Kenia-Decaf ist eine Herausforderung. Wir brauchen eine genug hohe Temperatur (94°C), um die typische Säure zu extrahieren, müssen aber gleichzeitig eine Bitterkeit vermeiden. Ein mittelgrober Mahlgrad, niedrige RPM und ein schneller Drawdown durch 4 Pulse sind der Schlüssel zur Balance.", brewSteps: [{ phase: "Blooming", menge: 50, temp: 94, durchfluss: 3.0, pause: 35, muster: "Kreisförmig", vibVor: "Nein", vibNach: "Nein" },{ phase: "Aufguss 2", menge: 66, temp: 94, durchfluss: 3.2, pause: 30, muster: "Spiralförmig", vibVor: "Nein", vibNach: "Nein" },{ phase: "Aufguss 3", menge: 66, temp: 93, durchfluss: 3.2, pause: 30, muster: "Spiralförmig", vibVor: "Nein", vibNach: "Nein" },{ phase: "Aufguss 4", menge: 66, temp: 92, durchfluss: 3.0, pause: 0, muster: "Zentral", vibVor: "Nein", vibNach: "Nein" }]},
              alternative: {title: "Charakter-Fokus: Seidiger Traubensaft", menge: 16.5, verhaeltnis: "1:15.0", wasserGesamt: 248, mahlgrad: 36, rpm: 70, gesamtBruehzeit: "3:00", anmerkungenTabelle: "Dieses Rezept minimiert die Säure und maximiert das seidige Mundgefühl und die Süße der dunklen Trauben. Weniger komplex, aber sehr süffig.", aufgussStrategieText: "Um die Säure zu reduzieren und den Körper zu betonen, wird ein feinerer Mahlgrad mit einer niedrigeren Temperatur (91°C) kombiniert. Ein langer Bloom und nur ein großer Hauptaufguss erzeugen einen sehr vollen, reichen Körper mit viel Süße und einem unglaublich weichen, seidigen Mundgefühl.", brewSteps: [{ phase: "Blooming", menge: 60, temp: 91, durchfluss: 3.0, pause: 45, muster: "Kreisförmig", vibVor: "Nein", vibNach: "Ja" },{ phase: "Aufguss 2", menge: 188, temp: 91, durchfluss: 3.1, pause: 0, muster: "Spiralförmig", vibVor: "Nein", vibNach: "Nein" }]}
            }
          }}
        ];

        // ### LEGAL CONTENT ###
        const legalContent = {
            impressum: {
                title: 'Impressum',
                content: React.createElement('div',{ className: 'prose prose-stone max-w-none prose-headings:font-serif prose-headings:text-stone-800' }, React.createElement('h2', null, 'Angaben gemäß § 5 TMG'),React.createElement('p', null, 'Leon Filla', React.createElement('br'), 'Jütländer Allee 49', React.createElement('br'), '22527 Hamburg'),React.createElement('h2', null, 'Kontakt'),React.createElement('p', null, '+4915122998676', React.createElement('br'), 'leonfilla@gmail.com'),React.createElement('h2', null, 'Verantwortlich für den Inhalt nach § 18 Abs. 2 MStV'),React.createElement('p', null, 'Leon Filla', React.createElement('br'), 'Anschrift wie oben'), React.createElement('h3', { className: 'mt-6' }, 'Haftungsausschluss'), React.createElement('p', null, 'Als Diensteanbieter sind wir gemäß § 7 Abs.1 TMG für eigene Inhalte auf diesen Seiten nach den allgemeinen Gesetzen verantwortlich. Nach §§ 8 bis 10 TMG sind wir als Diensteanbieter jedoch nicht verpflichtet, übermittelte oder gespeicherte fremde Informationen zu überwachen oder nach Umständen zu forschen, die auf eine rechtswidrige Tätigkeit hinweisen. Verpflichtungen zur Entfernung oder Sperrung der Nutzung von Informationen nach den allgemeinen Gesetzen bleiben hiervon unberührt. Eine diesbezügliche Haftung ist jedoch erst ab dem Zeitpunkt der Kenntnis einer konkreten Rechtsverletzung möglich. Bei Bekanntwerden von entsprechenden Rechtsverletzungen werden wir diese Inhalte umgehend entfernen.')),
            },
            datenschutz: {
                title: 'Datenschutzerklärung',
                content: React.createElement('div',{ className: 'prose prose-stone max-w-none prose-headings:font-serif prose-headings:text-stone-800 prose-a:text-orange-800 hover:prose-a:text-orange-900' }, React.createElement('p', null, 'Verantwortlicher im Sinne der Datenschutzgesetze, insbesondere der EU-Datenschutzgrundverordnung (DSGVO), ist:'), React.createElement('p', null, 'Leon Filla', React.createElement('br'), 'Jütländer Allee 49', React.createElement('br'), '22527 Hamburg'), React.createElement('h3', null, 'Deine Betroffenenrechte'), React.createElement('ul', null, React.createElement('li', null, 'Auskunft über deine bei uns gespeicherten Daten und deren Verarbeitung (Art. 15 DSGVO),'), React.createElement('li', null, 'Berichtigung unrichtiger personenbezogener Daten (Art. 16 DSGVO),'), React.createElement('li', null, 'Löschung deiner bei uns gespeicherten Daten (Art. 17 DSGVO),'), React.createElement('li', null, 'Einschränkung der Datenverarbeitung, sofern wir deine Daten aufgrund gesetzlicher Pflichten noch nicht löschen dürfen (Art. 18 DSGVO),'), React.createElement('li', null, 'Widerspruch gegen die Verarbeitung deiner Daten bei uns (Art. 21 DSGVO) und'), React.createElement('li', null, 'Datenübertragbarkeit, sofern du in die Datenverarbeitung eingewilligt hast oder einen Vertrag mit uns abgeschlossen hast (Art. 20 DSGVO).')), React.createElement('p', null, 'Sofern du uns eine Einwilligung erteilt hast, kannst du diese jederzeit mit Wirkung für die Zukunft widerrufen.'), React.createElement('h3', null, 'Erfassung allgemeiner Informationen beim Besuch unserer Website'), React.createElement('h4', null, 'Art und Zweck der Verarbeitung:'), React.createElement('p', null, 'Wenn du auf unsere Website zugreifst, werden automatisch mittels eines Cookies Informationen allgemeiner Natur erfasst. Diese Informationen (Server-Logfiles) beinhalten etwa die Art des Webbrowsers, das verwendete Betriebssystem, den Domainnamen deines Internet-Service-Providers, deine IP-Adresse und ähnliches.'), React.createElement('h3', null, 'Eingebundene Dienste von Drittanbietern'), React.createElement('p', null, 'Um unsere Inhalte korrekt auszuliefern und darzustellen, verwenden wir auf dieser Website externe Dienste:'), React.createElement('ul', null, React.createElement('li', null, React.createElement('strong', null, 'Google Fonts:'), ' Zur einheitlichen Darstellung von Schriftarten. Anbieter ist die Google Ireland Limited. Durch die Einbindung wird deine IP-Adresse an Google übertragen. Weitere Informationen findest du in der ', React.createElement('a', {href: 'https://policies.google.com/privacy', target: '_blank', rel: 'noopener noreferrer'}, 'Datenschutzerklärung von Google'), '.'), React.createElement('li', null, React.createElement('strong', null, 'Tailwind CSS (CDN):'), ' Zur visuellen Gestaltung der Website. Der Dienst wird über ein Content Delivery Network (CDN) bereitgestellt, was zur Übertragung deiner IP-Adresse an den CDN-Anbieter führen kann.'), React.createElement('li', null, React.createElement('strong', null, 'React & ReactDOM (via unpkg):'), ' Die JavaScript-Bibliotheken zur Funktionalität der Seite werden über das CDN unpkg.com geladen. Auch hierbei wird deine IP-Adresse an den Anbieter übertragen.')), React.createElement('h3', null, 'Änderung unserer Datenschutzbestimmungen'), React.createElement('p', null, 'Wir behalten uns vor, diese Datenschutzerklärung anzupassen, damit sie stets den aktuellen rechtlichen Anforderungen entspricht oder um Änderungen unserer Leistungen in der Datenschutzerklärung umzusetzen, z. B. bei der Einführung neuer Services. Für deinen erneuten Besuch gilt dann die neue Datenschutzerklärung.')),
            },
        };

        // ### COMPONENTS ###
        
        const StarRating = ({ rating, total = 10, colorClass = 'text-amber-700' }) => {
          if (rating === 0) return null;
          const stars = [];
          for (let i = 1; i <= total; i++) {
            stars.push(React.createElement(StarIcon, { key: i, className: `w-5 h-5 ${colorClass}`, filled: i <= rating }));
          }
          return React.createElement("div", { className: "flex items-center space-x-0.5" }, ...stars);
        };

        const AccordionItem = ({ title, children, titleClassName, initiallyOpen = false }) => {
            const [isOpen, setIsOpen] = useState(initiallyOpen);
            return (
                React.createElement("div", { className: "border-b border-stone-200" },
                    React.createElement("button", {
                        onClick: () => setIsOpen(!isOpen),
                        className: `flex items-center justify-between w-full text-left py-4 focus:outline-none ${titleClassName}`
                    },
                        React.createElement("span", { className: "font-medium" }, title),
                        React.createElement("span", { className: `transform transition-transform duration-300 ${isOpen ? "rotate-180" : ""}` }, React.createElement(ChevronDownIcon, null))
                    ),
                    React.createElement("div", { className: `grid-transition ${isOpen ? 'open' : ''}` },
                        React.createElement("div", null, React.createElement("div", { className: "pb-6 pt-2 prose prose-stone max-w-none prose-strong:text-stone-800 prose-a:text-orange-800 hover:prose-a:text-orange-900 prose-ul:pl-5 prose-li:my-1" }, children))
                    )
                )
            );
        };
        
        const CollapsibleSection = ({ title, isOpen, onToggle, children }) => (
          React.createElement("div", { className: "mb-10 bg-white rounded-lg shadow-sm p-4 sm:p-6" },
            React.createElement("button", {
              onClick: onToggle,
              className: "flex items-center justify-between w-full text-left text-2xl font-serif text-stone-700 pb-4"
            },
              title,
              React.createElement("span", { className: `transform transition-transform duration-300 ${isOpen ? "rotate-180" : ""}` },
                React.createElement(ChevronDownIcon, { className: "w-6 h-6 text-stone-500" })
              )
            ),
            React.createElement("div", { className: `grid-transition ${isOpen ? 'open' : ''}` },
                React.createElement("div", null, React.createElement("div", { className: "pt-4 border-t border-stone-200" }, children))
            )
          )
        );
        
        const InfographicContent = () => {
            const autoimmunChartRef = useRef(null);
            const neuroChartRef = useRef(null);
            useEffect(() => {
                const chartInstances = [];
                function wrapLabel(str, max_width) {
                    if (str.length <= max_width) return str;
                    const words = str.split(' ');
                    const lines = [];
                    let current_line = '';
                    for (const word of words) {
                        if ((current_line + ' ' + word).trim().length > max_width && current_line.length > 0) {
                            lines.push(current_line);
                            current_line = word;
                        } else {
                            current_line = (current_line + ' ' + word).trim();
                        }
                    }
                    if (current_line.length > 0) lines.push(current_line);
                    return lines;
                }
                const tooltipTitleCallback = (tooltipItems) => {
                    const item = tooltipItems[0];
                    let label = item.chart.data.labels[item.dataIndex];
                    return Array.isArray(label) ? label.join(' ') : label;
                };
                const chartOptionsBase = {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: { position: 'bottom', labels: { color: '#FFFFFF', font: { size: 12 } } },
                        tooltip: { callbacks: { title: tooltipTitleCallback } }
                    }
                };
                if (autoimmunChartRef.current) {
                    const autoimmunCtx = autoimmunChartRef.current.getContext('2d');
                    const autoimmunChart = new Chart(autoimmunCtx, {
                        type: 'doughnut',
                        data: {
                            labels: ['Zöliakie', 'Typ-1-Diabetes', wrapLabel('Neuromyelitis Optica Spektrum Erkrankung (NMOSD)', 16)],
                            datasets: [{ label: 'Assoziierte Risiken', data: [45, 40, 15], backgroundColor: ['#94d2bd', '#e9d8a6', '#ee9b00'], borderColor: '#0a9396', borderWidth: 2 }]
                        },
                        options: { ...chartOptionsBase }
                    });
                    chartInstances.push(autoimmunChart);
                }
                if (neuroChartRef.current) {
                    const neuroCtx = neuroChartRef.current.getContext('2d');
                    const neuroChart = new Chart(neuroCtx, {
                        type: 'doughnut',
                        data: {
                            labels: ['Multiple Sklerose', 'Narkolepsie'],
                            datasets: [{ label: 'Assoziierte Risiken', data: [65, 35], backgroundColor: ['#94d2bd', '#e9d8a6'], borderColor: '#0a9396', borderWidth: 2 }]
                        },
                        options: { ...chartOptionsBase }
                    });
                    chartInstances.push(neuroChart);
                }
                return () => chartInstances.forEach(chart => chart.destroy());
            }, []);

            return React.createElement("div", { className: "bg-[#e9d8a6] text-[#001219] font-sans" },
                React.createElement("div", { className: "container mx-auto p-4 md:p-8" },
                    React.createElement("header", { className: "text-center mb-12" },
                        React.createElement("h1", { className: "text-4xl md:text-6xl font-black text-[#005f73] mb-2" }, "Ihr Immunologischer Fingerabdruck"),
                        React.createElement("p", { className: "text-lg md:text-xl text-[#001219] max-w-3xl mx-auto" }, "Eine visuelle Aufschlüsselung Ihrer genetischen Veranlagungen basierend auf Ihrer HLA- und Blutgruppen-Analyse.")
                    ),
                    React.createElement("main", { className: "space-y-12" },
                         React.createElement("section", { id: "zwei-seiten", className: "bg-[#005f73] text-white p-6 md:p-8 rounded-2xl shadow-2xl" },
                            React.createElement("h2", { className: "text-3xl font-bold text-center mb-8" }, "Die Zwei Seiten Ihrer Genetik: Haupt-Risikoprofile"),
                            React.createElement("div", { className: "grid md:grid-cols-2 gap-8" },
                                React.createElement("div", { className: "bg-[#0a9396]/50 p-6 rounded-xl" },
                                    React.createElement("h3", { className: "text-2xl font-bold mb-4 text-center" }, "🧬 DR3-DQ2 Haplotyp: Autoimmunität"),
                                    React.createElement("p", { className: "mb-6 text-center" }, "Dieser Haplotyp ist stark mit Erkrankungen assoziiert, bei denen der Körper fälschlicherweise eigenes Gewebe angreift. Ihr Risiko für bestimmte Bedingungen ist signifikant erhöht."),
                                    React.createElement("div", { className: "chart-container" }, React.createElement("canvas", { ref: autoimmunChartRef, id: "autoimmunChart" })),
                                    React.createElement("p", { className: "mt-4 text-sm text-center" }, "Dieses Diagramm zeigt die primären Krankheitsassoziationen des DR3-DQ2-Haplotyps, die für Ihr Profil relevant sind, darunter Zöliakie und Typ-1-Diabetes (T1D).")
                                ),
                                React.createElement("div", { className: "bg-[#0a9396]/50 p-6 rounded-xl" },
                                    React.createElement("h3", { className: "text-2xl font-bold mb-4 text-center" }, "🧠 DR15-DQ6 Haplotyp: Neurologische Gesundheit"),
                                    React.createElement("p", { className: "mb-6 text-center" }, "Dieser Haplotyp ist der wichtigste bekannte genetische Risikofaktor für bestimmte neurologische Erkrankungen, die das zentrale Nervensystem und den Schlafzyklus betreffen."),
                                    React.createElement("div", { className: "chart-container" }, React.createElement("canvas", { ref: neuroChartRef, id: "neuroChart" })),
                                    React.createElement("p", { className: "mt-4 text-sm text-center" }, "Die Hauptrisiken, die mit dem DR15-DQ6-Haplotyp verbunden sind, sind Multiple Sklerose (MS) und Narkolepsie, wie in diesem Diagramm dargestellt.")
                                )
                            )
                        ),
                        React.createElement("section", { id: "tauziehen", className: "text-center" },
                            React.createElement("h2", { className: "text-3xl font-bold text-[#005f73] mb-2" }, "Das Genetische Tauziehen"),
                            React.createElement("p", { className: "text-lg mb-8 max-w-2xl mx-auto" }, "Ihr Profil ist einzigartig: Einige Ihrer Gene erhöhen ein Risiko, während andere es gleichzeitig verringern. Dies ist ein faszinierendes Beispiel für genetische Moderation."),
                            React.createElement("div", { className: "bg-white/70 p-6 rounded-2xl shadow-lg" },
                                React.createElement("div", { className: "grid md:grid-cols-2 gap-8 items-center" },
                                    React.createElement("div", { className: "border-b-4 md:border-b-0 md:border-r-4 border-[#94d2bd] pb-6 md:pb-0 md:pr-6 text-center" },
                                        React.createElement("h4", { className: "text-xl font-bold mb-2" }, "Risiko für Typ-1-Diabetes"), React.createElement("p", { className: "text-3xl font-black text-red-600 mb-2" }, "▲ ERHÖHT"), React.createElement("p", { className: "font-semibold" }, "durch DR3-DQ2 Haplotyp"), React.createElement("p", { className: "text-4xl my-4" }, "⚔️"), React.createElement("p", { className: "text-3xl font-black text-green-600 mb-2" }, "▼ GESCHÜTZT"), React.createElement("p", { className: "font-semibold" }, "durch DQB1*06:02 Allel"), React.createElement("p", { className: "mt-4 text-sm" }, "Ihr T1D-Risiko wird durch gegenläufige genetische Faktoren moduliert, was die Notwendigkeit einer ganzheitlichen Betrachtung unterstreicht.")
                                    ),
                                    React.createElement("div", { className: "text-center" },
                                        React.createElement("h4", { className: "text-xl font-bold mb-2" }, "Risiko für Zöliakie"), React.createElement("p", { className: "text-3xl font-black text-red-600 mb-2" }, "▲ ERHÖHT"), React.createElement("p", { className: "font-semibold" }, "durch DR3-DQ2 Haplotyp"), React.createElement("p", { className: "text-4xl my-4" }, "🛡️"), React.createElement("p", { className: "text-3xl font-black text-green-600 mb-2" }, "▼ GESCHÜTZT"), React.createElement("p", { className: "font-semibold" }, "durch DPB1*04:01 Allel"), React.createElement("p", { className: "mt-4 text-sm" }, "Obwohl Sie den Hauptrisikofaktor für Zöliakie tragen, besitzen Sie auch ein Allel, das eine bekannte schützende Wirkung hat.")
                                    )
                                )
                            )
                        ),
                        React.createElement("section", { id: "warnungen" },
                            React.createElement("h2", { className: "text-3xl font-bold text-center text-[#005f73] mb-8" }, "Wichtige Gesundheits-Warnungen"),
                             React.createElement("div", { className: "grid md:grid-cols-3 gap-6" },
                                React.createElement("div", { className: "bg-white rounded-2xl p-6 shadow-lg transform hover:scale-105 transition-transform duration-300" }, React.createElement("h3", { className: "font-bold text-xl mb-3 text-[#005f73]" }, "💊 Pharmakogenomik"), React.createElement("p", { className: "mb-4" }, "Ihre Gene deuten auf ein erhöhtes Risiko für schwere Nebenwirkungen bei bestimmten Medikamenten hin. Dies ist eine kritische Information für Ihren Arzt."), React.createElement("ul", { className: "list-disc list-inside space-y-1 text-sm" }, React.createElement("li", null, React.createElement("strong", null, "Sulfamethoxazol/Trimethoprim"), " (Antibiotikum)"), React.createElement("li", null, React.createElement("strong", null, "Carbamazepin, Lamotrigin"), " (Antiepileptika)"), React.createElement("li", null, React.createElement("strong", null, "Levetiracetam"), " (Antiepileptikum)"), React.createElement("li", null, React.createElement("strong", null, "Isoniazid"), " (Tuberkulose-Medikament)"))),
                                React.createElement("div", { className: "bg-white rounded-2xl p-6 shadow-lg transform hover:scale-105 transition-transform duration-300" }, React.createElement("h3", { className: "font-bold text-xl mb-3 text-[#005f73]" }, "🩸 Blutgruppe: Kell-Positiv"), React.createElement("p", { className: "mb-4" }, "Ihr Kell-positiver Status ist eine **lebenswichtige Information** für Bluttransfusionen und insbesondere für die Familienplanung, um eine schwere Anämie beim Fötus (HDFN) zu verhindern, falls Ihre Partnerin Kell-negativ ist."), React.createElement("div", { className: "text-center font-black text-5xl text-[#0a9396]" }, "K+")),
                                React.createElement("div", { className: "bg-white rounded-2xl p-6 shadow-lg transform hover:scale-105 transition-transform duration-300" }, React.createElement("h3", { className: "font-bold text-xl mb-3 text-[#005f73]" }, "🩺 Granulomatose mit Polyangiitis (GPA)"), React.createElement("p", { className: "mb-4" }, "Sie tragen das stärkste bekannte Risiko-Allel (DPB1*04:01) für diese seltene autoimmune Vaskulitis. Achten Sie auf Symptome, die eine hartnäckige Erkältung imitieren."), React.createElement("ul", { className: "list-disc list-inside space-y-1 text-sm" }, React.createElement("li", null, "Chronischer Schnupfen / verstopfte Nase"), React.createElement("li", null, "Nasenbluten, Schmerzen in den Nebenhöhlen"), React.createElement("li", null, "Kurzatmigkeit, Bluthusten")))
                            )
                        ),
                        React.createElement("section", { id: "symptom-radar" },
                            React.createElement("h2", { className: "text-3xl font-bold text-center text-[#005f73] mb-8" }, "Symptom-Radar: Worauf Sie Achten Sollten"),
                            React.createElement("p", { className: "text-lg text-center max-w-3xl mx-auto mb-8" }, "Diese Liste fasst frühe oder subtile Symptome zusammen, für die Sie aufgrund Ihres genetischen Profils besonders sensibilisiert sein sollten. Bei neu auftretenden oder anhaltenden Beschwerden sollten Sie Ihren Arzt konsultieren."),
                            React.createElement("div", { className: "grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4" },
                                React.createElement("div", { className: "bg-[#94d2bd]/30 p-4 rounded-lg" }, React.createElement("h4", { className: "font-bold text-lg mb-2" }, "Neurologisch & Konstitutionell"), React.createElement("ul", { className: "list-none space-y-2 text-sm" }, React.createElement("li", null, React.createElement("span", { className: "text-xl mr-2" }, "😵"), " Taubheitsgefühl, Kribbeln"), React.createElement("li", null, React.createElement("span", { className: "text-xl mr-2" }, "😴"), " Überwältigende Tagesschläfrigkeit"), React.createElement("li", null, React.createElement("span", { className: "text-xl mr-2" }, "🏋️"), " Plötzlicher Verlust des Muskeltonus bei Emotionen"), React.createElement("li", null, React.createElement("span", { className: "text-xl mr-2" }, "⚖️"), " Gleichgewichts- & Koordinationsprobleme"), React.createElement("li", null, React.createElement("span", { className: "text-xl mr-2" }, "🔋"), " Extreme, unerklärliche Müdigkeit (Fatigue)"), React.createElement("li", null, React.createElement("span", { className: "text-xl mr-2" }, "💧"), " Starker Durst, häufiges Wasserlassen"))),
                                React.createElement("div", { className: "bg-[#94d2bd]/30 p-4 rounded-lg" }, React.createElement("h4", { className: "font-bold text-lg mb-2" }, "Gastrointestinal & Dermatologisch"), React.createElement("ul", { className: "list-none space-y-2 text-sm" }, React.createElement("li", null, React.createElement("span", { className: "text-xl mr-2" }, "🚽"), " Anhaltender Durchfall / Verstopfung, Blähungen"), React.createElement("li", null, React.createElement("span", { className: "text-xl mr-2" }, "📉"), " Unerklärlicher Gewichtsverlust"), React.createElement("li", null, React.createElement("span", { className: "text-xl mr-2" }, "🤢"), " Übelkeit, anhaltender Schluckauf"), React.createElement("li", null, React.createElement("span", { className: "text-xl mr-2" }, "💥"), " Juckender, blasenbildender Ausschlag"), React.createElement("li", null, React.createElement("span", { className: "text-xl mr-2" }, "👄"), " Wiederkehrende Mundgeschwüre"))),
                                React.createElement("div", { className: "bg-[#94d2bd]/30 p-4 rounded-lg" }, React.createElement("h4", { className: "font-bold text-lg mb-2" }, "Augen, HNO & Andere"), React.createElement("ul", { className: "list-none space-y-2 text-sm" }, React.createElement("li", null, React.createElement("span", { className: "text-xl mr-2" }, "👁️"), " Schmerzen bei Augenbewegung, verschwommenes Sehen"), React.createElement("li", null, React.createElement("span", { className: "text-xl mr-2" }, "👃"), " Chronisch verstopfte Nase, Nasenbluten"), React.createElement("li", null, React.createElement("span", { className: "text-xl mr-2" }, "💨"), " Kurzatmigkeit, Bluthusten"), React.createElement("li", null, React.createElement("span", { className: "text-xl mr-2" }, "💪"), " Gelenkschmerzen, Muskelschwäche"), React.createElement("li", null, React.createElement("span", { className: "text-xl mr-2" }, "🌊"), " Schaumiger oder blutiger Urin")))
                            )
                        ),
                        React.createElement("section", { id: "fazit", className: "text-center" },
                            React.createElement("h2", { className: "text-3xl font-bold text-[#005f73] mb-8" }, "Ihr Weg zu Proaktiver Gesundheit"),
                            React.createElement("p", { className: "text-lg max-w-3xl mx-auto mb-8" }, "Dieses Wissen ist kein Urteil, sondern ein Werkzeug. Es befähigt Sie, ein informierter Partner in Ihrer eigenen Gesundheitsversorgung zu sein."),
                            React.createElement("div", { className: "flex flex-col md:flex-row justify-center items-center" }, React.createElement("div", { className: "text-center p-4" }, React.createElement("div", { className: "text-4xl mb-2" }, "📊"), React.createElement("h4", { className: "font-bold" }, "Ihre Daten"), React.createElement("p", { className: "text-sm" }, "Der komplexe genetische Befund")), React.createElement("div", { className: "flow-arrow hidden md:block" }), React.createElement("div", { className: "text-center p-4" }, React.createElement("div", { className: "text-4xl mb-2" }, "💡"), React.createElement("h4", { className: "font-bold" }, "Verständnis"), React.createElement("p", { className: "text-sm" }, "Diese Infografik als Leitfaden")), React.createElement("div", { className: "flow-arrow hidden md:block" }), React.createElement("div", { className: "text-center p-4" }, React.createElement("div", { className: "text-4xl mb-2" }, "👩‍⚕️"), React.createElement("h4", { className: "font-bold" }, "Arztgespräch"), React.createElement("p", { className: "text-sm" }, "Teilen Sie diese Erkenntnisse")), React.createElement("div", { className: "flow-arrow hidden md:block" }), React.createElement("div", { className: "text-center p-4" }, React.createElement("div", { className: "text-4xl mb-2" }, "❤️"), React.createElement("h4", { className: "font-bold" }, "Proaktive Pflege"), React.createElement("p", { className: "text-sm" }, "Ein Leben lang wachsam & informiert")))
                        )
                    )
                )
            );
        };
        
        // Main App Component
        const App = () => {
          const [coffeeData, setCoffeeData] = useState(initialCoffeeData);
          const [isLoading, setIsLoading] = useState(true);
          const [selectedCoffee, setSelectedCoffee] = useState(null);
          const [legalModalContentKey, setLegalModalContentKey] = useState(null);
          const [showPasswordModal, setShowPasswordModal] = useState(false);
          const [showAdminAreaModal, setShowAdminAreaModal] = useState(false);
          const [showInfographicModal, setShowInfographicModal] = useState(false);
          const [isInfoOpen, setIsInfoOpen] = useState(true); 
          const [isCaffeinatedOpen, setIsCaffeinatedOpen] = useState(true);
          const [isDecafOpen, setIsDecafOpen] = useState(true);
          const [searchTerm, setSearchTerm] = useState('');
          const [showBackToTop, setShowBackToTop] = useState(false);

          useEffect(() => {
            const timer = setTimeout(() => {
                const loader = document.getElementById('initial-loader');
                if (loader) loader.style.display = 'none';
                setIsLoading(false);
            }, 500);
            return () => clearTimeout(timer);
          }, []);

          useEffect(() => {
            const checkScrollTop = () => {
              if (!showBackToTop && window.pageYOffset > 400) setShowBackToTop(true);
              else if (showBackToTop && window.pageYOffset <= 400) setShowBackToTop(false);
            };
            window.addEventListener('scroll', checkScrollTop);
            return () => window.removeEventListener('scroll', checkScrollTop);
          }, [showBackToTop]);

          const filteredCoffees = useMemo(() => {
              return coffeeData
                  .filter(coffee => {
                      const term = searchTerm.toLowerCase();
                      return (
                          coffee.name.toLowerCase().includes(term) ||
                          coffee.details.roesterei.toLowerCase().includes(term) ||
                          coffee.details.region.toLowerCase().includes(term) ||
                          coffee.processing.toLowerCase().includes(term)
                      );
                  })
                  .sort((a, b) => a.name.localeCompare(b.name));
          }, [searchTerm, coffeeData]);
          
          const decafCoffees = filteredCoffees.filter((coffee) => coffee.isDecaf);
          const caffeinatedCoffees = filteredCoffees.filter((coffee) => !coffee.isDecaf);

          const groupedCaffeinatedCoffees = caffeinatedCoffees.reduce((acc, coffee) => {
            const group = coffee.processing || 'Unbekannt';
            if (!acc[group]) acc[group] = [];
            acc[group].push(coffee);
            return acc;
          }, {});

          const groupOrder = ['Washed', 'Natural', 'Anaerobic & Fermented'];

          const openModal = (setter, value) => {
            setter(value);
            document.body.style.overflow = 'hidden';
          };

          const closeModal = (setter) => {
            setter(null);
            document.body.style.overflow = 'auto';
          };
          
          const handleAdminLogin = () => {
              setShowPasswordModal(false);
              setShowAdminAreaModal(true);
              document.body.style.overflow = 'hidden';
          };
          
          const closeAllModals = () => {
              setShowPasswordModal(false);
              setShowAdminAreaModal(false);
              setShowInfographicModal(false);
              document.body.style.overflow = 'auto';
          }
          
          const showInfographic = () => {
              setShowAdminAreaModal(false);
              setShowInfographicModal(true);
          }

          const scrollToTop = () => {
              window.scrollTo({ top: 0, behavior: 'smooth' });
          };

          if (isLoading) return null;

          return (
            React.createElement("div", { className: "min-h-screen bg-stone-100 text-stone-800 p-4 sm:p-8 lg:p-12 font-sans selection:bg-orange-200 selection:text-orange-900" },
              React.createElement("header", { className: "text-center mb-16" },
                React.createElement("h1", { className: "text-5xl lg:text-6xl font-serif font-medium text-stone-700" }, "Der Grund, morgens aufzustehen"),
                React.createElement("p", { className: "text-lg text-stone-500 mt-3" }, "by Leon Filla")
              ),
              React.createElement("div", { className: "max-w-7xl mx-auto" },
                React.createElement(CollapsibleSection, {
                  title: "Eine gute Tasse Kaffee",
                  isOpen: isInfoOpen,
                  onToggle: () => setIsInfoOpen(!isInfoOpen)
                },
                  React.createElement(AccordionItem, { title: "1. Worauf kommts an?", titleClassName: "text-xl text-stone-700 font-serif", initiallyOpen: true },
                      React.createElement("p", null, "Diese Rezepte zielen darauf ab, das Geschmackspotenzial von Kaffeesorten durch die Steuerung bestimmter Parameter zu maximieren. Wir fokussieren uns auf die drei zentralen Geschmacksdimensionen:"),
                      React.createElement("ul", null,
                          React.createElement("li", null, React.createElement("strong", null, "Süße:"), " Entsteht durch den Abbau von komplexen Kohlenhydraten. Sie wird typischerweise im mittleren bis späten Teil der Extraktion gelöst."),
                          React.createElement("li", null, React.createElement("strong", null, "Fruchtigkeit:"), " Stammt von organischen Säuren in der Bohne. Diese lösen sich sehr früh und schnell im Brühprozess."),
                          React.createElement("li", null, React.createElement("strong", null, "Körper/Mundgefühl:"), " Wird durch Öle und Kolloide erzeugt. Diese benötigen mehr Zeit und Energie zur Extraktion.")
                      ),
                      React.createElement("p", null, "Eine gute Extraktion balanciert diese drei Dimensionen aus, um eine komplexe, aber harmonische Tasse zu erzeugen. Die folgenden Parameter sind unsere Werkzeuge, um dieses Gleichgewicht zu steuern.")
                  ),
                  React.createElement(AccordionItem, { title: "2. xBloom-Parameter", titleClassName: "text-xl text-stone-700 font-serif" },
                      React.createElement("div", { className: "pl-4 border-l-2 border-stone-200 space-y-2" },
                          React.createElement(AccordionItem, { title: "Mahlgrad", titleClassName: "text-lg text-stone-600" },
                              React.createElement("p", null, "Der Mahlgrad ist der ", React.createElement("strong", null, "wichtigste Hebel"), " zur Steuerung der Extraktion. Er bestimmt die Oberfläche des Kaffeemehls und damit, wie schnell Aromen extrahiert werden."),
                              React.createElement("ul", null,
                                  React.createElement("li", null, React.createElement("strong", null, "Feinerer Mahlgrad:"), " Mehr Oberfläche, höherer Widerstand für das Wasser. Führt zu einer langsameren, intensiveren Extraktion. Zu fein: Überextraktion (bitter, trocken, adstringierend)."),
                                  React.createElement("li", null, React.createElement("strong", null, "Gröberer Mahlgrad:"), " Weniger Oberfläche, geringerer Widerstand. Führt zu einer schnelleren, weniger intensiven Extraktion. Zu grob: Unterextraktion (sauer, wässrig, leer).")
                              ),
                              React.createElement("p", null, React.createElement("strong", null, "Die xBloom-Skala:"), " Die xBloom verwendet eine numerische Skala von ", React.createElement("strong", null, "1 (sehr fein)"), " bis ", React.createElement("strong", null, "80 (sehr grob)"), ". Für Filterkaffee bewegen sich die meisten Rezepte in einem Bereich von ca. ", React.createElement("strong", null, "400 bis 900 Mikron"), ", was auf der xBloom-Skala typischerweise Einstellungen zwischen ", React.createElement("strong", null, "30 und 65"), " entspricht."),
                              React.createElement("p", null, React.createElement("strong", null, "Hinweis:"), " Passe immer zuerst den Mahlgrad an. Eine Änderung von 1-2 Klicks in der xBloom-App kann bereits einen deutlichen Unterschied machen. Beachte, dass entkoffeinierte Kaffees oft eine sprödere Bohnenstruktur haben und tendenziell einen feineren Mahlgrad (z.B. 30-45) benötigen, um eine Überextraktion zu vermeiden und dennoch ausreichend Körper zu entwickeln.")
                          ),
                          React.createElement(AccordionItem, { title: "Brühverhältnis & Wassermenge", titleClassName: "text-lg text-stone-600" },
                               React.createElement("p", null, "Das Brühverhältnis (Ratio) beschreibt das Verhältnis von Kaffeemehl zu Wasser (z.B. 1:16 bedeutet 1g Kaffee auf 16ml Wasser)."),
                              React.createElement("ul", null,
                                  React.createElement("li", null, React.createElement("strong", null, "Engeres Verhältnis (z.B. 1:14):"), " Konzentrierter, kräftigerer Kaffee mit mehr Körper. Risiko der Unterextraktion, da weniger Wasser zur Verfügung steht, um alle Aromen zu lösen."),
                                  React.createElement("li", null, React.createElement("strong", null, "Weiteres Verhältnis (z.B. 1:17):"), " Leichterer, oft klarerer Kaffee mit mehr betonten floralen oder fruchtigen Noten. Risiko der Überextraktion, da mehr Wasser mehr Aromen (auch unerwünschte) lösen kann.")
                              ),
                              React.createElement("p", null, React.createElement("strong", null, "Hinweis:"), " Die xBloom-App erlaubt die Einstellung des Verhältnisses nur in ", React.createElement("strong", null, "0.5er-Schritten"), ". Die Rezepte hier sind auf diese Limitierung abgestimmt.")
                          ),
                           React.createElement(AccordionItem, { title: "Temperatur", titleClassName: "text-lg text-stone-600" },
                              React.createElement("p", null, "Die Wassertemperatur beeinflusst, welche Verbindungen wie schnell aus dem Kaffee gelöst werden. Die xBloom App erlaubt eine gradgenaue Temperatursteuerung (bis 95°C)."),
                              React.createElement("ul", null,
                                React.createElement("li", null, React.createElement("strong", null, "Höhere Temperaturen (92-95°C):"), " Lösen Aromen schneller und effizienter, betonen Säuren und Fruchtigkeit. Ideal für hell geröstete oder dichte Bohnen. Zu heiß kann zu Bitterkeit führen."),
                                React.createElement("li", null, React.createElement("strong", null, "Niedrigere Temperaturen (88-91°C):"), " Extrahieren sanfter und langsamer, betonen Süße und Körper und reduzieren Bitterkeit. Ideal für dunklere Röstungen oder um empfindliche Aromen zu schützen.")
                              ),
                              React.createElement("p", null, React.createElement("strong", null, "Hinweis:"), " Hier meist ein fallendes Temperaturprofil. Der erste Aufguss beginnt heiß für die Extraktion der Fruchtigkeit, gefolgt von kühleren Aufgüssen, um Süße zu entwickeln und bittere Noten am Ende zu vermeiden.")
                          ),
                           React.createElement(AccordionItem, { title: "Aufgussstrategie", titleClassName: "text-lg text-stone-600" },
                              React.createElement("ul", null,
                                React.createElement("li", null, React.createElement("strong", null, "Anzahl der Aufgüsse:"), " Mehrere kleine Aufgüsse (z.B. 4-5) halten das Temperaturniveau stabiler und erlauben eine kontrolliertere Extraktion als ein einziger großer Aufguss."),
                                React.createElement("li", null, React.createElement("strong", null, "Flussgeschwindigkeit:"), " In der App einstellbar von ", React.createElement("strong", null, "3.0 bis 3.5 ml/s"), " in 0.1er-Schritten. Eine höhere Flussrate erhöht die Agitation des Kaffeebetts, was die Extraktion beschleunigt, aber auch das Risiko von Channeling erhöht. Eine niedrigere Rate ist sanfter und fördert eine gleichmäßigere Extraktion."),
                                 React.createElement("li", null, React.createElement("strong", null, "Aufgussmuster:"),
                                    React.createElement("ul", null,
                                        React.createElement("li", null, React.createElement("strong", null, "Spiralförmig:"), " Das Wasser wird in einer kontinuierlichen Spirale von innen nach außen (oder umgekehrt) verteilt. Dies sorgt für eine sehr gleichmäßige Benetzung der gesamten Oberfläche und eine moderate Agitation. Ideal für die meisten Aufgüsse."),
                                        React.createElement("li", null, React.createElement("strong", null, "Kreisförmig:"), " Das Wasser wird in konzentrischen Kreisen auf das Kaffeebett gegeben. Dies führt zu einer etwas geringeren Agitation im Vergleich zur Spirale und ist sehr gut geeignet, um das Kaffeebett sanft zu sättigen, z.B. während des Bloomings."),
                                        React.createElement("li", null, React.createElement("strong", null, "Zentral:"), " Fokussiert den Wasserstrahl in der Mitte. Minimale Agitation, ideal für den letzten Aufguss, um die Extraktion sanft ausklingen zu lassen und den Körper zu finalisieren, ohne Bitterstoffe zu extrahieren.")
                                    )
                                ),
                                React.createElement("li", null, React.createElement("strong", null, "Pausen:"), " Längere Pausen zwischen den Aufgüssen lassen das Wasser komplett durchlaufen (\"Drain Time\"), was zu mehr Klarheit führen kann. Kürzere Pausen halten das Bett gesättigter und fördern eine höhere Extraktion.")
                              )
                          ),
                          React.createElement(AccordionItem, { title: "Mahlwerk-Drehzahl & Vibration", titleClassName: "text-lg text-stone-600" },
                               React.createElement("ul", null,
                                   React.createElement("li", null, React.createElement("strong", null, "RPM (Umdrehungen pro Minute):"), " Steuert die Geschwindigkeit des Mahlwerks (60-120 RPM).",
                                      React.createElement("ul", null,
                                        React.createElement("li", null, React.createElement("strong", null, "Niedrigere RPM (60-70):"), " Produziert weniger Feinstpartikel (\"Fines\"). Das Ergebnis ist oft eine klarere, süßere Tasse mit weniger Bitterkeit, da Fines schnell überextrahieren. Empfohlen für die meisten Filterkaffees."),
                                        React.createElement("li", null, React.createElement("strong", null, "Höhere RPM (>80):"), " Kann bei sehr harten, hellen Bohnen helfen, diese effizient zu mahlen, erhöht aber das Risiko von Fines.")
                                      )
                                   ),
                                   React.createElement("li", null, React.createElement("strong", null, "Vibration:"), " Ein An/Aus-Schalter, der das Filterbett durchrüttelt.",
                                       React.createElement("ul", null,
                                           React.createElement("li", null, React.createElement("strong", null, "Vorteil:"), " Kann ein unebenes Kaffeebett nach dem Blooming einebnen."),
                                           React.createElement("li", null, React.createElement("strong", null, "Risiko:"), " Kann Feinstpartikel zum Filterboden spülen, was zu Verstopfung und ungleichmäßiger Extraktion führt."),
                                           React.createElement("li", null, React.createElement("strong", null, "Empfehlung:"), " Sehr zurückhaltend einsetzen. In den meisten Rezepten wird darauf verzichtet, um die Klarheit zu maximieren.")
                                       )
                                   )
                               )
                          )
                      )
                  ),
                  React.createElement(AccordionItem, { title: "3. Geschmackliche Feinabstimmung", titleClassName: "text-xl text-stone-700 font-serif" },
                      React.createElement("p", null, "Ein Rezept ist ein optimierter Startpunkt, aber jeder Kaffee ist einzigartig. Bohnenalter, Wasserhärte und persönlicher Geschmack machen eine Feinabstimmung unerlässlich. Hier ist eine systematische Anleitung, um das Beste aus jeder Bohne herauszuholen."),
                      React.createElement("h4", { className: "font-serif text-lg font-semibold mt-4 mb-2 text-stone-700" }, "Schritt 1: Der Referenz-Brühvorgang"),
                      React.createElement("p", null, "Brühe den Kaffee zunächst exakt nach Rezept, um einen Geschmacks-Referenzpunkt zu erhalten. Schmecke bewusst und versuche, das Ergebnis einzuordnen."),
                      React.createElement("h4", { className: "font-serif text-lg font-semibold mt-4 mb-2 text-stone-700" }, "Schritt 2: Geschmack analysieren & Problem identifizieren"),
                      React.createElement("div", { className: "grid grid-cols-1 md:grid-cols-2 gap-4 my-4" },
                          React.createElement("div", { className: "bg-stone-50 p-3 rounded-md border-l-4 border-red-400" },
                              React.createElement("strong", { className: "text-red-700" }, "Problem: Sauer / Unangenehm spitz"), React.createElement("br", null),
                              React.createElement("span", { className: "text-sm" }, "Schmeckt wie unreife Zitrone, grasig. Fühlt sich im Mund wässrig an."), React.createElement("br", null),
                              React.createElement("span", { className: "text-sm" }, React.createElement("strong", null, "Diagnose:"), " Unterextraktion.")
                          ),
                          React.createElement("div", { className: "bg-stone-50 p-3 rounded-md border-l-4 border-blue-400" },
                              React.createElement("strong", { className: "text-blue-700" }, "Problem: Bitter / Trocken / Adstringierend"), React.createElement("br", null),
                              React.createElement("span", { className: "text-sm" }, "Hinterlässt ein trockenes, pelziges Gefühl auf der Zunge (wie bei starkem Schwarztee)."), React.createElement("br", null),
                              React.createElement("span", { className: "text-sm" }, React.createElement("strong", null, "Diagnose:"), " Überextraktion.")
                          )
                      ),
                      React.createElement("h4", { className: "font-serif text-lg font-semibold mt-4 mb-2 text-stone-700" }, "Schritt 3: Anpassung der primären Variable"),
                      React.createElement("p", null, "Der Mahlgrad ist dein mächtigstes Werkzeug. Er hat den größten Einfluss auf die Extraktionszeit und damit auf das Geschmacksergebnis."),
                      React.createElement("ul", null,
                          React.createElement("li", null, React.createElement("strong", null, "Bei saurem Geschmack → feiner mahlen."), " Mache kleine Schritte (z.B. 1-2 Klicks auf der xBloom-Skala). Dadurch erhöht sich die Kontaktzeit des Wassers mit dem Kaffee und es werden mehr süße Verbindungen gelöst."),
                          React.createElement("li", null, React.createElement("strong", null, "Bei bitterem Geschmack → gröber mahlen."), " Dies verkürzt die Kontaktzeit und verhindert, dass zu viele bitter schmeckende Stoffe extrahiert werden.")
                      ),
                      React.createElement("p", null, "Wiederhole diesen Schritt, bis weder eine dominante Säure noch Bitterkeit vorhanden ist. Erst dann bist du im richtigen \"Fenster\" für die Feinabstimmung."),
                      React.createElement("h4", { className: "font-serif text-lg font-semibold mt-4 mb-2 text-stone-700" }, "Schritt 4: Feinabstimmung mit sekundären Variablen"),
                      React.createElement("p", null, "Sobald der Mahlgrad passt, kannst du den Charakter des Kaffees mit diesen Hebeln verfeinern:"),
                      React.createElement("ul", null,
                          React.createElement("li", null, React.createElement("strong", null, "Für mehr Süße und Körper:"),
                              React.createElement("ul", null,
                                  React.createElement("li", null, "Senke die Temperatur der letzten 1-2 Aufgüsse um 1-2°C."),
                                  React.createElement("li", null, "Verwende ein leicht engeres Brühverhältnis (z.B. von 1:16 auf 1:15.5).")
                              )
                          ),
                          React.createElement("li", null, React.createElement("strong", null, "Für mehr Klarheit und betonte Fruchtnoten:"),
                              React.createElement("ul", null,
                                  React.createElement("li", null, "Erhöhe die Temperatur des zweiten Aufgusses (nach dem Blooming) um 1-2°C."),
                                  React.createElement("li", null, "Verlängere die Pausenzeiten zwischen den Aufgüssen um 5-10 Sekunden, um eine bessere Trennung der Extraktionsphasen zu erreichen.")
                              )
                          )
                      ),
                      React.createElement("h4", { className: "font-serif text-lg font-semibold mt-4 mb-2 text-stone-700" }, "Spezialfall: \"Sauer und bitter zugleich\""),
                      React.createElement("p", null, "Dieser widersprüchliche Geschmack deutet fast immer auf eine ", React.createElement("strong", null, "ungleichmäßige Extraktion (Channeling)"), " hin. Das Wasser fließt durch Kanäle im Kaffeebett zu schnell (extrahiert sauer), während es an anderen Stellen fast stillsteht (extrahiert bitter). Auch wenn die xBloom dies minimiert, kannst du Folgendes versuchen:"),
                      React.createElement("ul", null,
                          React.createElement("li", null, "Mahle deutlich ", React.createElement("strong", null, "gröber"), ", um den Wasserfluss zu erleichtern."),
                          React.createElement("li", null, "Kompensiere den gröberen Mahlgrad, indem du die ", React.createElement("strong", null, "Temperatur leicht erhöhst"), " oder die Gesamt-Wassermenge etwas steigerst (z.B. von 1:16 auf 1:16.5).")
                      ),
                      React.createElement("p", { className: "mt-6 border-t border-stone-200 pt-4" }, React.createElement("strong", null, "Goldene Regel:"), " Ändere immer nur ", React.createElement("strong", null, "einen Parameter"), " auf einmal und brühe erneut. Nur so kannst du die Auswirkung deiner Anpassung klar beurteilen und dich schrittweise dem perfekten Geschmack nähern.")
                  )
                ),
                React.createElement("div", { className: "bg-white rounded-lg shadow-sm p-4 mb-10" },
                    React.createElement("input", { type: "text", placeholder: "Kaffee, Rösterei, Region oder Verarbeitung suchen...", value: searchTerm, onChange: (e) => setSearchTerm(e.target.value), className: "w-full px-4 py-2 border border-stone-300 rounded-md focus:ring-2 focus:ring-orange-500 focus:border-orange-500 transition" })
                ),
                React.createElement(CollapsibleSection, { title: "Signature Coffees", isOpen: isCaffeinatedOpen, onToggle: () => setIsCaffeinatedOpen(!isCaffeinatedOpen) },
                  groupOrder.map(group => (
                    groupedCaffeinatedCoffees[group] && groupedCaffeinatedCoffees[group].length > 0 && (
                      React.createElement("div", { key: group },
                        React.createElement("h4", { className: "text-2xl font-serif text-stone-600 border-b border-stone-300 pb-2 mb-6" }, group),
                        React.createElement("div", { className: "grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-x-6 gap-y-10 mb-12" },
                          groupedCaffeinatedCoffees[group].map(coffee => React.createElement(CoffeeCard, { key: coffee.id, coffee: coffee, onSelect: (coffee) => openModal(setSelectedCoffee, coffee) }))
                        )
                      )
                    )
                  ))
                ),
                React.createElement(CollapsibleSection, { title: "Decaf Selections", isOpen: isDecafOpen, onToggle: () => setIsDecafOpen(!isDecafOpen) },
                   decafCoffees.length > 0 ? 
                   React.createElement("div", { className: "grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-x-6 gap-y-10" },
                    decafCoffees.map((coffee) => React.createElement(CoffeeCard, { key: coffee.id, coffee: coffee, onSelect: (coffee) => openModal(setSelectedCoffee, coffee) }))
                  )
                  : React.createElement("p", {className: "text-stone-500 italic"}, "Keine Decaf-Kaffees gefunden, die den Kriterien entsprechen.")
                )
              ),
              selectedCoffee && React.createElement(RecipeModal, { coffee: selectedCoffee, onClose: () => closeModal(setSelectedCoffee) }),
              legalModalContentKey && React.createElement(LegalModal, { title: legalContent[legalModalContentKey].title, content: legalContent[legalModalContentKey].content, onClose: () => closeModal(setLegalModalContentKey) }),
              showPasswordModal && React.createElement(PasswordModal, { onClose: closeAllModals, onSuccess: handleAdminLogin }),
              showAdminAreaModal && React.createElement(AdminAreaModal, { onClose: closeAllModals, setCoffeeData: setCoffeeData, onShowInfographic: showInfographic }),
              showInfographicModal && React.createElement(InfographicModal, { onClose: closeAllModals }),
              showBackToTop && React.createElement("button", { onClick: scrollToTop, className: "fixed bottom-8 right-8 bg-stone-700 text-white p-3 rounded-full shadow-lg hover:bg-stone-800 transition-all duration-300 z-30", "aria-label": "Nach oben scrollen" }, React.createElement(ChevronUpIcon, null)),
              React.createElement("footer", { className: "text-center mt-20 py-10 border-t border-stone-300" },
                  React.createElement("div", { className: "flex justify-center items-center space-x-4 text-sm" },
                      React.createElement("button", { onClick: () => openModal(setLegalModalContentKey, 'impressum'), className: "text-stone-500 hover:text-orange-800 transition-colors" }, "Impressum"),
                      React.createElement("button", { 
                          onClick: () => setShowPasswordModal(true), 
                          className: "text-stone-400 hover:text-orange-800 transition-colors px-2",
                          "aria-label": "Adminbereich öffnen"
                      }, "|"),
                      React.createElement("button", { onClick: () => openModal(setLegalModalContentKey, 'datenschutz'), className: "text-stone-500 hover:text-orange-800 transition-colors" }, "Datenschutz")
                  ),
                React.createElement("p", { className: "text-stone-500 text-sm mt-4" }, `© ${new Date().getFullYear()} Leon Filla. `, React.createElement("span", { className: "block sm:inline" }, " All rights reserved.")),
                React.createElement("p", { className: "text-stone-400 text-xs mt-1" }, "Coffee recipes optimized for the xBloom Studio.")
              )
            )
          );
        };
        
        const CoffeeCard = ({ coffee, onSelect }) => {
          const colorAccent = coffee.colorAccent || 'bg-orange-800';
          const textColorAccent = coffee.textColorAccent || 'text-orange-900';
          return (
            React.createElement("div", { className: "bg-white rounded-lg shadow-lg hover:shadow-xl transition-shadow duration-300 ease-in-out flex flex-col overflow-hidden border border-stone-200 group" },
              React.createElement("div", { className: "relative overflow-hidden" },
                React.createElement("img", { src: coffee.mainImage, alt: `[Bild von ${coffee.name}]`, className: "w-full h-56 object-cover group-hover:scale-105 transition-transform duration-300", onError: (e) => { e.target.onerror = null; e.target.src = "https://placehold.co/600x400/E0E0E0/9E9E9E?text=Bild+Ladefehler"; } })
              ),
              React.createElement("div", { className: "p-5 flex flex-col flex-grow" },
                React.createElement("h3", { className: `text-xl font-serif font-medium ${textColorAccent} mb-2` }, coffee.name),
                React.createElement("p", { className: "text-stone-600 text-sm mb-4 flex-grow leading-relaxed" }, coffee.shortDescription),
                 coffee.details.wertung > 0 && React.createElement("div", { className: "flex justify-center mb-4" }, React.createElement(StarRating, { rating: coffee.details.wertung, total: 10, colorClass: textColorAccent })),
                React.createElement("div", { className: "space-y-2 text-xs text-stone-500 border-t border-stone-200 pt-4 mt-auto" },
                    React.createElement("p", null, React.createElement("strong", null, "Rösterei:"), " ", coffee.details.roesterei), React.createElement("p", null, React.createElement("strong", null, "Produzent:"), " ", coffee.details.produzent || 'N/A'), React.createElement("p", null, React.createElement("strong", null, "Region:"), " ", coffee.details.region || 'N/A'), React.createElement("p", null, React.createElement("strong", null, "Sorte:"), " ", coffee.details.sorte)
                ),
                React.createElement("div", { className: "mt-5" }, React.createElement("button", { onClick: () => onSelect(coffee), className: `${colorAccent} text-white w-full py-2.5 px-4 rounded-md text-sm font-semibold hover:opacity-85 transition-opacity shadow-sm hover:shadow-md focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-orange-500 flex items-center justify-center`}, "Rezepte ansehen"))
              )
            )
          );
        };
        
        const LegalModal = ({ title, content, onClose }) => {
            return React.createElement("div", { className: "fixed inset-0 bg-black/60 backdrop-blur-sm flex justify-center items-start py-6 sm:py-10 px-4 z-40 transition-opacity duration-300 ease-in-out overflow-y-auto", onClick: onClose },
                React.createElement("div", { className: "bg-white p-6 sm:p-8 rounded-lg shadow-2xl w-full max-w-3xl max-h-[90vh] sm:max-h-[85vh] overflow-y-auto relative font-sans text-stone-800", onClick: e => e.stopPropagation() },
                    React.createElement("button", { onClick: onClose, className: "absolute top-4 right-4 text-stone-400 hover:text-stone-700 text-3xl font-light transition-colors z-10 focus:outline-none focus:ring-2 focus:ring-stone-400 rounded-full", "aria-label": "Schließen" }, "×"),
                    React.createElement("h2", { className: "text-3xl sm:text-4xl font-serif font-medium text-orange-900 mb-6" }, title),
                    content,
                     React.createElement("div", { className: "mt-8 pt-5 border-t border-stone-200 flex justify-end" }, React.createElement("button", { onClick: onClose, className: "w-full sm:w-auto bg-stone-200 text-stone-700 py-2.5 px-8 rounded-md hover:bg-stone-300 transition-colors text-sm font-medium shadow-sm hover:shadow-md focus:outline-none focus:ring-2 focus:ring-stone-400 focus:ring-offset-2" }, "Schließen"))
                )
            );
        };

        const InfographicModal = ({ onClose }) => {
             return React.createElement("div", { className: "fixed inset-0 bg-black/70 flex justify-center items-center p-4 z-50", onClick: onClose },
                React.createElement("div", { className: "bg-white rounded-lg shadow-2xl w-full max-w-6xl h-[95vh] overflow-y-auto relative", onClick: e => e.stopPropagation() },
                    React.createElement("button", { onClick: onClose, className: "absolute top-2 right-2 text-stone-500 bg-white/50 backdrop-blur-sm rounded-full p-1 hover:text-stone-800 z-20", "aria-label": "Schließen" }, 
                        React.createElement("svg", {xmlns:"http://www.w3.org/2000/svg", className:"h-8 w-8", fill:"none", viewBox:"0 0 24 24", stroke:"currentColor"}, React.createElement("path", {strokeLinecap:"round", strokeLinejoin:"round", strokeWidth:2, d:"M6 18L18 6M6 6l12 12"}))
                    ),
                    React.createElement(InfographicContent, null)
                )
            );
        };
        
        const AdminAreaModal = ({ onClose, setCoffeeData, onShowInfographic }) => {
            const [url, setUrl] = useState('');
            const [isLoading, setIsLoading] = useState(false);
            const [error, setError] = useState('');
            const [status, setStatus] = useState('');
            const inputRef = useRef(null);

            useEffect(() => {
                if (inputRef.current) {
                    inputRef.current.focus();
                }
            }, []);
            
            const handleGenerate = async () => {
                if (!url) {
                    setError('Bitte geben Sie eine URL ein.');
                    return;
                }
                setIsLoading(true);
                setError('');
                setStatus('1/3 - Analysiere Kaffeedaten...');

                try {
                    const recipeSchema = {
                      type: "OBJECT",
                      properties: {
                        id: { type: "STRING", description: "Einzigartige ID im Format 'roesterei_name', alles in Kleinbuchstaben." },
                        name: { type: "STRING", description: "Der vollständige Name des Kaffees." },
                        isDecaf: { type: "BOOLEAN", description: "Ist der Kaffee entkoffeiniert?" },
                        processing: { type: "STRING", description: "Aufbereitungsmethode (z.B. 'Washed', 'Natural', 'Anaerobic & Fermented')." },
                        shortDescription: { type: "STRING", description: "Kurze, ansprechende Zusammenfassung der primären Geschmacksnoten (max. 2 Sätze)." },
                        mainImage: { type: "STRING", description: "Direkter Link zu einem hochauflösenden Produktbild. Wenn nicht gefunden, eine leere Zeichenfolge." },
                        colorAccent: { type: "STRING", description: "Eine passende Tailwind CSS Hintergrund-Farbklasse (z.B. 'bg-orange-800'), basierend auf der Aufbereitung." },
                        textColorAccent: { type: "STRING", description: "Eine passende Tailwind CSS Text-Farbklasse (z.B. 'text-orange-900')." },
                        borderColorAccent: { type: "STRING", description: "Eine passende Tailwind CSS Border-Farbklasse (z.B. 'border-orange-700')." },
                        bgColorAccentLight: { type: "STRING", description: "Eine passende helle Tailwind CSS Hintergrund-Farbklasse (z.B. 'bg-orange-50')." },
                        details: {
                          type: "OBJECT",
                          properties: {
                            roesterei: { type: "STRING", description: "Name der Rösterei." },
                            sorte: { type: "STRING", description: "Kaffeesorte/Varietät (z.B. 'Red Bourbon (Natural)')." },
                            region: { type: "STRING", description: "Herkunftsland und die Region (z.B. 'Äthiopien, Guji')." },
                            produzent: { type: "STRING", description: "Name des Produzenten oder der Kooperative, falls verfügbar, sonst 'N/A'." },
                            wertung: { type: "NUMBER", description: "Platzhalter, immer auf 0 setzen." },
                            buyLink: { type: "STRING", description: "Die ursprüngliche URL, die analysiert wurde." },
                            recipes: {
                              type: "OBJECT",
                              properties: {
                                original: {
                                  type: "OBJECT",
                                  properties: {
                                    title: { type: "STRING", description: "Titel: 'Originalrezept'" },
                                    menge: { type: "NUMBER" },
                                    verhaeltnis: { type: "STRING" },
                                    wasserGesamt: { type: "NUMBER" },
                                    mahlgrad: { type: "NUMBER" },
                                    rpm: { type: "NUMBER" },
                                    gesamtBruehzeit: { type: "STRING" },
                                    anmerkungenTabelle: { type: "STRING" },
                                    aufgussStrategieText: { type: "STRING" },
                                    brewSteps: {
                                      type: "ARRAY",
                                      items: {
                                        type: "OBJECT",
                                        properties: {
                                          phase: { type: "STRING" },
                                          menge: { type: "NUMBER" },
                                          temp: { type: "NUMBER" },
                                          durchfluss: { type: "NUMBER" },
                                          pause: { type: "NUMBER" },
                                          muster: { type: "STRING" },
                                          vibVor: { type: "STRING" },
                                          vibNach: { type: "STRING" }
                                        }
                                      }
                                    }
                                  }
                                },
                                balanced: {
                                  type: "OBJECT",
                                  properties: {
                                    title: { type: "STRING", description: "Titel: 'Optimiert & Ausgewogen'" },
                                    menge: { type: "NUMBER" },
                                    verhaeltnis: { type: "STRING" },
                                    wasserGesamt: { type: "NUMBER" },
                                    mahlgrad: { type: "NUMBER" },
                                    rpm: { type: "NUMBER" },
                                    gesamtBruehzeit: { type: "STRING" },
                                    anmerkungenTabelle: { type: "STRING" },
                                    aufgussStrategieText: { type: "STRING" },
                                    brewSteps: { type: "ARRAY", items: { "$ref": "#/properties/details/properties/recipes/properties/original/properties/brewSteps/items" } }
                                  }
                                },
                                alternative: {
                                  type: "OBJECT",
                                  properties: {
                                    title: { type: "STRING", description: "Titel: 'Charakter-Fokus: [Merkmal]'" },
                                    menge: { type: "NUMBER" },
                                    verhaeltnis: { type: "STRING" },
                                    wasserGesamt: { type: "NUMBER" },
                                    mahlgrad: { type: "NUMBER" },
                                    rpm: { type: "NUMBER" },
                                    gesamtBruehzeit: { type: "STRING" },
                                    anmerkungenTabelle: { type: "STRING" },
                                    aufgussStrategieText: { type: "STRING" },
                                    brewSteps: { type: "ARRAY", items: { "$ref": "#/properties/details/properties/recipes/properties/original/properties/brewSteps/items" } }
                                  }
                                }
                              }
                            }
                          }
                        }
                      }
                    };

                    const generationPrompt = `Du bist ein professioneller Barista und Rezeptentwickler für die xBloom Kaffeemaschine. Deine Aufgabe ist es, eine Webseite für ein Kaffeeprodukt zu analysieren und daraus ein komplettes JSON-Objekt mit allen relevanten Informationen und drei einzigartigen Brührezepten zu erstellen.

**Analyse der URL:**
Greife auf die folgende URL zu und analysiere den Inhalt der Seite sorgfältig: ${url}

**Extrahiere die folgenden Informationen und entwickle 3 Brührezepte für die xBloom:**
Basierend auf den extrahierten Informationen (insbesondere Aufbereitung, Herkunft und Geschmacksprofil), entwickle drei unterschiedliche Rezepte. Beachte dabei die Logik der bestehenden Rezepte auf der Website:

1.  **Originalrezept**: Ein solides Alltagsrezept, das einen guten Startpunkt darstellt.
2.  **Optimiert & Ausgewogen**: Ein verfeinertes Rezept, das darauf abzielt, die beste Balance zwischen Süße, Säure und Körper zu finden.
3.  **Charakter-Fokus**: Ein alternatives Rezept, das ein bestimmtes Geschmacksmerkmal (z.B. "Fruchtbombe", "Tee-Klarheit") gezielt maximiert.

**Beachte die xBloom-Parameter:**
- **mahlgrad**: Auf der xBloom-Skala (1-80). Typischerweise 30-45 für Decaf, 40-65 für die meisten Filterkaffees. Passe den Mahlgrad logisch an das Rezeptziel an (feiner für mehr Extraktion, gröber für mehr Klarheit).
- **rpm**: 60-120. Niedriger (60-70) für Klarheit.
- **temperatur**: 88-95°C.
- **durchfluss**: 3.0-3.5 ml/s.

**Anforderungen an das JSON-Format:**
Gib deine gesamte Antwort **ausschließlich** als ein einziges JSON-Objekt zurück, das dem bereitgestellten Schema entspricht. Füge keine Erklärungen, Kommentare oder sonstigen Text außerhalb des JSON-Objekts hinzu.`;

                    let chatHistory = [];
                    chatHistory.push({ role: "user", parts: [{ text: generationPrompt }] });

                    const payload = { 
                      contents: chatHistory, 
                      generationConfig: {
                        responseMimeType: "application/json",
                        responseSchema: recipeSchema
                      }
                    };
                    
                    const apiKey = ""; 
                    const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=${apiKey}`;
                    
                    setStatus('2/3 - Generiere Rezepte...');
                    const response = await fetch(apiUrl, {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify(payload)
                    });

                    if (!response.ok) {
                        const errorBody = await response.text();
                        throw new Error(`API Error: ${response.status} ${errorBody}`);
                    }
                    
                    const result = await response.json();
                    
                    if (!result.candidates || !result.candidates[0].content.parts[0].text) {
                        throw new Error("Unerwartete API-Antwortstruktur.");
                    }

                    setStatus('3/3 - Fertig!');
                    const newCoffee = JSON.parse(result.candidates[0].content.parts[0].text);
                    setCoffeeData(prevData => [newCoffee, ...prevData]);
                    onClose();

                } catch (err) {
                    console.error("Fehler bei der Rezept-Generierung:", err);
                    setError(`Ein Fehler ist aufgetreten: ${err.message}. Bitte versuchen Sie es erneut.`);
                    setStatus('');
                } finally {
                    setIsLoading(false);
                }
            };


            return React.createElement("div", { className: "fixed inset-0 bg-black/60 backdrop-blur-sm flex justify-center items-center px-4 z-50", onClick: onClose },
                React.createElement("div", { className: "bg-white p-8 rounded-lg shadow-2xl w-full max-w-lg", onClick: e => e.stopPropagation() },
                    React.createElement("h2", { className: "text-2xl font-serif font-medium text-stone-800 mb-4" }, "Admin-Bereich"),
                    
                    React.createElement("div", {className: "space-y-6"},
                        React.createElement("div", null, 
                           React.createElement("h3", { className: "text-lg font-serif font-medium text-stone-700 mb-2" }, "Neuen Kaffee hinzufügen"),
                           React.createElement("p", { className: "text-stone-600 text-sm mb-3" }, "Fügen Sie einen Link zu einer Produktseite ein, um automatisch neue Rezepte zu generieren."),
                           React.createElement("div", { className: "space-y-3" },
                                React.createElement("input", {
                                    ref: inputRef,
                                    type: "url",
                                    value: url,
                                    onChange: (e) => setUrl(e.target.value),
                                    className: "w-full px-4 py-2 border border-stone-300 rounded-md focus:ring-2 focus:ring-orange-500 focus:border-orange-500 transition",
                                    placeholder: "https://beispiel-roester.de/kaffee/..."
                                }),
                                
                                isLoading ? 
                                    React.createElement("div", { className: "text-center py-2" }, 
                                        React.createElement("div", { className: "spinner mx-auto" }),
                                        React.createElement("p", { className: "text-sm text-stone-600 mt-2" }, status || 'Verarbeitung...')
                                    )
                                : React.createElement("button", { onClick: handleGenerate, className: "w-full bg-orange-700 text-white py-2.5 px-6 rounded-md hover:bg-orange-800 transition-colors text-sm font-semibold flex items-center justify-center gap-2" }, 
                                        React.createElement(SparklesIcon, { className: "w-5 h-5" }),
                                        "Rezepte generieren"
                                    )
                           )
                        ),
                        React.createElement("div", { className: "border-t border-stone-200 pt-6" },
                            React.createElement("h3", { className: "text-lg font-serif font-medium text-stone-700 mb-2" }, "Gesundheitsdaten"),
                            React.createElement("p", { className: "text-stone-600 text-sm mb-3" }, "Zeigen Sie die Analyse des immunologischen Fingerabdrucks an."),
                            React.createElement("button", { onClick: onShowInfographic, className: "w-full bg-stone-600 text-white py-2.5 px-6 rounded-md hover:bg-stone-700 transition-colors text-sm font-semibold" }, "Immunologischen Fingerabdruck anzeigen")
                        )
                    ),
                    
                    error && React.createElement("p", { className: "text-red-600 text-xs text-center mt-4 bg-red-50 p-3 rounded-md" }, error),
                    
                    React.createElement("div", { className: "flex justify-center mt-8 border-t border-stone-200 pt-6" },
                        React.createElement("button", { type: "button", onClick: onClose, className: "bg-stone-200 text-stone-700 py-2 px-8 rounded-md hover:bg-stone-300 transition-colors text-sm font-medium" }, "Schließen")
                    )
                )
            );
        };

        const PasswordModal = ({ onClose, onSuccess }) => {
            const [password, setPassword] = useState('');
            const [error, setError] = useState('');
            const inputRef = useRef(null);

            useEffect(() => {
                if (inputRef.current) {
                  inputRef.current.focus();
                }
            }, []);

            const handleSubmit = (e) => {
                e.preventDefault();
                if (password === '2568') {
                    onSuccess();
                } else {
                    setError('Falsches Passwort. Bitte erneut versuchen.');
                    setPassword('');
                }
            };

            return React.createElement("div", { className: "fixed inset-0 bg-black/60 backdrop-blur-sm flex justify-center items-center px-4 z-50", onClick: onClose },
                React.createElement("div", { className: "bg-white p-8 rounded-lg shadow-2xl w-full max-w-sm", onClick: e => e.stopPropagation() },
                    React.createElement("h2", { className: "text-2xl font-serif font-medium text-stone-800 mb-4 text-center" }, "Admin-Login"),
                    React.createElement("p", { className: "text-stone-600 text-sm mb-6 text-center" }, "Bitte geben Sie das Passwort ein, um fortzufahren."),
                    React.createElement("form", { onSubmit: handleSubmit },
                        React.createElement("input", {
                            ref: inputRef,
                            type: "password",
                            value: password,
                            onChange: (e) => setPassword(e.target.value),
                            className: `w-full px-4 py-2 border rounded-md text-center transition ${error ? 'border-red-500 ring-2 ring-red-200' : 'border-stone-300 focus:ring-2 focus:ring-orange-500 focus:border-orange-500'}`,
                            placeholder: "****"
                        }),
                        error && React.createElement("p", { className: "text-red-600 text-xs text-center mt-2" }, error),
                        React.createElement("div", { className: "flex justify-center gap-4 mt-6" },
                            React.createElement("button", { type: "button", onClick: onClose, className: "bg-stone-200 text-stone-700 py-2 px-6 rounded-md hover:bg-stone-300 transition-colors text-sm font-medium" }, "Abbrechen"),
                            React.createElement("button", { type: "submit", className: "bg-orange-800 text-white py-2 px-6 rounded-md hover:bg-orange-900 transition-colors text-sm font-medium" }, "Bestätigen")
                        )
                    )
                )
            );
        };

        const RecipeModal = ({ coffee, onClose }) => {
          const [activeRecipeKey, setActiveRecipeKey] = useState('balanced');
          const [copySuccess, setCopySuccess] = useState('');
          
          useEffect(() => {
              if (coffee && coffee.details.recipes) {
                  const preferredOrder = ['balanced', 'alternative', 'original'];
                  const availableKey = preferredOrder.find(key => coffee.details.recipes[key]);
                  setActiveRecipeKey(availableKey || Object.keys(coffee.details.recipes)[0]);
              }
          }, [coffee]);

          if (!coffee) return null;
          
          const activeRecipe = coffee.details.recipes[activeRecipeKey];
          if (!activeRecipe) {
            console.error("Invalid or missing recipe key:", activeRecipeKey, coffee.details.recipes);
            return null;
          }

          const copyToClipboard = () => {
              const recipeText = `Rezept für: ${coffee.name} (${activeRecipe.title})\n--------------------------------------------------\nPARAMETER:\nKaffeemenge: ${activeRecipe.menge}g\nWassermenge: ${activeRecipe.wasserGesamt}ml\nVerhältnis: ${activeRecipe.verhaeltnis}\nMahlgrad (xBloom): ${activeRecipe.mahlgrad}\nRPM: ${activeRecipe.rpm}\nGesamtbrühzeit: ${activeRecipe.gesamtBruehzeit}\n--------------------------------------------------\nBRÜHSCHRITTE:\n${activeRecipe.brewSteps.map(step => `  - ${step.phase}: ${step.menge}ml @ ${step.temp}°C | Fluss: ${step.durchfluss.toFixed(1)}ml/s | Pause: ${step.pause}s | Muster: ${step.muster}`).join('\n')}\n--------------------------------------------------\nAnmerkungen: ${activeRecipe.anmerkungenTabelle}`.trim();
              const textArea = document.createElement("textarea");
              textArea.value = recipeText;
              textArea.style.position = "fixed"; textArea.style.left = "-9999px";
              document.body.appendChild(textArea);
              textArea.focus(); textArea.select();
              try {
                  document.execCommand('copy');
                  setCopySuccess('Rezept in die Zwischenablage kopiert!');
              } catch (err) {
                  setCopySuccess('Fehler beim Kopieren.');
              }
              document.body.removeChild(textArea);
              setTimeout(() => setCopySuccess(''), 2000);
          };

          const getVibrationText = (step) => {
            if (String(step.vibVor).toLowerCase() === "ja") return 'Davor';
            if (String(step.vibNach).toLowerCase() === "ja") return 'Danach';
            return 'Nein';
          };

          const textColorAccent = coffee.textColorAccent || 'text-orange-900';
          const bgColorAccentLight = coffee.bgColorAccentLight || 'bg-orange-50';
          const borderColorAccent = coffee.borderColorAccent || 'border-orange-700';

          const RecipeTabButton = ({ recipeKey, children }) => {
              if (!coffee.details.recipes[recipeKey]) return null;
              const isActive = activeRecipeKey === recipeKey;
              const baseClasses = "px-4 py-2 text-sm font-medium rounded-md transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2";
              const activeClasses = `${bgColorAccentLight} ${textColorAccent} shadow-md`;
              const inactiveClasses = "text-stone-500 hover:bg-stone-200";
              return React.createElement("button", { 
                  onClick: () => setActiveRecipeKey(recipeKey), 
                  className: `${baseClasses} ${isActive ? activeClasses : inactiveClasses} ${borderColorAccent}`
              }, children);
          };
          
          return (
            React.createElement("div", { className: "fixed inset-0 bg-black/60 backdrop-blur-sm flex justify-center items-start py-6 sm:py-10 px-4 z-40 transition-opacity duration-300 ease-in-out overflow-y-auto", onClick: onClose },
              React.createElement("div", { className: "bg-white p-0 rounded-lg shadow-2xl w-full max-w-4xl max-h-[90vh] sm:max-h-[85vh] overflow-y-auto relative font-sans text-stone-800", onClick: e => e.stopPropagation() },
                React.createElement("button", { onClick: onClose, className: "absolute top-4 right-4 text-stone-400 hover:text-stone-700 text-3xl font-light transition-colors z-20 focus:outline-none focus:ring-2 focus:ring-stone-400 rounded-full", "aria-label": "Schließen" }, "×"),
                React.createElement("div", { className: `p-5 sm:p-6 rounded-t-lg ${bgColorAccentLight} border-b-4 ${borderColorAccent}` }, 
                    React.createElement("h2", { className: `text-3xl sm:text-4xl font-serif font-medium ${textColorAccent}` }, coffee.name), 
                    React.createElement("p", { className: "text-stone-500 text-lg" }, "von ", React.createElement("strong", null, coffee.details.roesterei))
                ),
                React.createElement("div", { className: "p-6 sm:p-8" },
                    React.createElement("div", { className: "mb-6 flex flex-wrap gap-2 p-2 bg-stone-100 rounded-lg" },
                        React.createElement(RecipeTabButton, { recipeKey: "balanced" }, "Optimiert & Ausgewogen"),
                        React.createElement(RecipeTabButton, { recipeKey: "alternative" }, "Charakter-Fokus"),
                        React.createElement(RecipeTabButton, { recipeKey: "original" }, "Original")
                    ),
                    React.createElement("div", { className: "grid grid-cols-1 md:grid-cols-2 gap-x-8 gap-y-6" },
                        React.createElement("div", null,
                            React.createElement("div", { className: `p-4 sm:p-5 rounded-md mb-6 ${bgColorAccentLight} border-l-4 ${borderColorAccent}` }, 
                                React.createElement("h4", { className: `text-lg font-serif font-medium ${textColorAccent} mb-1.5` }, "Erläuterung der Strategie"), 
                                React.createElement("p", { className: "text-stone-700 text-sm leading-relaxed" }, activeRecipe.aufgussStrategieText)
                            )
                        ),
                        React.createElement("div", null,
                            React.createElement("h4", { className: `text-lg font-serif font-medium ${textColorAccent} mb-3` }, "Brühparameter (xBloom App)"),
                            React.createElement("div", { className: "mb-6 bg-stone-50 p-4 rounded-md border border-stone-200" }, React.createElement("div", { className: "grid grid-cols-2 sm:grid-cols-3 gap-x-4 gap-y-2 text-sm text-stone-700" }, 
                                React.createElement("p", null, React.createElement("strong", null, "Kaffeemenge:"), " ", activeRecipe.menge, "g"), 
                                React.createElement("p", null, React.createElement("strong", null, "Volumen:"), " ", activeRecipe.wasserGesamt, "ml"), 
                                React.createElement("p", null, React.createElement("strong", null, "Verhältnis:"), " ", activeRecipe.verhaeltnis), 
                                React.createElement("p", null, React.createElement("strong", null, "Mahlgrad:"), " ", activeRecipe.mahlgrad), 
                                React.createElement("p", null, React.createElement("strong", null, "RPM:"), " ", activeRecipe.rpm), 
                                React.createElement("p", null, React.createElement("strong", null, "Brühzeit:"), " ", activeRecipe.gesamtBruehzeit)
                            )),
                            React.createElement("div", { className: "w-full" }, 
                                React.createElement("div", { className: "hidden md:grid grid-cols-9 gap-x-4 items-center p-2 text-xs text-stone-400 border-b border-stone-200" }, 
                                    React.createElement("p", { className: "col-span-2 font-medium" }, "Phase"), React.createElement("p", { className: "col-span-1 text-center font-medium" }, "Menge"), React.createElement("p", { className: "col-span-1 text-center font-medium" }, "Temp"), React.createElement("p", { className: "col-span-1 text-center font-medium" }, "Fluss"), React.createElement("p", { className: "col-span-1 text-center font-medium" }, "Pause"), React.createElement("p", { className: "col-span-2 text-center font-medium" }, "Muster"), React.createElement("p", { className: "col-span-1 text-center font-medium" }, "Vibration")
                                ), 
                                React.createElement("div", { className: "space-y-2 md:space-y-0" }, 
                                    activeRecipe.brewSteps.map((step, index) => React.createElement("div", { key: index, className: "md:grid md:grid-cols-9 md:gap-x-4 md:items-center text-sm p-3 md:p-2 rounded-lg bg-stone-50 md:bg-transparent md:border-b md:border-stone-200" }, 
                                        React.createElement("p", { className: `col-span-2 font-semibold ${textColorAccent} text-base md:text-sm mb-2 md:mb-0` }, step.phase), 
                                        React.createElement("div", {className: "col-span-7 grid grid-cols-2 gap-x-6 md:grid-cols-7 md:gap-x-4 gap-y-1" }, 
                                            React.createElement("div", { className: "md:col-span-1 flex justify-between md:block md:text-center" }, React.createElement("span", {className: "text-stone-500 md:hidden"}, "Menge"), React.createElement("span", null, `${step.menge}ml`)), 
                                            React.createElement("div", { className: "md:col-span-1 flex justify-between md:block md:text-center" }, React.createElement("span", {className: "text-stone-500 md:hidden"}, "Temperatur"), React.createElement("span", null, `${step.temp}°C`)), 
                                            React.createElement("div", { className: "md:col-span-1 flex justify-between md:block md:text-center" }, React.createElement("span", {className: "text-stone-500 md:hidden"}, "Flussrate"), React.createElement("span", null, `${step.durchfluss.toFixed(1)}ml/s`)), 
                                            React.createElement("div", { className: "md:col-span-1 flex justify-between md:block md:text-center" }, React.createElement("span", {className: "text-stone-500 md:hidden"}, "Pause"), React.createElement("span", null, `${step.pause}s`)), 
                                            React.createElement("div", { className: "md:col-span-2 flex justify-between md:block md:text-center" }, React.createElement("span", {className: "text-stone-500 md:hidden"}, "Muster"), React.createElement("span", null, step.muster)), 
                                            React.createElement("div", { className: "md:col-span-1 flex justify-between md:block md:text-center" }, React.createElement("span", {className: "text-stone-500 md:hidden"}, "Vibration"), React.createElement("span", { className: `font-medium ${getVibrationText(step) !== 'Nein' ? textColorAccent : 'text-stone-500'}` }, getVibrationText(step)))
                                        )
                                    ))
                                )
                            )
                        )
                    ),
                    React.createElement("p", { className: "text-xs text-stone-500 mt-8 mb-6 italic text-center border-t border-stone-200 pt-4" }, "Hinweis: ", activeRecipe.anmerkungenTabelle),
                    React.createElement("div", { className: "mt-8 pt-5 border-t border-stone-200 flex flex-col sm:flex-row justify-end items-center gap-4" }, 
                        copySuccess && React.createElement("p", { className: "text-sm text-emerald-600 mr-auto" }, copySuccess),
                        React.createElement("a", { href: coffee.details.buyLink, target: "_blank", rel: "noopener noreferrer", className: `w-full sm:w-auto flex items-center justify-center gap-2 bg-stone-700 text-white py-2.5 px-6 rounded-md hover:bg-stone-800 transition-colors text-sm font-medium shadow-sm hover:shadow-md focus:outline-none focus:ring-2 focus:ring-stone-600 focus:ring-offset-2`}, React.createElement(ExternalLinkIcon, { className: "w-4 h-4" }), "Online kaufen"),
                        React.createElement("button", { onClick: copyToClipboard, className: `w-full sm:w-auto flex items-center justify-center gap-2 ${bgColorAccentLight} ${textColorAccent} py-2.5 px-6 rounded-md hover:opacity-80 transition-opacity text-sm font-medium shadow-sm hover:shadow-md focus:outline-none focus:ring-2 ${borderColorAccent} focus:ring-offset-2` }, React.createElement(ClipboardCopyIcon, null), "Rezept kopieren"),
                        React.createElement("button", { onClick: onClose, className: "w-full sm:w-auto bg-stone-200 text-stone-700 py-2.5 px-8 rounded-md hover:bg-stone-300 transition-colors text-sm font-medium shadow-sm hover:shadow-md focus:outline-none focus:ring-2 focus:ring-stone-400 focus:ring-offset-2" }, "Schließen")
                    )
                )
              )
            )
          );
        };
        
        ReactDOM.render(React.createElement(App), document.getElementById('root'));
    </script>
</body>
</html>
